<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" version="1.0" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" extension-element-prefixes="exsl"><xsl:param name="EMAIL_RECIPIENT_NUMFORMAT_PREF" select="&#39;&#39;"/><xsl:param name="BM_IMAGESERVER_TOKEN" select="&#39;&#39;"/><xsl:param name="TIME_ZONE" select="&#39;&#39;"/><xsl:param name="TEMPLATE_ID" select="&#39;&#39;"/><xsl:param name="TRANSACTION_ID" select="&#39;&#39;"/><xsl:param name="PRINT_TIME" select="&#39;&#39;"/><xsl:param name="PRINT_CODE" select="&#39;&#39;"/><xsl:output method="html"/><!-- <xsl:include href="http://localhost:8080/xsl/templateengine/xhtml-to-fo-full.xsl"/> --><xsl:variable name="FILEATTACHMENT_DELIM" select="&#39;|^|&#39;"/>

<!-- Template to copy all nodes, given a root node. E.g. Used to copy RTE attribute as it is, in email templates, from the input XML  -->
<xsl:template name="copyNodes">
    <xsl:param name="rootNode" />
    <xsl:copy-of select="$rootNode/*" />
</xsl:template>

<xsl:template name="BMI_universalFormatPriceCustom">
    <!-- 
        The currency symbol and number format are separate variables in this template.
        Currency symbol can appear before number, after number, or not at all.
    -->
    <xsl:param name="price"/>
    
    <xsl:param name="multiplier" select="1"/>
    <xsl:param name="showCents" select="true()"/>
    <xsl:param name="precision" select="2"/>
    
    <xsl:param name="currency" select="'USD'"/> <!-- /transaction/data_xml/@currency -->
    <xsl:param name="showCurrencySymbol"/> <!-- 0: None, 1: Before, 2: After -->
    <xsl:param name="decimalFormatClass" /><!-- determines decimal and group separators -->
    
    <!--<xsl:param name="format" />  group and decimal pattern - TODO pattern is made by xsl with adjusted precision -->
    
    <!-- the format for printing currency symbol -->
    <xsl:variable name="currencyFormatForSymbol" select="$currencySymbolsAndLabels/currencies/currency[@name=$currency]"/>
    
    <!-- the currency symbol's whitespace -->
    <xsl:variable name="whiteSpace">
        <xsl:choose>
            <!-- using a normal space here to avoid conflicts with number formats which use a non-breaking space for the grouping separator; like hungarian. -->
            <!-- this will be replaced by a non-breaking space after formatting -->
            <xsl:when test="$currencyFormatForSymbol/hasWhitespaceSeparator = boolean(1)"><xsl:value-of select="' '"/></xsl:when>
        </xsl:choose>
    </xsl:variable>
    
    <!-- currency transaction value is stored in -->
    <xsl:variable name="fromCurrency" select="/transaction/data_xml/@currency"/><!-- transaction data is stored in trans currency format. Ex: "1234,56" for EUR -->
    <xsl:variable name="fromCurrencyFormat" select="$currencySymbolsAndLabels/currencies/currency[@name=$fromCurrency]"/>
    
    <!-- adjusted precision value -->
    <xsl:variable name="safePrecision">
        <xsl:choose>
            <xsl:when test="number($precision) &gt;= 0 and number($precision) &lt;= 8">
                <xsl:value-of select="$precision"/>
            </xsl:when>
            <xsl:otherwise>2</xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <!-- price value with adjusted precision -->
    <xsl:variable name="safePrice">
        <xsl:call-template name="BMI_calculateSafePrice">
            <xsl:with-param name="price" select="$price"/>
            <xsl:with-param name="currencyFormat" select="$fromCurrencyFormat"/>
            <xsl:with-param name="multiplier" select="$multiplier"/>
            <xsl:with-param name="showCents" select="$showCents"/>
            <xsl:with-param name="safePrecision" select="$safePrecision"/>
        </xsl:call-template>
    </xsl:variable>

    <!-- final decimal format class name. if empty, use format from incoming currency -->
    <xsl:variable name="dfcName">
        <xsl:choose>
            <xsl:when test="$decimalFormatClass and string-length($decimalFormatClass) &gt; 0">
                <xsl:value-of select="$decimalFormatClass"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:choose>
                    <xsl:when test="boolean($currencyFormatForSymbol/decimal-format)">
                        <xsl:value-of select="$currencyFormatForSymbol/decimal-format/@name"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'american'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    
    <!-- 'decimal-format' xml node present in currency xml -->
    <xsl:variable name="outputFormatNode" select="$currencySymbolsAndLabels/currencies/decimal-format[@name=$dfcName]"/>
    
    <!-- final symbol location -->
    <xsl:variable name="symbolLocation">
        <xsl:choose>
            <xsl:when test="number($showCurrencySymbol) = number($showCurrencySymbol) and number($showCurrencySymbol) &gt;= 0">
                <xsl:value-of select="number($showCurrencySymbol)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:choose>
                    <xsl:when test="$currencyFormatForSymbol/location">
                        <xsl:value-of select="number($currencyFormatForSymbol/location)"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="1"/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    
    <!-- get format pattern -->
    <xsl:variable name="format">
        <xsl:call-template name="BMI_formatCurrencyValue">
            <xsl:with-param name="currencyFormat"   select="$outputFormatNode"/>
            <xsl:with-param name="showCents"        select="$showCents"/>
            <xsl:with-param name="safePrecision"    select="$safePrecision"/>
        </xsl:call-template>
    </xsl:variable>

    <xsl:variable name="CURRENCY_LABEL_PLACEHOLDER" select="'CURRENCYLABELPLACEHOLDER'"/>
    
    <!-- Format with Symbol and WhiteSpace-->
    <xsl:variable name="finalFormat">
        <xsl:call-template name="appendCurrencyPlaceHolder">
            <xsl:with-param name="CURRENCY_LABEL_PLACEHOLDER"   select="$CURRENCY_LABEL_PLACEHOLDER"/>
            <xsl:with-param name="symbolLocation"               select="$symbolLocation"/>
            <xsl:with-param name="whiteSpace"                   select="$whiteSpace"/>
            <xsl:with-param name="value"                        select="$format"/>
        </xsl:call-template>
    </xsl:variable>

    <!-- Formated Number without symbol -->
    <xsl:variable name="formattedNumber">
        <xsl:variable name="withPossibleWhitespace">
            <xsl:choose>
                <!-- indian value formated by java -->
                <xsl:when test="$dfcName = 'indian'">
                    <xsl:call-template name="appendCurrencyPlaceHolder">
                        <xsl:with-param name="CURRENCY_LABEL_PLACEHOLDER"   select="$CURRENCY_LABEL_PLACEHOLDER"/>
                        <xsl:with-param name="symbolLocation"               select="$symbolLocation"/>
                        <xsl:with-param name="whiteSpace"                   select="$whiteSpace"/>
                        <xsl:with-param name="value"                        select="PrintUtil:formatIndian( number($safePrice), number($safePrecision) )"/>
                    </xsl:call-template>
                </xsl:when>

                <!-- other values formated by xsl -->
                <xsl:otherwise>
                    <xsl:value-of select="format-number($safePrice, $finalFormat, $dfcName)"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <!-- replacing the symbol whitespace separator with a non-breaking space to ensure the entire currency string stays on the same line -->
        <xsl:value-of select="translate($withPossibleWhitespace, ' ', '&#160;')"/>
    </xsl:variable>

    <!-- Return number with currency symbol -->
    <xsl:choose>
        <xsl:when test="$symbolLocation &gt;= 1">
            <!-- get the currency label -->
            <xsl:variable name="currencySymbol">
                <xsl:call-template name="BMI_addCurrencyLabelOnly">
                    <xsl:with-param name="currencyFormat" select="$currencyFormatForSymbol"/>
                    <xsl:with-param name="currency" select="$currency"/>
                </xsl:call-template>
            </xsl:variable>

            <!-- replace the currency label placeholder with the actual currency label -->
            <xsl:variable name="before" select="substring-before($formattedNumber, $CURRENCY_LABEL_PLACEHOLDER)"/>
            <xsl:variable name="after" select="substring-after($formattedNumber, $CURRENCY_LABEL_PLACEHOLDER)"/>

            <!-- final currency string -->
            
            <!-- combine currency symbol and formatted number -->
            <xsl:choose>
                <xsl:when test="count($currencyFormatForSymbol/font)&gt;0">
                    <xsl:value-of select="$before"/>
                    <span style="font-family: {$currencyFormatForSymbol/font}">
                        <xsl:value-of select="$currencySymbol"/>
                    </span>
                    <xsl:value-of select="$after"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="concat($before, $currencySymbol, $after)"/>
                </xsl:otherwise>
            </xsl:choose>
            
        </xsl:when>

        <xsl:otherwise>
            <!-- we aren't showing the currency symbol, so no need to do the replace -->
            <xsl:value-of select="$formattedNumber"/>
        </xsl:otherwise>
    </xsl:choose>
    
</xsl:template>

<!-- DEPRECATED -->
<xsl:template name="BMI_addCurrencyLabelOnly">
    <xsl:param name="currencyFormat"/>
    <xsl:param name="currency"/>
    <xsl:choose>
        <xsl:when test="$currencyFormat">
            <xsl:choose>
                <xsl:when test="count($currencyFormat/font)&gt;0">
                    <span style="font-family: {$currencyFormat/font}">
                        <xsl:value-of select="$currencyFormat/label"/>
                    </span>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="$currencyFormat/label"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$currency"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<!-- adds currency placeholder string with whitespace to left, right, or none of the 'value' string -->
<!-- use a placeholder for the currency symbol/label, as it may contain special characters used by format-number. -->
<!-- the label is required in the format string in order for negative prices to be formatted correctly -->
<xsl:template name="appendCurrencyPlaceHolder">
    <xsl:param name="symbolLocation" select="1" />
    <xsl:param name="CURRENCY_LABEL_PLACEHOLDER" select="CLP" />
    <xsl:param name="whiteSpace"/>
    <xsl:param name="value"/>

    <xsl:choose>
        <!-- add symbol placeholder after -->
        <xsl:when test="$symbolLocation &gt; 1">
            <xsl:value-of select="concat($value, $whiteSpace, $CURRENCY_LABEL_PLACEHOLDER)"/>
        </xsl:when>
        
        <!-- add symbol placeholder before -->
        <xsl:when test="$symbolLocation = 1">
            <xsl:value-of select="concat($CURRENCY_LABEL_PLACEHOLDER, $whiteSpace, $value)"/>
        </xsl:when>
        
        <!-- no symbol needed -->
        <xsl:otherwise>
            <xsl:value-of select="$value"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
    
<xsl:template name="BMI_getImageSrc">
    <xsl:param name="attachmentID" select="-1" />
    <xsl:param name="defaultUrl" select="''"/>
    <!-- returns FILEATTACHMENT#{attachmentID} if the file attachment is an image, 
         otherwise it returns defaultUrl. if defaultUrl is a FILE_MANAGER#{file path} string,
         it encodes the file path with valid url characters before returning it -->
    <xsl:value-of xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" select="PrintUtil:getImageSrc($attachmentID, $defaultUrl)"/>
</xsl:template>

<xsl:template name="BM_getEmbedDocSrc">
    <xsl:param name="attachmentID" select="-1"/>
    <!-- returns FILEATTACHMENT#{attachmentID} if the file attachment is a PDF,
        otherwise returns an empty string -->
    <xsl:value-of xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" select="PrintUtil:getEmbedDocSrc($attachmentID)"/>
</xsl:template>


<!-- returns 1 or 0 depending on specifc values passed in.
Used for Custom XSL for Conditions and Loop Filters -->
  <xsl:template name="getCustomXslTruth">
    <xsl:param name="var"/>
    <xsl:choose>
        <!-- is a number -->
        <xsl:when test="number($var)=number($var)">
            <xsl:value-of select="number(boolean(number($var)))"/>
        </xsl:when>
        <!-- empty string -->
        <xsl:when test="string-length($var)=0">
            <xsl:value-of select="number(0)"/>
        </xsl:when>
        <!-- string says 'false' -->
        <xsl:when test="$var='false' or $var='False' or $var='FALSE'">
            <xsl:value-of select="number(0)"/>
        </xsl:when>
        <!-- string says 'true' -->
        <xsl:when test="$var='true' or $var='True' or $var='TRUE'">
            <xsl:value-of select="number(1)"/>
        </xsl:when>
        <!-- string says something else -->
        <xsl:when test="string-length($var)&gt;0">
            <xsl:value-of select="number(1)"/>
        </xsl:when>
        <!-- other -->
        <xsl:otherwise>
            <xsl:value-of select="number(0)"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>



<!-- split a text delimiter 'list' into "node" elements, can be used to create a node set array.
    set $wrdBrk to be the list delimiter -->
<xsl:template name="splitTextIntoElementList">

    <!-- $wrdBrk break on this character for a attribute:value combo -->
    <xsl:param name="wrdBrk" select="','" />

    <!-- start with nothing in $word and all the words in $remaining -->
    <xsl:param name="word" select="''" />
    <xsl:param name="remaining" select="." />

    <!-- === print value in word ==== -->
    <xsl:if test="$word">
         <Node><xsl:value-of select="$word"/></Node>
    </xsl:if>

    <xsl:choose>
        <!-- if $remaining contains another word -->
        <xsl:when test="substring-before($remaining, $wrdBrk)">
            <xsl:call-template name="splitTextIntoElementList">
                <!--  move the first word of $remaining to $word,
                        remove the word from $remaining, and recurse. &lt;Node&gt;
                -->
                <xsl:with-param name="word" select="substring-before($remaining, $wrdBrk)" />
                <xsl:with-param name="remaining" select="substring-after($remaining, $wrdBrk)" />
                <xsl:with-param name="wrdBrk" select=" $wrdBrk" />
            </xsl:call-template>
        </xsl:when>
        <!-- if $remaining contains a single value, set to $word and recurse one more time -->
        <xsl:when test="$remaining">
            <xsl:call-template name="splitTextIntoElementList">
                <xsl:with-param name="word" select="$remaining" />
                <xsl:with-param name="remaining" select="null" />
                <xsl:with-param name="wrdBrk" select=" $wrdBrk" />
            </xsl:call-template>
        </xsl:when>
    </xsl:choose>

     <!-- === if $remaining is null, split is done ==== -->
</xsl:template>


<!-- formats a float/decimal value into the specified number format using the given precision. -->
<!-- currently supports 'EUR' for the '#.##0,00' format, otherwise defaults to '#,##0.00' -->
<xsl:template name="BMI_formatFloat">
    <xsl:param name="val"/>
    <xsl:param name="numFormat" select="'USD'"/>
    <xsl:param name="precision" select="2"/>
    <xsl:variable name="pattern">
        <xsl:variable name="groupingSeparator">
            <xsl:choose>
                <xsl:when test="$numFormat = 'EUR'">
                    <xsl:value-of select="'.'"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="','"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="decimalSeparator">
            <xsl:choose>
                <xsl:when test="$numFormat = 'EUR'">
                    <xsl:value-of select="','"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="'.'"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="wholePart" select="concat('#', $groupingSeparator, '##0')"/>
        <xsl:variable name="decimalPart">
            <xsl:choose>
                <xsl:when test="$precision &gt; 0">
                    <xsl:value-of select="concat($decimalSeparator, substring('0000000000000000', 1, $precision) )"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="''"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:value-of select="concat($wholePart, $decimalPart)"/>
    </xsl:variable>
    <xsl:variable name="format">
        <xsl:choose>
            <xsl:when test="$numFormat = 'EUR'">
                <xsl:value-of select="'euro'"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="'american'"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <xsl:value-of select="format-number($val, $pattern, $format)"/>
</xsl:template><xsl:variable name="currencySymbolsAndLabels" select="document('$XSL_URL$/xsl/documenteditor/currencies.xml')"/>

<xsl:decimal-format name="american"     grouping-separator="," decimal-separator="."/>
<xsl:decimal-format name="indian"       grouping-separator="," decimal-separator="."/>
<xsl:decimal-format name="zimbabwe"     grouping-separator="&#160;" decimal-separator="."/>
<xsl:decimal-format name="swiss"        grouping-separator="'" decimal-separator="."/>
<xsl:decimal-format name="euro"         grouping-separator="." decimal-separator=","/>
<xsl:decimal-format name="hungarian"    grouping-separator="&#160;" decimal-separator=","/>

    <xsl:template name="BMI_formatLongDate">
         <xsl:param name="date"/>
         <xsl:param name="separator"/>
         <!-- Month -->
         <xsl:variable name="month" select="number(substring($date, 6, 2))"/>
         <xsl:choose>
             <xsl:when test="$date!=''">
                 <xsl:choose>
                     <xsl:when test="$month=1">January</xsl:when>
                     <xsl:when test="$month=2">February</xsl:when>
                     <xsl:when test="$month=3">March</xsl:when>
                     <xsl:when test="$month=4">April</xsl:when>
                     <xsl:when test="$month=5">May</xsl:when>
                     <xsl:when test="$month=6">June</xsl:when>
                     <xsl:when test="$month=7">July</xsl:when>
                     <xsl:when test="$month=8">August</xsl:when>
                     <xsl:when test="$month=9">September</xsl:when>
                     <xsl:when test="$month=10">October</xsl:when>
                     <xsl:when test="$month=11">November</xsl:when>
                     <xsl:when test="$month=12">December</xsl:when>
                     <xsl:otherwise>INVALID MONTH</xsl:otherwise>
                 </xsl:choose>
                 <xsl:text> </xsl:text>
                 <!-- Day -->
                 <xsl:value-of select="number(substring($date, 9, 2))"/>
                 <xsl:text>, </xsl:text>
                 <!-- Year -->
                 <xsl:value-of select="substring($date, 1, 4)"/>
             </xsl:when>
         </xsl:choose>
    </xsl:template>
    <!-- Format a date of the form "2004-09-28 " into "09/28/2004" -->
    <xsl:template name="BMI_formatShortDate">
         <xsl:param name="date"/>
         <xsl:param name="separator"/>
         <xsl:variable name="month" select="number(substring($date, 6, 2))"/>
         <xsl:variable name="day" select="number(substring($date, 9, 2))"/>
         <xsl:variable name="year" select="substring($date, 1, 4)"/>
         <xsl:choose>
            <xsl:when test="$date!=''">
                <xsl:choose>
                    <xsl:when test="$separator='.'">
                        <xsl:value-of select="concat($day,$separator,$month,$separator,$year)"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="concat($month,$separator,$day,$separator,$year)"/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
         </xsl:choose>
    </xsl:template>
    
    <xsl:template name="BMI_universalFormatPrice">
        <xsl:param name="price"/>
        <xsl:param name="currency"/>
        <xsl:param name="multiplier" select="1"/>
        <xsl:param name="showCents" select="true()"/>
        <xsl:param name="showCurrencySymbol" select="true()"/>
        <xsl:param name="precision" select="2"/>
        <xsl:variable name="fromCurrency" select="/transaction/data_xml/@currency"/>
        <xsl:variable name="fromCurrencyFormat" select="$currencySymbolsAndLabels/currencies/currency[@name=$fromCurrency]"/>
        <xsl:variable name="currencyFormat" select="$currencySymbolsAndLabels/currencies/currency[@name=$currency]"/>
        <xsl:variable name="decimalFormatClass">
            <xsl:choose>
                <xsl:when test="$currencyFormat">
                    <xsl:choose>
                        <xsl:when test="count($currencyFormat/decimal-format)&gt;0">
                            <xsl:value-of select="$currencyFormat/decimal-format/@name"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:value-of select="'american'"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:when>
                <xsl:otherwise><xsl:value-of select="'american'"/></xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="safePrecision">
            <xsl:choose>
                <xsl:when test="number($precision) &gt;= 0 and number($precision) &lt;= 8">
                    <xsl:value-of select="$precision"/>
                </xsl:when>
                <xsl:otherwise>2</xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="safePrice">
            <xsl:call-template name="BMI_calculateSafePrice">
                <xsl:with-param name="price" select="$price"/>
                <xsl:with-param name="currencyFormat" select="$fromCurrencyFormat"/>
                <xsl:with-param name="multiplier" select="$multiplier"/>
                <xsl:with-param name="showCents" select="$showCents"/>
                <xsl:with-param name="safePrecision" select="$safePrecision"/>
            </xsl:call-template>
        </xsl:variable>
        <xsl:variable name="format">
            <xsl:call-template name="BMI_formatCurrencyValue">
                <xsl:with-param name="currencyFormat" select="$currencyFormat"/>
                <xsl:with-param name="showCents" select="$showCents"/>
                <xsl:with-param name="safePrecision" select="$safePrecision"/>
            </xsl:call-template>
        </xsl:variable>             
        <xsl:variable name="currencySymbol">
            <xsl:if test="$showCurrencySymbol">
                <xsl:call-template name="BMI_addCurrencyLabel">
                    <xsl:with-param name="currencyFormat" select="$currencyFormat"/>
                    <xsl:with-param name="currency" select="$currency"/>
                </xsl:call-template>
            </xsl:if>
        </xsl:variable>
        <xsl:value-of select="format-number($safePrice,concat($currencySymbol, $format),$decimalFormatClass)"/>           
    </xsl:template>
    
    <xsl:template name="BMI_calculateSafePrice">
        <xsl:param name="price"/>
        <xsl:param name="currencyFormat"/>
        <xsl:param name="multiplier"/>
        <xsl:param name="showCents"/>
        <xsl:param name="safePrecision"/>
        <xsl:variable name="decimalSeparator">
            <xsl:call-template name="BMI_determineDecimalSeparator">
                <xsl:with-param name="currencyFormat" select="$currencyFormat"/>
            </xsl:call-template>
        </xsl:variable>
        <xsl:variable name="formattedPrice">
            <xsl:choose>
                <xsl:when test="$decimalSeparator!='.'">
                    <xsl:call-template name="BMI_replaceSubstring">
                        <xsl:with-param name="base_string" select="$price"/>
                        <xsl:with-param name="string_to_replace" select="$decimalSeparator"/>
                        <xsl:with-param name="string_to_replace_with" select="'.'"/>
                    </xsl:call-template>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="$price"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="priceWithoutMult">
            <xsl:choose>
                <xsl:when test="string(number($formattedPrice))!='NaN'">
                    <xsl:value-of select="$formattedPrice"/>
                </xsl:when>
                <xsl:otherwise>0</xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="multipliedPrice">
            <xsl:value-of select="$priceWithoutMult*$multiplier"/>
        </xsl:variable>
        <xsl:choose>
            <xsl:when test="not($showCents)">
                <xsl:value-of select="round($multipliedPrice)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:call-template name="ignoreHalfEvenRounding">
                    <xsl:with-param name="fullNumber" select="$multipliedPrice"/>
                    <xsl:with-param name="safePrecision" select="$safePrecision"/>
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    
    <xsl:template name="BMI_determineDecimalSeparator">
        <xsl:param name="currencyFormat"/>
        <xsl:choose>
            <xsl:when test="$currencyFormat">
                <xsl:choose>
                    <xsl:when test="count($currencyFormat/decimal-format)&gt;0">
                        <xsl:value-of select="$currencyFormat/decimal-format/@decimal-separator"/>
                    </xsl:when>
                    <xsl:when test="$currencyFormat/@decimal-separator">
                        <xsl:value-of select="$currencyFormat/@decimal-separator"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'.'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="'.'"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    
    <xsl:template name="BMI_determineGroupingSeparator">
        <xsl:param name="currencyFormat"/>
        <xsl:choose>
            <xsl:when test="$currencyFormat">
                <xsl:choose>
                    <xsl:when test="count($currencyFormat/decimal-format)&gt;0">
                        <xsl:value-of select="$currencyFormat/decimal-format/@grouping-separator"/>
                    </xsl:when>
                    <xsl:when test="$currencyFormat/@grouping-separator">
                        <xsl:value-of select="$currencyFormat/@grouping-separator"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="','"/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="','"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    
    <xsl:template name="BMI_formatCurrencyValue">
        <xsl:param name="currencyFormat"/>
        <xsl:param name="showCents"/>
        <xsl:param name="safePrecision"/>
        <xsl:variable name="decimalSeparator">
            <xsl:call-template name="BMI_determineDecimalSeparator">
                <xsl:with-param name="currencyFormat" select="$currencyFormat"/>
            </xsl:call-template>
        </xsl:variable>
        <xsl:variable name="groupingSeparator">
            <xsl:call-template name="BMI_determineGroupingSeparator">
                <xsl:with-param name="currencyFormat" select="$currencyFormat"/>
            </xsl:call-template>
        </xsl:variable>
        <xsl:choose>                    
            <xsl:when test="$showCents and number($safePrecision) &gt; 0">
                <xsl:value-of disable-output-escaping="yes" select="concat('#', $groupingSeparator, '##0', $decimalSeparator, substring('00000000', 1, $safePrecision))"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of disable-output-escaping="yes" select="concat('#', $groupingSeparator, '##0')"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    
    <xsl:template name="BMI_addCurrencyLabel">
        <xsl:param name="currencyFormat"/>
        <xsl:param name="currency"/>
        <xsl:choose>
            <xsl:when test="$currencyFormat">
                <xsl:choose>
                    <xsl:when test="count($currencyFormat/font)&gt;0">
                        <span style="font-family: {$currencyFormat/font}">
                            <xsl:value-of select="$currencyFormat/label"/><xsl:if test="$currencyFormat/hasWhitespaceSeparator='true'">&#160;</xsl:if>
                        </span>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="$currencyFormat/label"/><xsl:if test="$currencyFormat/hasWhitespaceSeparator='true'">&#160;</xsl:if>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$currency"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    
    <xsl:template name="BMI_universalNumber">
        <xsl:param name="val"/>
        <xsl:param name="numFormat"/>
        <xsl:param name="formatForDisplay" select="''"/>
        <xsl:variable name="realNumber">
            <xsl:choose>
                <xsl:when test="$numFormat = 'EUR'">
                    <xsl:variable name="reverseSeperators" select="translate($val,',.','.,')"/>
                    <xsl:call-template name="BMI_replaceSubstring">
                        <xsl:with-param name="base_string" select="$reverseSeperators"/>
                        <xsl:with-param name="string_to_replace">,</xsl:with-param>
                        <xsl:with-param name="string_to_replace_with" select="''"/>
                    </xsl:call-template>
                </xsl:when>
                <xsl:when test="number($val) != 'NaN' ">
                    <xsl:value-of select="$val"/>
                </xsl:when>
                <xsl:otherwise>0</xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:choose>
            <xsl:when test="$formatForDisplay='USD'">
                <xsl:value-of select="format-number($realNumber,'#,##0.00','american')"/>
            </xsl:when>
            <xsl:when test="$formatForDisplay='EUR'">
                <xsl:value-of select="format-number($realNumber,'#.###,00','euro')"/>
            </xsl:when>
            <xsl:when test="$formatForDisplay='GBP'">
                <xsl:value-of select="format-number($realNumber,'#,##0.00','american')"/>
            </xsl:when>
            <xsl:when test="$formatForDisplay='CAD'">
                <xsl:value-of select="format-number($realNumber,'#,##0.00','american')"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$realNumber"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    
    <xsl:template name="BMI_replaceSubstring">
        <xsl:param name="base_string"/>
        <xsl:param name="string_to_replace"/>
        <xsl:param name="string_to_replace_with"/>
        <xsl:variable name="resultString" select="concat(substring-before($base_string,$string_to_replace),$string_to_replace_with,substring-after($base_string,$string_to_replace))"/>
        <xsl:choose>
            <xsl:when test="string-length($resultString) = string-length($string_to_replace_with)">
                <xsl:value-of select="$base_string"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:call-template name="BMI_replaceSubstring">
                    <xsl:with-param name="base_string" select="$resultString"/>
                    <xsl:with-param name="string_to_replace" select="$string_to_replace"/>
                    <xsl:with-param name="string_to_replace_with" select="$string_to_replace_with"/>
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="ignoreHalfEvenRounding">
        <xsl:param name="fullNumber"/>
        <xsl:param name="decimalSeparator" select="'.'"/>
        <xsl:param name="safePrecision" select="2"/>
        
        <xsl:variable name="decimalPrice" select="substring-after($fullNumber, $decimalSeparator)"/>
        
        <xsl:choose>
            <xsl:when test="number($safePrecision) &gt; 0 and number(substring($decimalPrice, (number($safePrecision)+1), 1)) &gt; 4">
                <xsl:variable name="precisionPlusOne" select="number($safePrecision) + 1"/>
                <xsl:variable name="decimalPlaceOffset" select="number(substring('10000000000000', 1, $precisionPlusOne))"/>
                <xsl:choose>
                    <xsl:when test="number($fullNumber) &gt; 0">
                        <xsl:value-of select="ceiling(number($fullNumber) * number($decimalPlaceOffset)) div number($decimalPlaceOffset)"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="floor(number($fullNumber) * number($decimalPlaceOffset)) div number($decimalPlaceOffset)"/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$fullNumber"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest1/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest2/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest3/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest4/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest5/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest6/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest7/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest8/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest9/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest10/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest11/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest12/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest13/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest14/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappincprod/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest15/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappinctest16/image/Output/jsonToXML.xsl"/> -->
<!-- <xsl:include xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" href="/bmfsweb/netappcpq/image/Output/jsonToXML.xsl"/> -->

<xsl:variable xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="AccountXml">
	<xsl:call-template name="convertJsonToXml">
		<xsl:with-param name="jsonStr" select="/transaction/data_xml/document/accountsJsonArray_t_c"/>
	</xsl:call-template>
</xsl:variable>

<xsl:variable xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="quoteCurrency" select="string($_dsMain1/currency_t)"/>
<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="netapp_formatPrice">
    <xsl:param name="price"/>
    <xsl:param name="basePrecision" select="2"/>
    <!-- meant to fix a few issues with the oracle standard currency library
        1. JPY Should always be 0 decimal places
        2. Indian rupees are formatted by java but there's an outstanding bug with helvetica where it renders over the number
    -->
    <xsl:variable name="precision">
        <xsl:choose>
        <xsl:when test="$quoteCurrency='JPY'">0</xsl:when>
        <xsl:otherwise><xsl:value-of select="$basePrecision"/></xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
        <xsl:variable name="formattedPriceVal">
    <xsl:call-template name="BMI_universalFormatPriceCustom">
        <xsl:with-param name="price" select="$price"/>
        <xsl:with-param name="currency" select="$quoteCurrency"/>
        <xsl:with-param name="showCurrencySymbol" select="-1"/>
        <xsl:with-param name="precision" select="$precision"/>
    </xsl:call-template>
    </xsl:variable>
        <xsl:choose>
        <xsl:when test="$quoteCurrency='INR'">
            <!--bug with helvetica/some browsers where it renders over number-->
            <xsl:value-of select="concat(substring-before($formattedPriceVal,''),substring-after($formattedPriceVal,''))"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$formattedPriceVal"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>


<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="addendumTotalPrint">
  <xsl:param name="label" select="''"/>
  <xsl:param name="sum" select="0"/>
  <xsl:param name="align" select="'right'"/>
  <div style="line-height: 12pt; text-align: {$align}">
    <span style="color: #000000; font-size: 12pt; font-family: Helvetica">
      <span style="font-size: 8pt; font-family: helvetica">
        <span style="font-weight: bold"><xsl:value-of select="$label"/></span>
        <xsl:call-template name="netapp_formatPrice">
        <xsl:with-param name="price" select="number( translate($sum, ',', '.') )"/>
      </xsl:call-template>
      </span>
    </span>
  </div>
</xsl:template>

<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="currencyFormattedPrice">
  <xsl:param name="price"/>
  <xsl:param name="align" select="'right'"/>
  <xsl:param name="fontSize" select="'12pt'"/>
  <xsl:param name="fontWeight" select="'bold'"/>
  <div style="line-height: 12pt; text-align: {$align}">
    <span style="color: #000000; font-size: 12pt; font-family: Helvetica">
      <span style="font-size: {$fontSize}; font-weight: {$fontWeight}; font-family: helvetica">
        <xsl:call-template name="netapp_formatPrice">
        <xsl:with-param name="price" select="number($price)"/>
      </xsl:call-template>
      </span>
    </span>
  </div>
</xsl:template>


<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="formatFloatPercent">
    <xsl:param name="val"/>
    <xsl:param name="zeroDisplay" select="false()"/>
    <xsl:param name="formatDisplay" select="true()"/>
    <xsl:variable name="formatForDisplay">
        <xsl:choose>
            <xsl:when test="not($formatDisplay)">
                <xsl:value-of select="''"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$quoteCurrency"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <xsl:choose>
        <xsl:when test="($val='') and not($zeroDisplay)">
            <xsl:value-of select="''"/>
        </xsl:when>
        <xsl:when test="($val=0)">
            <xsl:value-of select="'0.00'"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:choose>
                <xsl:when test="$formatForDisplay='USD'">
                    <xsl:value-of select="concat(format-number($val,'#,##0.##','american'), '%')"/>
                </xsl:when>
                <!--xsl:when test="$formatForDisplay='EUR'">
                    <xsl:value-of select="concat(format-number($val,'#.###,##','euro'), '%')" />
                </xsl:when-->
                <xsl:when test="$formatForDisplay='GBP'">
                    <xsl:value-of select="concat(format-number($val,'#,##0.##','american'), '%')"/>
                </xsl:when>
                <xsl:when test="$formatForDisplay='CAD'">
                    <xsl:value-of select="concat(format-number($val,'#,##0.##','american'), '%')"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="concat(format-number($val,'0.##'), '%')"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>


<!-- This will print all elements-->
<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="summaryPrintListALL">
	<xsl:param name="label" select="''"/>
	<xsl:param name="list"/>
	<div>
		<div style="line-height: 12pt; text-align: left">
			<span style="color: #000000; font-size: 12pt; font-family: Helvetica">
				<span style="font-size: 8pt; font-family: helvetica">
					<span style="font-weight: bold">
						<xsl:value-of select="$label"/>
					</span>
					<xsl:if test="count($list)&gt;0">
						<xsl:for-each select="$list">
							<xsl:choose>
								<xsl:when test="position() != last()">
									<xsl:value-of select="concat(., ', ')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:value-of select="."/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:for-each>
					</xsl:if>
				</span>
			</span>
		</div>
	</div>
</xsl:template>

<!-- This will only print elements that are unique -->
<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="summaryPrintList">
	<xsl:param name="label" select="''"/>
	<xsl:param name="list"/>
	<xsl:variable name="uniqueList">
	    <xsl:for-each select="$list">
	    <xsl:copy-of select="."/>
	    </xsl:for-each>
	</xsl:variable>
	<div>
		<div style="line-height: 12pt; text-align: left">
			<span style="color: #000000; font-size: 12pt; font-family: Helvetica">
				<span style="font-size: 8pt; font-family: helvetica">
					<span style="font-weight: bold">
						<xsl:value-of select="$label"/>
					</span>
					<xsl:if test="count($list)&gt;0">
						<xsl:for-each select="exsl:node-set($uniqueList)/*[not(. = preceding-sibling::*)]">
							<xsl:choose>
								<xsl:when test="position() != last()">
									<xsl:value-of select="concat(., ', ')"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:value-of select="."/>
								</xsl:otherwise>
							</xsl:choose>
						</xsl:for-each>
					</xsl:if>
				</span>
			</span>
		</div>
	</div>
</xsl:template>

<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="printSumNumeric">
  <xsl:param name="label" select="''"/>
  <xsl:param name="prefix" select="''"/>
  <xsl:param name="suffix" select="''"/>
  <xsl:param name="sum" select="0"/>
  <xsl:param name="align" select="'left'"/>
  <div style="line-height: 12pt; text-align: {align}">
    <span style="color: #000000; font-size: 12pt; font-family: Helvetica">
      <span style="font-size: 8pt; font-family: helvetica">
        <span style="font-weight: bold"><xsl:value-of select="$label"/></span>
        <span><xsl:value-of select="concat($prefix, string($sum),$suffix)"/></span>
      </span>
    </span>
  </div>
</xsl:template>



<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="sumDriveCapacity">
    <xsl:param name="total" select="0"/>
    <xsl:param name="rows"/>
    <xsl:param name="counter" select="1"/>
    <xsl:param name="rowCount" select="count($rows)"/>
    <xsl:choose>
        <xsl:when test="$counter &lt;=$rowCount">
            
           <!--xsl:variable name="rowVal" select="((number($rows[position() = $counter]/item_l/_part_custom_field288) * number($rows[position() = $counter]/item_l/_part_custom_field289)) div 1000) * number($rows[position() = $counter]/price/_price_quantity)"/-->
           <xsl:variable name="rowVal" select="((number($rows[position() = $counter]/item_l/_part_custom_field288) * number($rows[position() = $counter]/item_l/_part_custom_field289)) div 1000) * number($rows[position() = $counter]/extendedQuantity_l_c)"/>
         <!--((DriveCapacity * NumberofDrives)/1000)* qty-->
            <xsl:call-template name="sumDriveCapacity">
                <!--xsl:with-param name="total" select="$total+$rowVal" -->
                <xsl:with-param name="total" select="format-number($total+$rowVal,'0.##')"/>
                <xsl:with-param name="counter" select="$counter+1"/>
                <xsl:with-param name="rows" select="$rows"/>
                <xsl:with-param name="rowCount" select="$rowCount"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$total"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="discountFormattedPrint">
  <xsl:param name="label" select="''"/>
  <xsl:param name="discPct" select="0"/>
  <xsl:param name="fontSize" select="'12pt'"/>
  <xsl:param name="fontWeight" select="'bold'"/>
  <xsl:param name="align" select="'center'"/>
  <div style="line-height: 12pt; text-align: {$align}">
    <span style="color: #000000; font-size: 12pt; font-family: Helvetica">
      <span style="font-size: {$fontSize}; font-weight: {$fontWeight}; font-family: helvetica">
        <span style="font-weight: bold"><xsl:value-of select="$label"/></span>
		<xsl:call-template name="BMI_formatFloat">
			<xsl:with-param name="val" select="$discPct"/>
			<xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/>
			<xsl:with-param name="precision" select="2"/>
		</xsl:call-template>
      </span>
    </span>
  </div>
</xsl:template>

<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="NewcurrencyFormattedPrice">
  <xsl:param name="price"/>
  <xsl:param name="align" select="'right'"/>
  <xsl:param name="fontSize" select="'12pt'"/>
  <xsl:param name="fontWeight" select="'bold'"/>
  <xsl:param name="precision"/>
  <div style="line-height: 12pt; text-align: {$align}">
    <span style="color: #000000; font-size: 12pt; font-family: Helvetica">
      <span style="font-size: {$fontSize}; font-weight: {$fontWeight}; font-family: helvetica">
        <xsl:call-template name="netapp_formatPrice">
        <xsl:with-param name="price" select="number($price)"/>
        <!--xsl:with-param name="precision" select="number($precision)"/-->
        <xsl:with-param name="basePrecision" select="'4'"/>
      </xsl:call-template>
      </span>
    </span>
  </div>
</xsl:template>

<xsl:variable xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:DateUtil="com.bm.xchange.util.DateUtil" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:HeadingUtil="com.bm.xchange.services.templateengine.headingstyle.TeHeadingStyleUtil" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" xmlns:PrintUtil="com.bm.xchange.services.templateengine.utils.TePrintUtil" xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:FunctionUtil="com.bm.xchange.services.templateengine.utils.TeFunctionUtil" xmlns:exsl="http://exslt.org/common" name="printDateFormat" select="'dd-MMM-yyyy'"/>

<xsl:variable name="_dsMain1" select="/transaction/data_xml/document[@document_var_name='transaction']"/><xsl:variable name="_dsUser" select="/transaction/bm_user"/><xsl:strip-space elements="*"/><xsl:template match="/"><div><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot;,&quot;NUMBER&quot;,&quot;BEFORE&quot;,0,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_f727096d-aaaf-40ce-9d65-14cf66932574&quot;,&quot;NUMBER&quot;,&quot;BEFORE&quot;,1,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_45ae6e43-8001-4267-a575-7a92b166da08&quot;,&quot;NUMBER&quot;,&quot;BEFORE&quot;,2,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_d4612ad8-81ba-4a93-bc62-daa580f47da4&quot;,&quot;NUMBER&quot;,&quot;BEFORE&quot;,3,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_995c0865-66af-401b-b338-ec2411a3682a&quot;,&quot;NUMBER&quot;,&quot;BEFORE&quot;,4,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_6d387003-078a-4ee8-ac0c-6997d5587d51&quot;,&quot;NUMBER&quot;,&quot;BEFORE&quot;,5,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_fd9c0298-5c8f-4861-8cc6-176292b8cb4f&quot;,&quot;NUMBER&quot;,&quot;NONE&quot;,6,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_00b9a3ee-0dad-4dff-83a2-e6ba7057beaa&quot;,&quot;NUMBER&quot;,&quot;NONE&quot;,7,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_c5b701b3-40ac-4e73-bac1-242fa7c435bd&quot;,&quot;NUMBER&quot;,&quot;NONE&quot;,8,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_b191e87d-e8b3-40f0-a3a8-5c954847dcda&quot;,&quot;NUMBER&quot;,&quot;NONE&quot;,9,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd><cpqHeadingStyleAdd><xsl:value-of select="HeadingUtil:addHeadingStyle($TRANSACTION_ID, $PRINT_TIME, $PRINT_CODE, $TEMPLATE_ID,&quot;HEADINGSTYLE_584d75d1-b590-49f1-a953-a225358d87ec&quot;,&quot;NUMBER&quot;,&quot;NONE&quot;,10,&quot;HEADINGSTYLE_53d31c2a-2940-4f76-a93e-814e827c7ea3&quot; )"/></cpqHeadingStyleAdd>
<tocStyleData>

</tocStyleData><fo:bookmark-tree>



</fo:bookmark-tree><fo:static-content flow-name="xsl-region-before"><div xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions"><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="400.0px"/><table-column column-width="100.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/companyLogoURLForPrint_t_c = ''"><rte><div><xsl:apply-templates select="$_dsMain1/companyPrintlogo_t_c"/></div></rte></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/companyLogoURLForPrint_t_c!=''"><div><!-- width = size of viewpoint
content-width = size of img inside -->
<fo:external-graphic width="200px" height="0.7in" content-width="scale-to-fit" content-height="scale-to-fit" scaling="uniform" src="{$_dsMain1/companyLogoURLForPrint_t_c}"/>
</div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 30pt; text-align: center"><span style="color: #000000; font-size: 20pt; font-family: Helvetica"><span style="font-weight: bold">Solution Quotation<xsl:choose><xsl:when test="$_dsMain1/quoteNumber_t_c/@display_value"><xsl:value-of select="$_dsMain1/quoteNumber_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/quoteNumber_t_c"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></tbody></table></div></fo:static-content><fo:static-content flow-name="xsl-region-after"><div xmlns:xfc="http://www.xmlmind.com/foconverter/xsl/extensions" xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions"><div style="line-height: 10pt; text-align: center"><span style="font-size: 10pt"><span style="font-weight: bold"><span style="color: black; font-family: helvetica" line-height="107%">All amounts are in<xsl:choose><xsl:when test="$_dsMain1/currency_t/@display_value"><xsl:value-of select="$_dsMain1/currency_t/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/currency_t"/></xsl:otherwise></xsl:choose></span></span></span></div><div text-align-last="justify"><fo:leader rule-thickness="0.5pt" leader-pattern="rule" xfc:tab-position="-2pt" xfc:tab-align="right"/></div><div style="line-height: 8pt; text-align: left"><span style="font-size: 8pt; font-family: helvetica">   Price List:<xsl:choose><xsl:when test="$_dsMain1/priceList_t_c/@display_value"><xsl:value-of select="$_dsMain1/priceList_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/priceList_t_c"/></xsl:otherwise></xsl:choose>                        Date Printed:<xsl:value-of select="PrintUtil:convertDBToPattern( $_dsMain1/quoteExportDate_t_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'quoteExportDate_t_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>                                    Page:<fo:page-number/>of<fo:page-number-citation-last ref-id="lastSectionId"/></span></div></div></fo:static-content><div-container clip="rect(0,0,-4pt,0)"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true" keep-together.within-page="1"><table-column column-width="200.0px"/><table-column column-width="250.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="color: black; font-size: 8pt; font-family: helvetica" line-height="107%">Quote Name:</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"> <xsl:choose><xsl:when test="$_dsMain1/quoteNameTextArea_t_c/@display_value"><xsl:value-of select="$_dsMain1/quoteNameTextArea_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/quoteNameTextArea_t_c"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Quote Date:</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsMain1/quoteExportDate_t_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'quoteExportDate_t_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Quote Valid Until:</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsMain1/expiresOnDate_t_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'expiresOnDate_t_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Contact Name:</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/salesRep_t_c/@display_value"><xsl:value-of select="$_dsMain1/salesRep_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/salesRep_t_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Email:</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/opportunityOwnerEmail_t_c/@display_value"><xsl:value-of select="$_dsMain1/opportunityOwnerEmail_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/opportunityOwnerEmail_t_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span background-style="color: #ffffff; font-size: 8pt; font-family: helvetica">Quote To:</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="($_dsMain1/sellingMotion_t_c = 'NetApp to Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to Master Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to End Customer' or $_dsMain1/sellingMotion_t_c = '' or $_dsMain1/sellingMotion_t_c = 'NetApp to Reseller') and $_dsMain1/orderType_t_c = 'Standard'"><div>
<xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Sold To'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Reseller'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/sellingMotion_t_c = 'Reseller to End Customer' and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
					<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
						<xsl:if test="./object[@name='type'] = 'End Customer'">
							<xsl:value-of select="./object[@name='name']"/>
							<xsl:value-of select="', '"/>
							<xsl:value-of select="./object[@name='address1']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='city']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='state']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='country']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='zipCode']"/>
						</xsl:if>
					</div>			
		</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor' or $_dsMain1/sellingMotion_t_c = 'Reseller to End Customer') and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
					<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
						<xsl:if test="./object[@name='type'] = 'Distributor'">
							<xsl:value-of select="./object[@name='name']"/>
							<xsl:value-of select="', '"/>
							<xsl:value-of select="./object[@name='address1']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='city']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='state']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='country']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='zipCode']"/>
						</xsl:if>
					</div>			
		</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/orderType_t_c!='Standard'"><div>
<xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Sold To'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="font-size: 8pt">Quote From:</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/sellingMotion_t_c = 'NetApp to End Customer' or $_dsMain1/sellingMotion_t_c = 'NetApp to Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to Master Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to Reseller' or $_dsMain1/sellingMotion_t_c = '' or $_dsMain1/orderType_t_c!='Standard'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"> <xsl:choose><xsl:when test="$_dsMain1/legalEntities_t_c/@display_value"><xsl:value-of select="$_dsMain1/legalEntities_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/legalEntities_t_c"/></xsl:otherwise></xsl:choose>,<xsl:choose><xsl:when test="$_dsMain1/legalEntityAddress_t_c/@display_value"><xsl:value-of select="$_dsMain1/legalEntityAddress_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/legalEntityAddress_t_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor' or ($_dsMain1/sellingMotion_t_c = 'Reseller to End Customer' and $_dsMain1/opportunityPathway_t_c = 'Reseller through NetApp')) and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Sold To'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsMain1/sellingMotion_t_c = 'Reseller to End Customer' and $_dsMain1/opportunityPathway_t_c = 'Reseller through Distributor') and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Reseller'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/keyStone_t_c!='Yes'"><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">End Customer:</span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/keyStone_t_c = 'Yes'"><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">End User:</span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'End Customer'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Quote Status:</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 8pt"> <xsl:choose><xsl:when test="$_dsMain1/quoteStatus_t_c/@display_value"><xsl:value-of select="$_dsMain1/quoteStatus_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/quoteStatus_t_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/fulfillmentMethod_t_c!=''"><div><div style="line-height: 12pt; text-align: right"><span style="font-size: 8pt"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Fulfilment Method:</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/fulfillmentMethod_t_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><xsl:choose><xsl:when test="$_dsMain1/fulfillmentMethod_t_c/@display_value"><xsl:value-of select="$_dsMain1/fulfillmentMethod_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/fulfillmentMethod_t_c"/></xsl:otherwise></xsl:choose> </span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsMain1/commentHistoryString_t_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Comments:</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/commentHistoryString_t_c/@display_value"><xsl:value-of select="$_dsMain1/commentHistoryString_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/commentHistoryString_t_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:for-each select="/transaction/data_xml/document[@document_number='1']/_commerce_array_set_attr_info[@setName='discountSummary_Array_t_c']/_array_set_row"><xsl:sort select="./@_row_number" data-type="number" order="ascending"/><xsl:variable name="_dsTxnArray" select="."/><xsl:choose><xsl:when test="$_dsTxnArray/attribute[@var_name='discountType_discountSummary_Array_t_c'] = 'Promotional Discount' or $_dsMain1/storageEfficiencyGuarantee_t_c='true'"><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Promotion Message:</span></span></div></div></xsl:when></xsl:choose></xsl:for-each></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/storageEfficiencyGuarantee_t_c='true'"><div><div style="line-height: 9.2pt; text-align: justify"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span background-style="color: #ffffff; font-family: helvetica">To qualify for the Efficiency Guarantee, you need to nominate your opportunity in SFDC. Checking the Storage Efficiency Guarantee box does not nominate your opportunity for the efficiency guarantee, and the nomination for the Efficiency Guarantee must be approved by the program office. In addition, the Efficiency Guarantee terms and conditions must be sent to the customer prior to the corresponding purchase order being placed. If the terms and conditions are not sent to the customer prior to the order being booked, the nomination will be disqualified from the Efficiency Guarantee Program and this will be considered a booking violation.</span></span></span></div></div></xsl:when></xsl:choose><xsl:for-each select="/transaction/data_xml/document[@document_number='1']/_commerce_array_set_attr_info[@setName='promo_Array_t_c']/_array_set_row"><xsl:sort select="./@_row_number" data-type="number" order="ascending"/><xsl:variable name="_dsTxnArray" select="."/><xsl:choose><xsl:when test="$_dsTxnArray/attribute[@var_name='promoDescription_promo_Array_t_c']!='' and $_dsTxnArray/attribute[@var_name='promotionValue_promo_Array_t_c']!='0.0'"><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsTxnArray/attribute[@var_name='promoDescription_promo_Array_t_c']/@display_value"><xsl:value-of select="$_dsTxnArray/attribute[@var_name='promoDescription_promo_Array_t_c']/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsTxnArray/attribute[@var_name='promoDescription_promo_Array_t_c']"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></xsl:for-each></div></fo:block-container></td></tr></tbody></table></div><xsl:choose><xsl:when test="$_dsMain1/serviceRenewal_t_c!=''"><xsl:variable name="SESRenewalsLines" select="exsl:node-set(/transaction/data_xml/document[(normalize-space(./@data_type)='2') and ./model_l/_model_name = 'Renewal Products'])"/>
<xsl:for-each select="$SESRenewalsLines">
	<xsl:variable name="_dsSub1" select="."/>
	<xsl:if test="position()=1">
		<xsl:variable name="hasSESRenewalsLines" select="boolean(count($SESRenewalsLines) &gt; 0)"/>
	<div space-after="0.1in" space-after.precedence="force"/><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica">SupportEdge Renewals Pricing Summary</span></span></div></div><div space-after="0.1in" space-after.precedence="force"/><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><xsl:variable name="COLUMN97146a5d-d8d0-43a1-9c13-84344296d864"><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">true</xsl:when></xsl:choose></xsl:variable><xsl:variable name="COLUMN70f9dcc8-13e3-468a-ab57-a5ea0d9c03b7"><xsl:variable name="cond47262836"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262836)=1">true</xsl:when></xsl:choose></xsl:variable><table-column column-width="350.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><xsl:if test="$COLUMN97146a5d-d8d0-43a1-9c13-84344296d864='true'"><table-column column-width="200.0px"/></xsl:if><xsl:if test="$COLUMN70f9dcc8-13e3-468a-ab57-a5ea0d9c03b7='true'"><table-column column-width="200.0px"/></xsl:if><table-body><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica"><span background-style="color: #ffffff; color: rgba(0, 0, 0, 0.9); font-family: Helvetica" text-align="start">Serial Number / Quote Linkage</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Service Period Duration</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Service Period Start Date</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Service Period End Date</span></span></span></div></div></div></fo:block-container></td><xsl:choose><xsl:when test="$COLUMN97146a5d-d8d0-43a1-9c13-84344296d864='true'"><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-weight: bold">Ext. List Price</span></span></div></div></div></fo:block-container></td></xsl:when></xsl:choose><xsl:choose><xsl:when test="$COLUMN70f9dcc8-13e3-468a-ab57-a5ea0d9c03b7='true'"><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-weight: bold">Ext. Net Price</span></span></div></div></div></fo:block-container></td></xsl:when></xsl:choose></tr><!--xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3']"><xsl:sort select="./_document_number" data-type="text"  order="ascending"  />
<xsl:variable name="_dsSub1" select="."/>
<xsl:choose><xsl:when test="$_dsSub1/renewalIndicator_l_c = &#39;Y&#39; and $_dsSub1/lineType_l = &#39;MODEL&#39;">

 <tr >

<td   style="border-top:1px solid #000000;padding:4px 0px;border-right:1px solid #000000;border-left:1px solid #000000;border-bottom:1px solid #000000;" >
 <component type="CELL" varname="CELLd7f527c9-35e4-4503-a972-6362ba71df72" /> 
</td>

<td   style="border-top:1px solid #000000;padding:4px 0px;border-right:1px solid #000000;border-left:1px solid #000000;border-bottom:1px solid #000000;" >
 <component type="CELL" varname="CELL94651c2d-93b9-4b00-ab16-3a9d58c84fc4" /> 
</td>

<td   style="border-top:1px solid #000000;padding:4px 0px;border-right:1px solid #000000;border-left:1px solid #000000;border-bottom:1px solid #000000;" >
 <component type="CELL" varname="CELL2effa523-04ae-40aa-989f-16e8bd0f1575" /> 
</td>

<td   style="border-top:1px solid #000000;padding:4px 0px;border-right:1px solid #000000;border-left:1px solid #000000;border-bottom:1px solid #000000;" >
 <component type="CELL" varname="CELL7af91de5-a704-4380-9891-fd3b9a6436cb" /> 
</td>
<xsl:choose><xsl:when test="$COLUMN97146a5d-d8d0-43a1-9c13-84344296d864='true'">
<td   style="border-top:1px solid #000000;padding:4px 0px;border-right:1px solid #000000;border-left:1px solid #000000;border-bottom:1px solid #000000;" >
 <component type="CELL" varname="CELL942b509e-c9b9-4c80-a3cc-01f478513b36" /> 
</td>
</xsl:when></xsl:choose><xsl:choose><xsl:when test="$COLUMN70f9dcc8-13e3-468a-ab57-a5ea0d9c03b7='true'">
<td   style="border-top:1px solid #000000;padding:4px 0px;border-right:1px solid #000000;border-left:1px solid #000000;border-bottom:1px solid #000000;" >
 <component type="CELL" varname="CELL479fbb4b-9a88-4815-bba1-cd4c8f51f99c" /> 
</td>
</xsl:when></xsl:choose>
</tr> </xsl:when></xsl:choose>
</xsl:for-each-><!- xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3' and ./renewalIndicator_l_c = &#39;Y&#39; and ./lineType_l = &#39;MODEL&#39;]"-><!- Added for printing only SES syetem lines--><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3' and ./renewalIndicator_l_c = 'Y' and ./lineType_l = 'MODEL' and ./item_l/_part_number = 'SES-SYSTEM']"><xsl:variable name="_dsSub1" select="."/><xsl:variable name="lineItemNumber" select="$_dsSub1/lineItemNumber_l_c"/><xsl:variable name="ChildLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and  modelReferenceLineID_l_c = $lineItemNumber and lineType_l = 'SERVICE'])"/><xsl:variable name="ServiceStartDate"><xsl:value-of select="$ChildLines/serviceStartDate_l_c"/></xsl:variable><xsl:variable name="ServiceEndDate"><xsl:value-of select="$ChildLines/serviceEndDate_l_c"/></xsl:variable><xsl:variable name="ServiceDuration"><xsl:value-of select="$ChildLines/serviceDuration_l_c"/></xsl:variable><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''"><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c/@display_value"><xsl:value-of select="$_dsSub1/serialNumber_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/serialNumber_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><xsl:for-each select="./_commerce_array_set_attr_info[@setName='serialNumber_Array_l_c']/_array_set_row"><xsl:sort select="./@_row_number" data-type="number" order="ascending"/><xsl:variable name="_dsTxnArray" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 5pt; text-align: right; font-size: 8pt">
<xsl:if test="$_dsTxnArray/attribute[@var_name='serialNumber_serialNumber_Array_l_c']!='' or $_dsTxnArray/attribute[@var_name='serialNumber_serialNumber_Array_l_c']!=null">
    <xsl:value-of select="$_dsTxnArray/attribute[@var_name='serialNumber_serialNumber_Array_l_c']"/>
</xsl:if>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 5pt; text-align: left; font-size: 8pt">
<xsl:if test="$_dsTxnArray/attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!='' or $_dsTxnArray/attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!=null">
    <xsl:value-of select="concat(',  ',$_dsTxnArray/attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c'])"/>
</xsl:if>
</div></div></div></fo:block-container></td></tr></xsl:for-each></tbody></table></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><!--fo:block text-align = "center" font-size="8pt" font-family="Helvetica">  
<xsl:value-of select="$ServiceDuration" />
    <xsl:choose>
        <xsl:when test="$ServiceDuration = &#39;1&#39;">
            <xsl:value-of select="' Month'" />
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="' Months'" />   
        </xsl:otherwise>
</xsl:choose>
</fo:block-->
<div style="text-align: center; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$ServiceDuration&gt;'0'">
        <xsl:value-of select="$ServiceDuration"/>
    	<xsl:choose>
			<xsl:when test="$ServiceDuration = '1'">
				<xsl:value-of select="' Month'"/>
			</xsl:when>
			<xsl:otherwise>        
				<xsl:value-of select="' Months'"/>   
			</xsl:otherwise>
		</xsl:choose>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="$_dsSub1/serviceDuration_l_c"/>
		<xsl:choose>
			<xsl:when test="$_dsSub1/serviceDuration_l_c = '1'">
				<xsl:value-of select="' Month'"/>
			</xsl:when>
			<xsl:otherwise>        
				<xsl:value-of select="' Months'"/>   
			</xsl:otherwise>
		</xsl:choose>
	</xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><!--fo:block text-align = "center" font-size="8pt" font-family="Helvetica">  
    <xsl:value-of select="PrintUtil:convertDBToPattern( $ServiceStartDate , 'dd-MMM-yyyy', $TIME_ZONE, 'serviceStartDate_l_c','ucpqStandardCommerceProcess', $PRINT_CODE )" />
</fo:block-->

<div style="text-align: center; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$ServiceDuration&gt;'0'">
        <xsl:value-of select="PrintUtil:convertDBToPattern( $ServiceStartDate , 'dd-MMM-yyyy', $TIME_ZONE, 'serviceStartDate_l_c','ucpqStandardCommerceProcess', $PRINT_CODE )"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="PrintUtil:convertDBToPattern(serviceStartDate_l_c , 'dd-MMM-yyyy', $TIME_ZONE, 'serviceStartDate_l_c','ucpqStandardCommerceProcess', $PRINT_CODE )"/>
	</xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><!--fo:block text-align = "center" font-size="8pt" font-family="Helvetica">  
    <xsl:value-of select="PrintUtil:convertDBToPattern( $ServiceEndDate, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )" />
</fo:block-->
<div style="text-align: center; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$ServiceDuration&gt;'0'">
        <xsl:value-of select="PrintUtil:convertDBToPattern( $ServiceEndDate , 'dd-MMM-yyyy', $TIME_ZONE, 'serviceEndDate_l_c','ucpqStandardCommerceProcess', $PRINT_CODE )"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="PrintUtil:convertDBToPattern( serviceEndDate_l_c , 'dd-MMM-yyyy', $TIME_ZONE, 'serviceEndDate_l_c','ucpqStandardCommerceProcess', $PRINT_CODE )"/>
	</xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><xsl:choose><xsl:when test="$COLUMN97146a5d-d8d0-43a1-9c13-84344296d864='true'"><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="extendedListPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></div></fo:block-container></td></xsl:when></xsl:choose><xsl:choose><xsl:when test="$COLUMN70f9dcc8-13e3-468a-ab57-a5ea0d9c03b7='true'"><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-right="1px solid #000000" border-left="1px solid #000000" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></div></fo:block-container></td></xsl:when></xsl:choose></tr></xsl:for-each></tbody></table></div><div space-after="0.1in" space-after.precedence="force"/><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c!='noPricing'"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="300.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold">Renewals Grand Total:</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:variable name="RenewalTotalCalculation" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and lineType_l = 'MODEL' and renewalIndicator_l_c = 'Y' and ./item_l/_part_number = 'SES-SYSTEM' ])"/>
<xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($RenewalTotalCalculation/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($RenewalTotalCalculation/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($RenewalTotalCalculation/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'12pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
</xsl:call-template></div></div></fo:block-container></td></tr></tbody></table></div></xsl:when></xsl:choose><div space-after="0.1in" space-after.precedence="force"/>
    </xsl:if>
</xsl:for-each></xsl:when></xsl:choose><xsl:variable name="cond47262981"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><!--xsl:choose>
    <xsl:when test="//configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']='true'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose-->
<xsl:choose>
    <xsl:when test="//simplifiedPrinting_l_c='true'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262981)=1"><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='2' and renewalIndicator_l_c!='Y' and $_dsMain1/keyStone_t_c!='Yes' and (_parent_doc_number = '' or cPQVirtualPart_l_c = 'ROOT' or cPQVirtualPart_l_c='SUBROOT')]">
<!--condition mentioned for Subroot logic for cluster earlier
/transaction/data_xml/document[normalize-space(./@data_type)='2' and renewalIndicator_l_c!=&#39;Y&#39; and $_dsMain1/keyStone_t_c!=&#39;Yes&#39; and _parent_doc_number = &#39;&#39; 
" /transaction/data_xml/document[normalize-space(./@data_type)='2' and renewalIndicator_l_c!=&#39;Y&#39; and $_dsMain1/keyStone_t_c!=&#39;Yes&#39; and (($_dsSub1/_parent_doc_number = &#39;&#39; and  $_dsSub1/cPQVirtualPart_l_c != &#39;ROOT&#39;) or ($_dsSub1/cPQVirtualPart_l_c = &#39;SUBROOT&#39;))">-->
<xsl:sort select="./@_document_number" order="ascending"/>
<xsl:variable name="_dsSub1" select="."/>
<!--shansen unnecessary conditioning
<xsl:choose><xsl:when test="($_dsSub1/_parent_doc_number = &#39;&#39; and  $_dsSub1/cPQVirtualPart_l_c != &#39;ROOT&#39;) or ($_dsSub1/cPQVirtualPart_l_c = &#39;SUBROOT&#39;)">-->
<!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content -->
<xsl:variable name="proposalLoopDocNumber" select="./_document_number"/>
<xsl:variable name="proposalLoopGsNumber" select="./_group_sequence_number"/>
<xsl:variable name="parentLoopDocNumber" select="./_parent_doc_number"/>
<xsl:variable name="parentConfigName" select="./virtualConfigName_l_c"/>
<xsl:variable name="installedat" select="concat(./installedAtAddress_l_c,' ',./installedAtStateProvince_l_c,' ',./installedAtCountry_l_c,' ', ./installedAtPostalCode_l_c)"/>
<!--xsl:variable name="SimplifiedFlag">
			<xsl:choose>
				<xsl:when test="./configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']/@display_value">
					<xsl:value-of select="./configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']/@display_value"/>
				</xsl:when>
				<xsl:otherwise>
					<xsl:value-of select="./configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']"/>
				</xsl:otherwise>
			</xsl:choose>
</xsl:variable-->
<xsl:variable name="SimplifiedFlag">
			<xsl:choose>
				<xsl:when test="cPQVirtualPart_l_c='SUBROOT'">
					<xsl:value-of select="/transaction/data_xml/document[_document_number = $parentLoopDocNumber]/simplifiedPrinting_l_c"/>
				</xsl:when>
				<xsl:otherwise>
					<xsl:value-of select="./simplifiedPrinting_l_c"/>
				</xsl:otherwise>
			</xsl:choose>
</xsl:variable>
<!--xsl:variable name="SimplifiedFlag" select="./simplifiedPrinting_l_c"/-->
<xsl:variable name="AutoRenew" select="./autoRenew_l_c"/>
<xsl:variable name="BillingFrequency" select="./billingFrequency_l_c"/>
<xsl:variable name="SelectedTech" select="./selectedTechnologies_l_c"/>
<xsl:variable name="smplines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and _parent_doc_number = $proposalLoopDocNumber and oRCL_ABO_ActionCode_l! = 'DELETE' and downstreamFulfillment_l_c = 'SMP' ])"/>
<xsl:variable name="serviceDuration"><xsl:value-of select="$smplines/serviceDuration_l_c"/></xsl:variable>
<!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content -->
<xsl:variable name="cond47262834"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$SimplifiedFlag != 'false' or $_dsSub1/downstreamFulfillment_l_c = 'SMP'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262834)=1"><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 12pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="FunctionUtil:startswith($parentConfigName,'Config#')">
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <!--xsl:value-of select="concat('Config # ',$parentConfigName)" /-->
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Configuration Comments:<xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><div space-after="0.1in" space-after.precedence="force"/><xsl:variable name="cond47263318"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263318)=1"><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3' and _parent_doc_number = $proposalLoopDocNumber and downstreamFulfillment_l_c != 'SMP' and not(FunctionUtil:endswith(item_l/_part_number,'-EXP'))]"><!--<xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber or _parent_doc_number = $parentLoopDocNumber) and downstreamFulfillment_l_c != 'SMP' and not(FunctionUtil:endswith(item_l/_part_number,'-EXP'))]">--><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!--<xsl:choose> shansen - no need to check this after looping
        <xsl:when test="($_dsSub1/_parent_doc_number = $proposalLoopDocNumber or $_dsSub1/_parent_doc_number = $parentLoopDocNumber)">-><!-  CONTENT_REPLACE_TOKEN tag will be replaced by Component Content -><!-  the expansion is always after its associated group--><xsl:variable name="modelLoopDocNumber" select="./_document_number"/><xsl:variable name="modelLoopGSNumber" select="./_group_sequence_number"/><xsl:variable name="lineNumber" select="./lineItemNumber_l_c"/><xsl:variable name="bom_level" select="./_line_bom_level"/><xsl:variable name="top_model_name" select="./topModel_l_c"/><xsl:variable name="part_name" select="./item_l/_part_number"/><xsl:variable name="serviceReferenceLineID" select="./serviceReferenceLineID_l_c"/><xsl:variable name="coveredItem" select="./coveredItem_l_c"/><xsl:variable name="virtualLineID" select="./virtualLineID_l_c"/><xsl:variable name="groupSeqArray"><xsl:call-template name="splitTextIntoElementList"><xsl:with-param name="remaining" select="$modelLoopGSNumber"/><xsl:with-param name="wrdBrk" select="'.'"/></xsl:call-template></xsl:variable><xsl:variable name="nextGSNum"><xsl:for-each select="exsl:node-set($groupSeqArray)/Node"><xsl:choose><xsl:when test="position() != last()"><xsl:value-of select="concat(.,'.')"/></xsl:when><xsl:otherwise><xsl:value-of select="number(.)+1"/></xsl:otherwise></xsl:choose></xsl:for-each></xsl:variable><xsl:variable name="expansionSibling" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber or _parent_doc_number = $parentLoopDocNumber) and _group_sequence_number=$nextGSNum and downstreamFulfillment_l_c != 'SMP' and FunctionUtil:endswith(item_l/_part_number,'-EXP')])"/><xsl:variable name="expansionLineNum"><xsl:choose><xsl:when test="count($expansionSibling) &gt; 0"><xsl:value-of select="$expansionSibling/lineItemNumber_l_c"/></xsl:when><xsl:otherwise><xsl:value-of select="-1"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="allSubLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level)) and lineType_l != 'MODEL'])"/><xsl:variable name="hardwareLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM' or printGrouping_l_c = 'STORAGE' or printGrouping_l_c = 'Hardware')]"/><xsl:variable name="hasHardwareLines" select="boolean(count($hardwareLines) &gt; 0)"/><xsl:variable name="SoftwareLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD'  and ( summaryPrintGrouping_l_c = 'Software') and summaryPrint_l_c = 'Y'])"/><xsl:variable name="hasSoftwareLines" select="boolean(count($SoftwareLines) &gt; 0)"/><!--xsl:variable name="SoftwareLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (item_l/_part_custom_field474 = 'SOFTWARE' or item_l/_part_custom_field474 = 'OS') and ( item_l/_part_custom_field476 = 'Software') and item_l/_part_custom_field479 = 'Y'])" />
    <xsl:variable name="hasSoftwareLines" select="boolean(count($SoftwareLines) &#62; 0)" /--><xsl:variable name="subscriptionLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (summaryPrintGrouping_l_c = 'SUBSCRIPTION') and summaryPrint_l_c = 'Y' ]"/><xsl:variable name="hassubscriptionLines" select="boolean(count($subscriptionLines) &gt; 0)"/><!--xsl:variable name="subscriptionLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (item_l/_part_custom_field474 = 'SUBSCRIPTION') and item_l/_part_custom_field479 = 'Y' ])" />
    <xsl:variable name="hassubscriptionLines" select="boolean(count($subscriptionLines) &#62; 0)" /--><xsl:variable name="serviceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SERVICE' or printGrouping_l_c = 'SERVICES' or printGrouping_l_c = 'Additional Service')]"/><xsl:variable name="hasserviceLines" select="boolean(count($serviceLines) &gt; 0)"/><!--xsl:variable name="platformLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (item_l/_part_custom_field474 = 'HARDWARE' or item_l/_part_custom_field474 = 'PLATFORM' or item_l/_part_custom_field474 = 'STORAGE' or item_l/_part_custom_field474 = 'Hardware') and ( item_l/_part_custom_field476 = 'Platform' or item_l/_part_custom_field476 = 'PLATFORM') and item_l/_part_custom_field479 = 'Y'])" />
    <xsl:variable name="hasplatformLines" select="boolean(count($platformLines) &#62; 0)" /--><xsl:variable name="platformLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and ( summaryPrintGrouping_l_c = 'Platform' or summaryPrintGrouping_l_c = 'PLATFORM') and summaryPrint_l_c = 'Y']"/><xsl:variable name="hasplatformLines" select="boolean(count($platformLines) &gt; 0)"/><!--xsl:variable name="capacityLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (item_l/_part_custom_field474 = 'HARDWARE' or item_l/_part_custom_field474 = 'PLATFORM' or item_l/_part_custom_field474 = 'STORAGE' or item_l/_part_custom_field474 = 'Hardware') and ( item_l/_part_custom_field476 = 'Capacity') and item_l/_part_custom_field479 = 'Y'])" />
    <xsl:variable name="hascapacityLines" select="boolean(count($capacityLines) &#62; 0)" /--><xsl:variable name="capacityLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and ( summaryPrintGrouping_l_c = 'Capacity') and summaryPrint_l_c = 'Y']"/><xsl:variable name="hascapacityLines" select="boolean(count($capacityLines) &gt; 0)"/><!--xsl:variable name="networkingLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and  (item_l/_part_custom_field474 = 'HARDWARE' or item_l/_part_custom_field474 = 'PLATFORM' or item_l/_part_custom_field474 = 'STORAGE' or item_l/_part_custom_field474 = 'Hardware') and (  item_l/_part_custom_field476 = 'Networking' or item_l/_part_custom_field476 = 'Network Adapters') and item_l/_part_custom_field479 = 'Y'])" />
    <xsl:variable name="hasnetworkingLines" select="boolean(count($networkingLines) &#62; 0)" /--><xsl:variable name="networkingLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false'  and (  summaryPrintGrouping_l_c = 'Networking' or summaryPrintGrouping_l_c = 'Network Adapters') and summaryPrint_l_c = 'Y']"/><xsl:variable name="hasnetworkingLines" select="boolean(count($networkingLines) &gt; 0)"/><!--xsl:variable name="switchesLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (item_l/_part_custom_field474 = 'HARDWARE' or item_l/_part_custom_field474 = 'PLATFORM' or item_l/_part_custom_field474 = 'STORAGE' or item_l/_part_custom_field474 = 'Hardware') and ( item_l/_part_custom_field476 = 'Switches') and item_l/_part_custom_field479 = 'Y'])" />
    <xsl:variable name="hasswitchesLines" select="boolean(count($switchesLines) &#62; 0)" /--><xsl:variable name="switchesLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and ( summaryPrintGrouping_l_c = 'Switches') and summaryPrint_l_c = 'Y' and not(item_l/_part_custom_field14  = 'MODEL SUB NETAPP' and doNotPrintFlag_l_c = 'Y')]"/><xsl:variable name="hasswitchesLines" select="boolean(count($switchesLines) &gt; 0)"/><!--xsl:variable name="BridgesLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (item_l/_part_custom_field474 = 'HARDWARE' or item_l/_part_custom_field474 = 'PLATFORM' or item_l/_part_custom_field474 = 'STORAGE' or item_l/_part_custom_field474 = 'Hardware') and ( item_l/_part_custom_field476 = 'Bridges') and item_l/_part_custom_field479 = 'Y'])" />
    <xsl:variable name="hasBridgessLines" select="boolean(count($BridgesLines) &#62; 0)" /--><xsl:variable name="BridgesLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and ( summaryPrintGrouping_l_c = 'Bridges') and summaryPrint_l_c = 'Y' and not(item_l/_part_custom_field14  = 'MODEL SUB NETAPP' and doNotPrintFlag_l_c = 'Y')]"/><xsl:variable name="hasBridgessLines" select="boolean(count($BridgesLines) &gt; 0)"/><xsl:variable name="otherhardwareLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM' or printGrouping_l_c = 'STORAGE' or printGrouping_l_c = 'Hardware') and (summaryPriceGrouping_l_c = '' or summaryPrintGrouping_l_c = '') and summaryPrint_l_c = 'Y']"/><xsl:variable name="hasotherHardwareLines" select="boolean(count($otherhardwareLines) &gt; 0)"/><!--xsl:variable name="AddserviceLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (item_l/_part_custom_field474 = 'SERVICE' or item_l/_part_custom_field474 = 'SERVICES' or item_l/_part_custom_field474 = 'Additional Service') and (  item_l/_part_custom_field476 = 'Additional Service') and item_l/_part_custom_field479 = 'Y'])" />
    <xsl:variable name="hasaddserviceLines" select="boolean(count($AddserviceLines) &#62; 0)" /--><xsl:variable name="AddserviceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (  summaryPrintGrouping_l_c = 'Additional Service') and summaryPrint_l_c = 'Y']"/><xsl:variable name="hasaddserviceLines" select="boolean(count($AddserviceLines) &gt; 0)"/><!--xsl:variable name="ProfserviceLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (item_l/_part_custom_field474 = 'SERVICE' or item_l/_part_custom_field474 = 'SERVICES' ) and ( item_l/_part_custom_field476 = 'Professional Services') and item_l/_part_custom_field479 = 'Y'])" />
    <xsl:variable name="hasprofserviceLines" select="boolean(count($ProfserviceLines) &#62; 0)" /--><xsl:variable name="ProfserviceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false'  and ( summaryPrintGrouping_l_c = 'Professional Services') and summaryPrint_l_c = 'Y']"/><xsl:variable name="hasprofserviceLines" select="boolean(count($ProfserviceLines) &gt; 0)"/><!--xsl:variable name="otherserviceLines"
        select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ((topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum)or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &#62; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (item_l/_part_custom_field474 = 'SERVICE' or item_l/_part_custom_field474 = 'SERVICES' ) and ( item_l/_part_custom_field476 = 'SERVICES' or item_l/_part_custom_field476 = 'Services') and item_l/_part_custom_field479 = 'Y'])" />
    <xsl:variable name="hasothserviceLines" select="boolean(count($otherserviceLines) &#62; 0)" /--><xsl:variable name="otherserviceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false'  and ( summaryPrintGrouping_l_c = 'SERVICES' or summaryPrintGrouping_l_c = 'Services') and summaryPrint_l_c = 'Y']"/><xsl:variable name="hasothserviceLines" select="boolean(count($otherserviceLines) &gt; 0)"/><xsl:variable name="dataNodesLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and ( summaryPrintGrouping_l_c = 'Data Compute Node') and summaryPrint_l_c = 'Y']"/><xsl:variable name="hasdataNodesLines" select="boolean(count($dataNodesLines) &gt; 0)"/><xsl:variable name="SubtotalLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or topModelLineID_l_c = $expansionLineNum or modelReferenceLineID_l_c = $lineNumber )and lineType_l = 'MODEL' ])"/><xsl:variable name="hasSubtotalLines" select="boolean(count($SubtotalLines) &gt; 0)"/><xsl:variable name="DonotPrint" select="$allSubLines[doNotPrintFlag_l_c != 'Y']"/><xsl:variable name="hasDonotPrint" select="boolean(count($DonotPrint) &gt; 0)"/><xsl:variable name="platformpriceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and  (summaryPriceGrouping_l_c = 'Platform' or summaryPriceGrouping_l_c = 'PLATFORM' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Platform') or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'PLATFORM'))]"/><xsl:variable name="hasplatformpricesLines" select="boolean(count($platformpriceLines) &gt; 0)"/><xsl:variable name="capacitypriceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (summaryPriceGrouping_l_c = 'Capacity' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Capacity'))]"/><xsl:variable name="hascapacitypricesLines" select="boolean(count($capacitypriceLines) &gt; 0)"/><xsl:variable name="networkingpricesLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (summaryPriceGrouping_l_c = 'Networking' or summaryPriceGrouping_l_c = 'Network Adapters' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Networking')  or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Network Adapters') ) ]"/><xsl:variable name="hasnetworkingpricesLines" select="boolean(count($networkingpricesLines) &gt; 0)"/><xsl:variable name="switchespricesLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (summaryPriceGrouping_l_c = 'Switches' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Switches')) and not(item_l/_part_custom_field14  = 'MODEL SUB NETAPP' and doNotPrintFlag_l_c = 'Y')]"/><xsl:variable name="hasswitchespriceLines" select="boolean(count($switchespricesLines) &gt; 0)"/><xsl:variable name="BridgespricesLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (summaryPriceGrouping_l_c = 'Bridges' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Bridges')) and not(item_l/_part_custom_field14  = 'MODEL SUB NETAPP' and doNotPrintFlag_l_c = 'Y') ]"/><xsl:variable name="hasBridgesspriceLines" select="boolean(count($BridgespricesLines) &gt; 0)"/><xsl:variable name="SoftwarepriceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (summaryPriceGrouping_l_c= 'Software' or summaryPriceGrouping_l_c = 'SOFTWARE' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Software') or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'SOFTWARE') ) ]"/><xsl:variable name="hasSoftwarepriceLines" select="boolean(count($SoftwarepriceLines) &gt; 0)"/><xsl:variable name="AddservicepriceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false'  and (summaryPriceGrouping_l_c = 'Additional Service' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Additional Service')) ]"/><xsl:variable name="hasaddservicepriceLines" select="boolean(count($AddservicepriceLines) &gt; 0)"/><xsl:variable name="ProfservicepriceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (summaryPriceGrouping_l_c = 'Professional Services' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Professional Services')) ]"/><xsl:variable name="hasprofservicepriceLines" select="boolean(count($ProfservicepriceLines) &gt; 0)"/><xsl:variable name="otherservicepriceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false'  and (summaryPriceGrouping_l_c = 'SERVICES' or summaryPriceGrouping_l_c = 'Services' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'SERVICES') or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Services')) ]"/><xsl:variable name="hasothservicepriceLines" select="boolean(count($otherservicepriceLines) &gt; 0)"/><xsl:variable name="subscriptionpriceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (summaryPriceGrouping_l_c = 'SUBSCRIPTION' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'SUBSCRIPTION')) ]"/><xsl:variable name="hassubscriptionpriceLines" select="boolean(count($subscriptionpriceLines) &gt; 0)"/><xsl:variable name="dataNodespriceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and bundleChild_l_c = 'false' and (summaryPriceGrouping_l_c = 'Data Compute Node' or (summaryPriceGrouping_l_c = '' and summaryPrintGrouping_l_c = 'Data Compute Node')) ]"/><xsl:variable name="hasdataNodespriceLines" select="boolean(count($dataNodespriceLines) &gt; 0)"/><xsl:variable name="ChildLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and  (lineItemNumber_l_c = $serviceReferenceLineID or item_l/_part_number = $coveredItem) and virtualLineID_l_c = $virtualLineID])"/><xsl:variable name="SerialNumber"><xsl:value-of select="$ChildLines/serialNumber_l_c"/></xsl:variable><xsl:variable name="serialNumberList"><xsl:variable name="tmpSerialNumberList"><xsl:for-each select="./_commerce_array_set_attr_info[@setName='serialNumber_Array_l_c']/_array_set_row"><xsl:sort select="./@_row_number" data-type="number" order="ascending"/><xsl:if test="./attribute[@var_name='serialNumber_serialNumber_Array_l_c']!=''"><xsl:choose><xsl:when test="./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!='' or ./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!=null"><xsl:value-of select="concat(./attribute[@var_name='serialNumber_serialNumber_Array_l_c'],', ',./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c'], ', ')"/></xsl:when><xsl:otherwise><xsl:value-of select="concat(./attribute[@var_name='serialNumber_serialNumber_Array_l_c'],', ')"/></xsl:otherwise></xsl:choose></xsl:if></xsl:for-each></xsl:variable><xsl:value-of select="substring($tmpSerialNumberList, 1,string-length($tmpSerialNumberList)-2)"/></xsl:variable><xsl:variable name="serviceDurationList"><xsl:for-each select="$serviceLines/serviceDuration_l_c"><xsl:sort data-type="number" select="." order="descending"/><xsl:if test=". &gt; 0"><xsl:copy-of select="."/></xsl:if></xsl:for-each></xsl:variable><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-body><xsl:variable name="cond47262767"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(($_dsSub1/extendedListPrice_l_c&gt;'0' or $hasDonotPrint) or ($_dsSub1/extendedListPrice_l_c&lt;'0' and $_dsSub1/summaryPrintGrouping_l_c = 'Trade-in') or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/renewalIndicator_l_c!='Y'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262767)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="450.0px"/><table-column column-width="300.0px"/><table-column column-width="300.0px"/><table-column column-width="300.0px"/><table-body><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'MODEL'"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 12pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="$_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE'">
                        <xsl:value-of select="$_dsSub1/item_l/_part_number"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="$_dsSub1/topModel_l_c"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test=" not ($_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" background-color="#E1E1E1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262971"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!='' or $_dsSub1/addOnOriginalQuoteNumberSearch_l_c!='' or $SerialNumber!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262971)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:when test="$SerialNumber!='' and $_dsSub1/serialNumber_l_c =''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$SerialNumber"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262769"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasplatformLines or $hasotherHardwareLines or $hasBridgessLines or $hasswitchesLines or $hasnetworkingLines or $hascapacityLines or $hasdataNodesLines ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262769)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.2pt; text-align: left"><span style="font-size: 11pt"><span style="font-weight: bold">Product</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262754"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasplatformLines ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262754)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Platform: '"/>
    <xsl:with-param name="list" select="$platformLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($platformpriceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($platformpriceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($platformpriceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="addendumTotalPrint"-->
<!--xsl:with-param name="label" select="'Ext. Net Price: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template-->
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262755"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hascapacityLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262755)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:variable name="ssdCapacity">
<xsl:call-template name="sumDriveCapacity">
    <xsl:with-param name="rows" select="$capacityLines[contains(item_l/_part_custom_field284,'SSD')]"/>
</xsl:call-template>
</xsl:variable>
<xsl:variable name="hdCapacity">
<xsl:call-template name="sumDriveCapacity">
    <xsl:with-param name="rows" select="$capacityLines[contains(item_l/_part_custom_field284,'HDD')]"/>
</xsl:call-template>
</xsl:variable>
<xsl:choose>
    <xsl:when test="$hdCapacity &gt; 0 and $ssdCapacity &gt; 0">
        <xsl:call-template name="summaryPrintListALL">
            <xsl:with-param name="label" select="'Capacity: '"/>
            <xsl:with-param name="list" select="exsl:node-set(concat($hdCapacity,'TB HDD storage',', ',$ssdCapacity,'TB SSD storage'))"/>
        </xsl:call-template>
    </xsl:when>
    <xsl:when test="$hdCapacity &gt; 0">
        <xsl:call-template name="summaryPrintListALL">
            <xsl:with-param name="label" select="'Capacity: '"/>
            <xsl:with-param name="list" select="exsl:node-set(concat($hdCapacity,'TB HDD storage'))"/>
        </xsl:call-template>
    </xsl:when>
    <xsl:when test="$ssdCapacity &gt; 0">
        <xsl:call-template name="summaryPrintListALL">
            <xsl:with-param name="label" select="'Capacity: '"/>
            <xsl:with-param name="list" select="exsl:node-set(concat($ssdCapacity,'TB SSD storage'))"/>
        </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>shouldnt print</xsl:otherwise>
</xsl:choose>
</div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($capacitypriceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($capacitypriceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($capacitypriceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond118785879"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasdataNodesLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond118785879)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Data Compute Node: '"/>
    <xsl:with-param name="list" select="$dataNodesLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($dataNodespriceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($dataNodespriceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($dataNodespriceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="addendumTotalPrint"-->
<!--xsl:with-param name="label" select="'Ext. Net Price: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template-->
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262756"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasnetworkingLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262756)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Networking: '"/>
    <xsl:with-param name="list" select="$networkingLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($networkingpricesLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($networkingpricesLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($networkingpricesLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262757"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasswitchesLines ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262757)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Switches: '"/>
    <xsl:with-param name="list" select="$switchesLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($switchespricesLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($switchespricesLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($switchespricesLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262758"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasBridgessLines ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262758)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Bridges: '"/>
    <xsl:with-param name="list" select="$BridgesLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($BridgespricesLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($BridgespricesLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($BridgespricesLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262759"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262759)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 11pt" font-weight="bold" style="font-family: Helvetica">
    <xsl:choose>
        <xsl:when test="$SoftwareLines/printGrouping_l_c = 'SUBSCRIPTION'">
            <xsl:value-of select="'Subscription'"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="'Software'"/>
        </xsl:otherwise>
    </xsl:choose>
</div></div><xsl:choose><xsl:when test="'1' = '2'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">Software</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263298"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:variable name="serviceDuration"><xsl:for-each select="$SoftwareLines/serviceDuration_l_c"><xsl:sort data-type="number" select="." order="descending"/><xsl:if test="position()=1"><xsl:value-of select="."/></xsl:if></xsl:for-each></xsl:variable><xsl:variable name="ServiceserviceDuration"><xsl:for-each select="$serviceLines/serviceDuration_l_c"><xsl:sort data-type="number" select="." order="descending"/><xsl:if test="position()=1"><xsl:value-of select="."/></xsl:if></xsl:for-each></xsl:variable><xsl:choose><xsl:when test="$serviceDuration&gt;'0' and  not ($ServiceserviceDuration&gt;'0')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263298)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template xmlns:math="http://exslt.org/math" name="printSumNumeric">
    <xsl:with-param name="label" select="'Duration: '"/>
    <xsl:with-param name="suffix" select="' Months'"/>
    <xsl:with-param name="sum">
        <xsl:for-each select="$SoftwareLines/serviceDuration_l_c">
            <xsl:sort data-type="number" select="." order="descending"/>
            <xsl:if test="position()=1">
                <xsl:value-of select="."/>
            </xsl:if>
        </xsl:for-each>
    </xsl:with-param>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262760"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262760)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Software: '"/>
    <xsl:with-param name="list" select="$SoftwareLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($SoftwarepriceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($SoftwarepriceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($SoftwarepriceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262761"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262761)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica"><span>Subscription</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262762"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262762)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Subscription: '"/>
    <xsl:with-param name="list" select="$subscriptionLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($subscriptionpriceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($subscriptionpriceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($subscriptionpriceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262763"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasserviceLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262763)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">Services</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262768"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><!--xsl:choose>
    <xsl:when test="$hasserviceLines">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose--><xsl:choose><xsl:when test="count(exsl:node-set($serviceDurationList)) &gt; 0">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262768)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:for-each select="exsl:node-set($serviceDurationList)/*[not(. = preceding-sibling::*)]">
                <xsl:call-template xmlns:math="http://exslt.org/math" name="printSumNumeric">
    <xsl:with-param name="label" select="'Duration: '"/>
    <xsl:with-param name="suffix" select="' Months'"/>
    <xsl:with-param name="sum" select="."/>
</xsl:call-template>
</xsl:for-each></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262764"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasothserviceLines ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262764)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Service: '"/>
    <xsl:with-param name="list" select="$otherserviceLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($otherservicepriceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($otherservicepriceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($otherservicepriceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262765"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasaddserviceLines ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262765)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Additional Service: '"/>
    <xsl:with-param name="list" select="$AddserviceLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddservicepriceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddservicepriceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddservicepriceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262766"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasprofserviceLines ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262766)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="summaryPrintList">
    <xsl:with-param name="label" select="'Professional Services: '"/>
    <xsl:with-param name="list" select="$ProfserviceLines/summaryPrintLabel_l_c"/>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($ProfservicepriceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($ProfservicepriceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($ProfservicepriceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/summaryPrintGrouping_l_c!='Trade-in'"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'SERVICE'"><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 12pt"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/coveredItem_l_c/@display_value"><xsl:value-of select="$_dsSub1/coveredItem_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/coveredItem_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'STD'"><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 12pt"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Additional Parts</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'STD' and $_dsSub1/summaryPrintGrouping_l_c = 'Trade-in'"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" border-top="1px solid #000000" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold">Credits</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/summaryPrintGrouping_l_c!='Trade-in'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 10pt" font-weight="bold" style="font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'SERVICES' or $_dsSub1/printGrouping_l_c = 'SERVICE'">
            <xsl:value-of select="'Services'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'HARDWARE'">
            <xsl:value-of select="'Hardware'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'SOFTWARE'">
            <xsl:value-of select="'Software'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'STORAGE'">
            <xsl:value-of select="'Storage'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'SUBSCRIPTION'">
            <xsl:value-of select="'Subscription'"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$_dsSub1/printGrouping_l_c"/>
        </xsl:otherwise>
    </xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263299"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:variable name="serviceDuration"><xsl:for-each select="$_dsSub1/serviceDuration_l_c"><xsl:sort data-type="number" select="." order="descending"/><xsl:if test="position()=1"><xsl:value-of select="."/></xsl:if></xsl:for-each></xsl:variable><xsl:choose><xsl:when test="$serviceDuration&gt;'0' and ($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263299)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template xmlns:math="http://exslt.org/math" name="printSumNumeric">
    <xsl:with-param name="label" select="'Duration: '"/>
    <xsl:with-param name="suffix" select="' Months'"/>
    <xsl:with-param name="sum">
        <xsl:for-each select="$_dsSub1/serviceDuration_l_c">
            <xsl:sort data-type="number" select="." order="descending"/>
            <xsl:if test="position()=1">
                <xsl:value-of select="."/>
            </xsl:if>
        </xsl:for-each>
    </xsl:with-param>
</xsl:call-template></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE'"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"><span style="font-weight: bold"><xsl:choose><xsl:when test="$_dsSub1/summaryPrintGrouping_l_c/@display_value"><xsl:value-of select="$_dsSub1/summaryPrintGrouping_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/summaryPrintGrouping_l_c"/></xsl:otherwise></xsl:choose>:</span><xsl:choose><xsl:when test="$_dsSub1/summaryPrintLabel_l_c/@display_value"><xsl:value-of select="$_dsSub1/summaryPrintLabel_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/summaryPrintLabel_l_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263199"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263199)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:choose>
                            <xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/topModel_l_c!='' and not ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE') ">
                                <xsl:value-of select="concat($top_model_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:when test="($_dsSub1/lineType_l = 'MODEL' or $_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'Std') ">
                                <xsl:value-of select="concat($part_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:when test="($_dsSub1/lineType_l = 'SERVICE') ">
                                <xsl:value-of select="concat(coveredItem_l_c,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'Std') and $_dsSub1/summaryPrintGrouping_l_c = 'Trade-in'">
                                <xsl:value-of select="concat($part_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:otherwise>0</xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:choose>
                            <xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/topModel_l_c!='' and not ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE')">
                                <xsl:value-of select="concat('Estimated ',$top_model_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:when test="($_dsSub1/lineType_l = 'MODEL' or $_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'Std' ) ">
                                <xsl:value-of select="concat('Estimated ',$part_name,' Sub Total :')"/>
                            </xsl:when>
                             <xsl:when test="($_dsSub1/lineType_l = 'SERVICE') ">
                                <xsl:value-of select="concat('Estimated ',coveredItem_l_c,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'Std') and $_dsSub1/summaryPrintGrouping_l_c = 'Trade-in'">
                                <xsl:value-of select="concat('Estimated ',$part_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:otherwise>0</xsl:otherwise>
                        </xsl:choose>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test=" not ($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE') and $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
	<xsl:with-param name="label" select="'Ext. List Price: '"/>
	<xsl:with-param name="sum" select="sum($SubtotalLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE') and $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
	<xsl:with-param name="label" select="'Ext. List Price: '"/>
	<xsl:with-param name="sum" select="extendedListPrice_l_c"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test=" not ($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE') and $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($SubtotalLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($SubtotalLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($SubtotalLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($SubtotalLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE') and $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discounts"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262794"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test=" not ($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE') and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262794)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($SubtotalLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($SubtotalLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($SubtotalLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose><xsl:variable name="cond47262795"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE') and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262795)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div><!--</xsl:when>
    </xsl:choose>--></xsl:for-each></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/downstreamFulfillment_l_c = 'SMP'"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="550.0px"/><table-column column-width="100.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" number-columns-spanned="4" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/model_l/_model_name/@display_value"><xsl:value-of select="$_dsSub1/model_l/_model_name/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/model_l/_model_name"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend' or $_dsSub1/assetType_l_c = 'Renew'"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 10pt"><span style="color: #000000; font-family: Helvetica">Amend</span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 10pt">Renew</span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262968"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262968)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend' or $_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Subscription Details</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="line-height: 12pt; text-align: center"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Add'l Qty</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></xsl:when></xsl:choose><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3']"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:choose><xsl:when test="$_dsSub1/_parent_doc_number = $proposalLoopDocNumber  and $_dsSub1/oRCL_ABO_ActionCode_l! = 'DELETE' and ($_dsSub1/downstreamFulfillment_l_c = 'SMP')"><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><xsl:variable name="modelLoopDocNumber12" select="./_document_number"/><xsl:variable name="modelLoopGSNumber12" select="./_group_sequence_number"/><xsl:variable name="AutoRenewal" select="./autoRenew_l_c"/><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="550.0px"/><table-column column-width="100.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend' or $_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Subscription ID:</span> <xsl:choose><xsl:when test="$_dsSub1/subscriptionNumber_l_c/@display_value"><xsl:value-of select="$_dsSub1/subscriptionNumber_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/subscriptionNumber_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="line-height: 8pt; text-align: left"><span style="font-size: 8pt"><span style="font-weight: bold">Amendment Start Date</span><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold">:</span> <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/addOnStartDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'addOnStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Start Date of Extension:</span><xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Existing Subscription End Date:</span> <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left; line-height: 12pt">
    <span style="font-weight: bold"><xsl:value-of select="'Amendment Duration: '"/></span>
    <xsl:value-of select="concat(format-number($_dsSub1/amendmentDuration_l_c, '#'),' ','Days')"/>    
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Previous Total Quantity:</span><xsl:choose><xsl:when test="$_dsSub1/assetOriginalQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/assetOriginalQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/assetOriginalQuantity_l_c))='NaN' or not(contains($_dsSub1/assetOriginalQuantity_l_c, '.') or contains($_dsSub1/assetOriginalQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/assetOriginalQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/assetOriginalQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/assetOriginalQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/assetOriginalQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 11pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span>Extension Subscription End Date:</span></span><span> </span><xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/><span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left; line-height: 12pt">
    <span style="font-weight: bold"><xsl:value-of select="'New Total Quantity: '"/></span>
    <xsl:choose>
        <xsl:when test="$_dsSub1/assetType_l_c = 'Amend' and $_dsSub1/assetAmendedQty_l_c!=''"><xsl:value-of select="$_dsSub1/assetAmendedQty_l_c"/></xsl:when>
        <xsl:otherwise><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:otherwise>
    </xsl:choose>  
</div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: center; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$_dsSub1/assetType_l_c = 'Amend' and $_dsSub1/assetAmendedQty_l_c!=''"><xsl:value-of select="$_dsSub1/assetAmendedQty_l_c"/></xsl:when>
        <xsl:otherwise><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:otherwise>
    </xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><!--fo:block text-align = "center" font-size="8pt" font-family="Helvetica">
<xsl:value-of select="$_dsSub1/extendedQuantity_l_c - $_dsSub1/assetOriginalQuantity_l_c" />
</fo:block-->
<div style="text-align: center; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="($_dsSub1/assetOriginalQuantity_l_c != '' and $_dsSub1/assetAmendedQty_l_c !='')">
            <xsl:value-of select="$_dsSub1/assetAmendedQty_l_c - $_dsSub1/assetOriginalQuantity_l_c"/>
        </xsl:when>
        <xsl:otherwise><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="monthlyUnitListPriceFloat_c * serviceDuration_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="monthlyUnitNetPricefloat_l_c * serviceDuration_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'2'"/>
</xsl:call-template-->

<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" number-columns-spanned="8" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Product Description: '"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></xsl:when></xsl:choose></xsl:for-each><!-- Added condition of Asset Type for new,renew,amend,none --><xsl:choose><xsl:when test="$_dsSub1/downstreamFulfillment_l_c = 'SMP'"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="450.0px"/><table-column column-width="300.0px"/><table-column column-width="300.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" number-columns-spanned="4" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/selectedTechnologies_l_c!=''"><div><!--xsl:variable name="SelectTechnology" select="translate($SelectedTech,'~',',')"/>
<div style="font-family: Helvetica; font-size: 8pt; text-align: left" >
    <span style="font-weight: bold"><xsl:value-of select="'Selected Technologies: '"/></span>
    <xsl:value-of select="$SelectTechnology"/>
</fo:block-->
<div style="font-family: Helvetica; font-size: 8pt; text-align: left">
<span style="font-weight: bold"><xsl:value-of select="'Selected Technologies: '"/></span>
<xsl:for-each xmlns:str="http://exslt.org/strings" select="str:split($SelectedTech, '~')">
    <xsl:choose>
		<xsl:when test="position() != last()">
			<xsl:value-of select="concat(., ', ')"/>
		</xsl:when>
		<xsl:otherwise>
			<xsl:value-of select="."/>
		</xsl:otherwise>
	</xsl:choose>
</xsl:for-each>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/overage_l_c = 'Yes'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span background-style="color: #ffffff; font-size: 8pt; font-family: helvetica" text-align="left"><span style="font-weight: bold">Burst Opt-In</span>: Yes</span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/overage_l_c!='Yes'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span background-style="color: #ffffff; font-size: 8pt; font-family: helvetica" text-align="left"><span style="font-weight: bold">Burst Opt-In</span>: No</span></span></div></div></xsl:when></xsl:choose><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left; line-height: 12pt">
    <span style="font-weight: bold"><xsl:value-of select="'Billing Frequency: '"/></span>
    <xsl:value-of select="$BillingFrequency"/>
</div></div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left; line-height: 12pt">
    <span style="font-weight: bold"><xsl:value-of select="'Auto Renewal: '"/></span>
    <xsl:value-of select="$AutoRenew"/>
</div></div><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="align" select="'left'"/>
<xsl:with-param name="label" select="'Total Contract Value: '"/>
<xsl:with-param name="sum" select="extendedNetPrice_l_c"/>
</xsl:call-template></div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left">
    <span style="font-weight: bold"><xsl:value-of select="'Duration: '"/></span>
    <xsl:value-of select="$serviceDuration"/>
    <xsl:choose>
        <xsl:when test="$serviceDuration = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="' Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/overage_l_c = 'Yes'"><table-row><table-cell cpq-cell="1" number-columns-spanned="4" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left"><span style="font-family: Helvetica">Subscription Terms</span></span></span></span></div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">This subscription is configured to allow consumption bursting. The Cloud Insights customer environment will allow customer administrators to consume unlimited Managed Units. Any</span><span background-style="color: #ffffff; font-family: Helvetica" text-align="left"></span><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">amount consumed above the quantity in this configuration will be invoiced monthly in arrears at the same unit net price on this quote</span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263206"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263206)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Subscription Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Subscription Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. List Price: '"/>
<xsl:with-param name="sum" select="extendedListPrice_l_c"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discounts"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262952"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262952)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price:'"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:when></xsl:choose><xsl:variable name="cond47262982"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test=" $SimplifiedFlag = 'false' and $_dsSub1/downstreamFulfillment_l_c!='SMP' and $_dsSub1/virtualConfigName_l_c!=''">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262982)=1"><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 12pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="FunctionUtil:startswith($parentConfigName,'Config#')">
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <!--xsl:value-of select="concat('Config # ',$parentConfigName)" /-->
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Configuration Comments:<xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><div space-after="0.1in" space-after.precedence="force"/><xsl:variable name="cond47263319"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$SimplifiedFlag = 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263319)=1"><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3' and _parent_doc_number = $proposalLoopDocNumber and downstreamFulfillment_l_c != 'SMP']"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!--<xsl:choose> shansen - no need to check this after looping
        <xsl:when test="($_dsSub1/_parent_doc_number = $proposalLoopDocNumber or $_dsSub1/_parent_doc_number = $parentLoopDocNumber)">-><!-  CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><xsl:variable name="modelLoopDocNumber" select="./_document_number"/><xsl:variable name="modelLoopGSNumber" select="./_group_sequence_number"/><xsl:variable name="lineNumber" select="./lineItemNumber_l_c"/><xsl:variable name="bom_level" select="./_line_bom_level"/><xsl:variable name="top_model_name" select="./topModel_l_c"/><xsl:variable name="part_name" select="./item_l/_part_number"/><xsl:variable name="passbundlechild"><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/bundleParent_l_c='true'">
                    1
                </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="hardwareLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware')])"/><xsl:variable name="hasHardwareLines" select="boolean(count($hardwareLines) &gt; 0)"/><xsl:variable name="SoftwareLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SOFTWARE' )])"/><xsl:variable name="hasSoftwareLines" select="boolean(count($SoftwareLines) &gt; 0)"/><xsl:variable name="subscriptionLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SUBSCRIPTION')])"/><xsl:variable name="hassubscriptionLines" select="boolean(count($subscriptionLines) &gt; 0)"/><xsl:variable name="serviceLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or ((modelReferenceLineID_l_c = $lineNumber  or serviceReferenceLineID_l_c = $lineNumber) and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and bundleChild_l_c = 'false' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and (printGrouping_l_c = 'SERVICE' or printGrouping_l_c = 'SERVICES' or printGrouping_l_c = 'Additional Service')])"/><xsl:variable name="hasserviceLines" select="boolean(count($serviceLines) &gt; 0)"/><xsl:variable name="platformLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Platform' or summaryPrintGrouping_l_c = 'PLATFORM')])"/><xsl:variable name="hasplatformLines" select="boolean(count($platformLines) &gt; 0)"/><xsl:variable name="capacityLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Capacity')])"/><xsl:variable name="hascapacityLines" select="boolean(count($capacityLines) &gt; 0)"/><xsl:variable name="networkingLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Networking' or summaryPrintGrouping_l_c = 'Network Adapters')])"/><xsl:variable name="hasnetworkingLines" select="boolean(count($networkingLines) &gt; 0)"/><xsl:variable name="switchesLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM' or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Switches')])"/><xsl:variable name="hasswitchesLines" select="boolean(count($switchesLines) &gt; 0)"/><xsl:variable name="BridgesLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM' or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Bridges')])"/><xsl:variable name="hasBridgessLines" select="boolean(count($BridgesLines) &gt; 0)"/><xsl:variable name="dataNodesLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware') and ( summaryPrintGrouping_l_c = 'Data Compute Node')])"/><xsl:variable name="hasdataNodesLines" select="boolean(count($dataNodesLines) &gt; 0)"/><xsl:variable name="otherhardwareLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and (bundleChild_l_c = 'false' or  $passbundlechild = '1' ) and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = '' or summaryPrintGrouping_l_c = 'None')])"/><xsl:variable name="hasotherHardwareLines" select="boolean(count($otherhardwareLines) &gt; 0)"/><xsl:variable name="AddserviceLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SERVICE' or printGrouping_l_c = 'SERVICES' or printGrouping_l_c = 'Additional Service') and (summaryPrintGrouping_l_c = 'Additional Service')])"/><xsl:variable name="hasaddserviceLines" select="boolean(count($AddserviceLines) &gt; 0)"/><xsl:variable name="ProfserviceLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level)) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SERVICE' or printGrouping_l_c = 'SERVICES' or printGrouping_l_c = 'Additional Service') and (summaryPrintGrouping_l_c = 'Professional Services')])"/><xsl:variable name="hasprofserviceLines" select="boolean(count($ProfserviceLines) &gt; 0)"/><xsl:variable name="otherserviceLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber or ((modelReferenceLineID_l_c = $lineNumber or serviceReferenceLineID_l_c = $lineNumber) and  _line_bom_level &gt; $bom_level))  and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SERVICE' or printGrouping_l_c = 'SERVICES' or printGrouping_l_c = 'Additional Service') and (summaryPrintGrouping_l_c = 'SERVICES' or summaryPrintGrouping_l_c = 'Services' or summaryPrintGrouping_l_c = '' or summaryPrintGrouping_l_c = 'None')])"/><xsl:variable name="hasothserviceLines" select="boolean(count($otherserviceLines) &gt; 0)"/><xsl:variable name="DonotPrint" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and ( topModelLineID_l_c = $lineNumber or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level)) and lineType_l! = 'MODEL' and doNotPrintFlag_l_c != 'Y'])"/><xsl:variable name="hasDonotPrint" select="boolean(count($DonotPrint) &gt; 0)"/><xsl:variable name="OSLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and ( printGrouping_l_c = 'OS')])"/><xsl:variable name="hasOSLines" select="boolean(count($OSLines) &gt; 0)"/><xsl:variable name="StorageLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and ( printGrouping_l_c = 'STORAGE' )])"/><xsl:variable name="hasStorageLines" select="boolean(count($StorageLines) &gt; 0)"/><xsl:variable name="StorageplatformLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and ( printGrouping_l_c = 'STORAGE' ) and (summaryPrintGrouping_l_c = 'Platform' or summaryPrintGrouping_l_c = 'PLATFORM')])"/><xsl:variable name="hasStorageplatformLines" select="boolean(count($StorageplatformLines) &gt; 0)"/><xsl:variable name="StoragecapacityLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and ( printGrouping_l_c = 'STORAGE' ) and (summaryPrintGrouping_l_c = 'Capacity')])"/><xsl:variable name="hasStoragecapacityLines" select="boolean(count($StoragecapacityLines) &gt; 0)"/><xsl:variable name="otherStorageLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and (bundleChild_l_c = 'false' or  $passbundlechild = '1' ) and ( printGrouping_l_c = 'STORAGE' ) and not(summaryPrintGrouping_l_c = 'Platform' or summaryPrintGrouping_l_c = 'PLATFORM' or summaryPrintGrouping_l_c = 'Capacity')])"/><xsl:variable name="hasotherStorageLines" select="boolean(count($otherStorageLines) &gt; 0)"/><xsl:variable name="serialNumberList"><xsl:variable name="tmpSerialNumberList"><xsl:for-each select="./_commerce_array_set_attr_info[@setName='serialNumber_Array_l_c']/_array_set_row"><xsl:sort select="./@_row_number" data-type="number" order="ascending"/><xsl:if test="./attribute[@var_name='serialNumber_serialNumber_Array_l_c']!=''"><xsl:choose><xsl:when test="./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!='' or ./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!=null"><xsl:value-of select="concat(./attribute[@var_name='serialNumber_serialNumber_Array_l_c'],', ',./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c'], ', ')"/></xsl:when><xsl:otherwise><xsl:value-of select="concat(./attribute[@var_name='serialNumber_serialNumber_Array_l_c'],', ')"/></xsl:otherwise></xsl:choose></xsl:if></xsl:for-each></xsl:variable><xsl:value-of select="substring($tmpSerialNumberList, 1,string-length($tmpSerialNumberList)-2)"/></xsl:variable><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'MODEL'"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 12pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE') or (($_dsSub1/lineType_l = 'MODEL') and $_dsSub1/topModel_l_c = '')">
                        <xsl:value-of select="$_dsSub1/item_l/_part_number"/>
                    </xsl:when>
                    <xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/topModel_l_c!=''">
                        <xsl:value-of select="$_dsSub1/topModel_l_c"/>
                    </xsl:when>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262985"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasHardwareLines or $hasotherHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262985)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 11pt"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Hardware</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262986"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and ($hasHardwareLines or $hasotherHardwareLines)">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262986)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262987"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hardwareLines or $hasotherHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262987)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$otherhardwareLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="'1' = '2'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_desc/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_desc/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_desc"/></xsl:otherwise></xsl:choose> <span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="color: #000000; font-size: 10pt; font-family: helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">[ Discount Cat:</span><xsl:choose><xsl:when test="$_dsSub1/dynamicCatCode_l_c/@display_value"><xsl:value-of select="$_dsSub1/dynamicCatCode_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/dynamicCatCode_l_c"/></xsl:otherwise></xsl:choose><span style="font-weight: bold">]</span></span></span></span></span></div></div></xsl:when></xsl:choose><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262988"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasplatformLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262988)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="font-size: 8pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Platform</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$platformLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262989"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hascapacityLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262989)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Capacity</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$capacityLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262990"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasnetworkingLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262990)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Networking</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$networkingLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond118785881"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasdataNodesLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond118785881)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Data Compute Node</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$dataNodesLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262991"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasswitchesLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262991)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="font-size: 8pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Switches</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$switchesLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262992"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasBridgessLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262992)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Bridges</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$BridgesLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'right'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262993"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasHardwareLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262993)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Hardware Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Hardware Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. List: '"/>
<xsl:with-param name="sum" select="sum($hardwareLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($hardwareLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($hardwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($hardwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($hardwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Hardware Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263383"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263383)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($hardwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($hardwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($hardwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656070"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656070)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 11pt"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Storage</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656071"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656071)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656072"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656072)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$otherStorageLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond58656073"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStorageplatformLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656073)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="font-size: 8pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Platform</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$StorageplatformLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond58656074"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStoragecapacityLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656074)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Capacity</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$StoragecapacityLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond58656075"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStorageLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656075)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Storage Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Storage Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Storage Ext. List: '"/>
<xsl:with-param name="sum" select="sum($StorageLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($StorageLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($StorageLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($StorageLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($StorageLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Storage Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond58656108"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656108)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($StorageLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($StorageLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($StorageLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Storage Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262994"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262994)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">Software</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262995"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262995)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262996"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262996)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263252"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263252)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Software</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$SoftwareLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="400.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <xsl:value-of select="$installedat"/>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262997"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262997)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Software Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Software Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Software Ext. List: '"/>
<xsl:with-param name="sum" select="sum($SoftwareLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($SoftwareLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($SoftwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($SoftwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($SoftwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Software Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263386"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263386)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($SoftwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($SoftwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($SoftwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Software Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656076"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOSLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656076)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">OS</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656077"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasOSLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656077)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656078"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOSLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656078)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656079"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOSLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656079)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">OS</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$OSLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="400.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <xsl:value-of select="$installedat"/>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond58656080"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOSLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656080)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'OS Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated OS Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'OS Ext. List: '"/>
<xsl:with-param name="sum" select="sum($OSLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($OSLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($OSLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($OSLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($OSLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'OS Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond58656126"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656126)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($OSLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($OSLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($OSLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'OS Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262998"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262998)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">Subscription</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262999"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hassubscriptionLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262999)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263000"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263000)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263253"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263253)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt" font-weight="bold" style="font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$subscriptionLines/summaryPrintGrouping_l_c = 'SOFTWARE'">
            <xsl:value-of select="'Software'"/>
        </xsl:when>
        <xsl:when test="$subscriptionLines/summaryPrintGrouping_l_c = 'SUBSCRIPTION'">
            <xsl:value-of select="'Subscription'"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$subscriptionLines/summaryPrintGrouping_l_c"/>
        </xsl:otherwise>
    </xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$subscriptionLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <xsl:value-of select="$installedat"/>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263001"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263001)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Subscription Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Subscription Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Subscription Ext. List: '"/>
<xsl:with-param name="sum" select="sum($subscriptionLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($subscriptionLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($subscriptionLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($subscriptionLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($subscriptionLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Subscription Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263377"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263377)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($subscriptionLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($subscriptionLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($subscriptionLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Subscription Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263002"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasserviceLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263002)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">Services</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263004"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasserviceLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263004)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263005"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasserviceLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263005)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263003"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasothserviceLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263003)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Services</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$otherserviceLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:variable name="parentdocnum" select="./_document_number"/><xsl:variable name="ChildServiceLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and cPQVirtualPart_l_c = 'CSITEMCHILD' and _parent_doc_number = $parentdocnum])"/><xsl:variable name="dynamicCatCode"><xsl:value-of select="$ChildServiceLines/dynamicCatCode_l_c"/></xsl:variable><xsl:variable name="legacyCatCode"><xsl:value-of select="$ChildServiceLines/item_l/_part_custom_field463"/></xsl:variable><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/catCodes_t_c = 'dynamic'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$dynamicCatCode!= ''">
            
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$dynamicCatCode"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
            <!--xsl:value-of select="concat($_dsSub1/item_l/_part_desc,' [',' Disocunt Cat: ',$dynamicCatCode,']')" /-->
        </xsl:when>
        <xsl:otherwise>
            
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
            <!--xsl:value-of select="concat($_dsSub1/item_l/_part_desc,' [',' Disocunt Cat: ',$_dsSub1/dynamicCatCode_l_c,']')" /-->
        </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$legacyCatCode!= ''">
            
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$legacyCatCode"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
        </xsl:when>
        <xsl:otherwise>
            
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
        </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <xsl:value-of select="$installedat"/>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsSub1/quickShipMessages_l_c = 'SSP for:'">
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="concat('SSP for:',$_dsSub1/coveredItem_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="$_dsSub1/quickShipMessages_l_c"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263006"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasaddserviceLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263006)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Additional Services</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddserviceLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:variable name="parentdocnum" select="./_document_number"/><xsl:variable name="ChildServiceLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and cPQVirtualPart_l_c = 'CSITEMCHILD' and _parent_doc_number = $parentdocnum])"/><xsl:variable name="dynamicCatCode"><xsl:value-of select="$ChildServiceLines/dynamicCatCode_l_c"/></xsl:variable><xsl:variable name="legacyCatCode"><xsl:value-of select="$ChildServiceLines/item_l/_part_custom_field463"/></xsl:variable><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><!--fo:block text-align = "left" font-size="8pt" font-family="Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc" />
</div>
<div text-align = "left" style="font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = &#39;legacy&#39;">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')" /></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463" />
        <span style="font-weight: bold"><xsl:value-of select="']'" /></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')" /></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c" />
        <span style="font-weight: bold"><xsl:value-of select="']'" /></span>
    </xsl:otherwise>
</xsl:choose>
</fo:block-->
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:choose>
            <xsl:when test="$legacyCatCode!= ''">
                <xsl:value-of select="$legacyCatCode"/>
            </xsl:when>
            <xsl:otherwise>    
                <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
            </xsl:otherwise>
        </xsl:choose>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:choose>
            <xsl:when test="$dynamicCatCode!= ''">
                <xsl:value-of select="$dynamicCatCode"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
            </xsl:otherwise>
        </xsl:choose>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <xsl:value-of select="$installedat"/>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsSub1/quickShipMessages_l_c = 'SSP for:'">
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="concat('SSP for:',$_dsSub1/coveredItem_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="$_dsSub1/quickShipMessages_l_c"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263007"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasprofserviceLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263007)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Professional Services</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$ProfserviceLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <xsl:value-of select="$installedat"/>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263008"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasserviceLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263008)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Services Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Services Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Service Ext. List: '"/>
<xsl:with-param name="sum" select="sum($serviceLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($serviceLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($serviceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($serviceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($serviceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Service Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263380"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263380)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($serviceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($serviceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($serviceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Service Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263009"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><!--xsl:choose>
    <xsl:when test="$_dsSub1/lineType_l = &#39;MODEL&#39; and $_dsMain1/subtotalGrandTotal_t_c!=&#39;noPricing&#39;">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose--><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'MODEL' and ($_dsSub1/extendedListPrice_l_c!='0.0' or $hasDonotPrint ) and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing') ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263009)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:choose>
                            <xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/topModel_l_c!='' and not ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE')">
                                <xsl:value-of select="concat($top_model_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:when test="(($_dsSub1/lineType_l = 'MODEL' or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/topModel_l_c = '') or ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE') ">
                                <xsl:value-of select="concat($part_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:otherwise>0</xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:choose>
                            <xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/topModel_l_c!='' and not ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE') ">
                                <xsl:value-of select="concat('Estimated ',$top_model_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:when test="(($_dsSub1/lineType_l = 'MODEL' or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/topModel_l_c = '') or ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE') ">
                                <xsl:value-of select="concat('Estimated ',$part_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:otherwise>0</xsl:otherwise>
                        </xsl:choose>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. List Price: '"/>
<xsl:with-param name="sum" select="extendedListPrice_l_c"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discounts"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263374"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263374)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263010"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263010)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263095"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/summaryPrintGrouping_l_c!='Trade-in' and ($_dsSub1/lineType_l = 'STD' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL'))">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263095)=1"><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica">Additional Parts</span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/summaryPrintGrouping_l_c = 'Trade-in'"><div><div><span style="font-weight: bold">Credits</span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/summaryPrintGrouping_l_c!='Trade-in' and $_dsSub1/lineType_l = 'SERVICE'"><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/coveredItem_l_c/@display_value"><xsl:value-of select="$_dsSub1/coveredItem_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/coveredItem_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263011"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263011)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 11pt" font-weight="bold" style="font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'SERVICES' or $_dsSub1/printGrouping_l_c = 'SERVICE'">
            <xsl:value-of select="'Services'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'HARDWARE'">
            <xsl:value-of select="'Hardware'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'SOFTWARE'">
            <xsl:value-of select="'Software'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'STORAGE'">
            <xsl:value-of select="'Storage'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'SUBSCRIPTION'">
            <xsl:value-of select="'Subscription'"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$_dsSub1/printGrouping_l_c"/>
        </xsl:otherwise>
    </xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263012"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( $_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y' and ( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'))">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263012)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263013"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263013)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263250"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'SERVICE' or $_dsSub1/lineType_l = 'STD' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y' and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263250)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/summaryPrintGrouping_l_c/@display_value"><xsl:value-of select="$_dsSub1/summaryPrintGrouping_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/summaryPrintGrouping_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><!--xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3']">
    <xsl:sort select="./@_document_number" order="ascending"/>
    <xsl:variable name="_dsSub1" select="."/>
    <xsl:choose>
		<xsl:when test="((FunctionUtil:startswith($_dsSub1/_group_sequence_number,$modelLoopGSNumber)) and ($_dsSub1/lineType_l = &#39;STD&#39; or $_dsSub1/lineType_l = &#39;SERVICE&#39;) and $_dsSub1/cPQVirtualPart_l_c != &#39;CSITEMCHILD&#39; and $_dsSub1/doNotPrintFlag_l_c != 'Y' and $_dsSub1/_line_bom_level &#60;= $bom_level)">
		
			 <tr >

<td   number-columns-spanned="7" style="border-top:1px solid #949494;padding:4px 0px;border-bottom:1px solid #949494;" >
 <component type="CELL" varname="CELL5557d64a-361c-490e-9070-a9af9c1ae635" /> 
</td>

</tr> 
    </xsl:when>
	</xsl:choose>
</xsl:for-each--><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3'and (FunctionUtil:startswith(./_group_sequence_number,$modelLoopGSNumber)) and (./lineType_l = 'STD' or ./lineType_l = 'SERVICE' or (./topModelLineID_l_c = '' and ./modelReferenceLineID_l_c = '' and ./cPQVirtualPart_l_c = 'CSITEMMODEL')) and ./cPQVirtualPart_l_c != 'CSITEMCHILD' and ./doNotPrintFlag_l_c != 'Y' and ./_line_bom_level &lt;= $bom_level]"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!--xsl:choose><xsl:when test="((FunctionUtil:startswith($_dsSub1/_group_sequence_number,$modelLoopGSNumber)) and ($_dsSub1/lineType_l = &#39;STD&#39; or $_dsSub1/lineType_l = &#39;SERVICE&#39;) and $_dsSub1/cPQVirtualPart_l_c != &#39;CSITEMCHILD&#39; and $_dsSub1/doNotPrintFlag_l_c != 'Y' and $_dsSub1/_line_bom_level &#60;= $bom_level)"--><xsl:variable name="serviceReferenceLineID" select="./serviceReferenceLineID_l_c"/><xsl:variable name="lineItemNumber" select="./lineItemNumber_l_c"/><xsl:variable name="coveredItem" select="./coveredItem_l_c"/><xsl:variable name="virtualLineID" select="./virtualLineID_l_c"/><xsl:variable name="ChildLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and  (lineItemNumber_l_c = $serviceReferenceLineID or item_l/_part_number = $coveredItem) and virtualLineID_l_c = $virtualLineID])"/><xsl:variable name="SerialNumber"><xsl:value-of select="$ChildLines/serialNumber_l_c"/></xsl:variable><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond47263493"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!='' or $SerialNumber!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263493)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
     <xsl:when test="$SerialNumber!='' and $_dsSub1/serialNumber_l_c =''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$SerialNumber"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <xsl:value-of select="$installedat"/>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsSub1/quickShipMessages_l_c = 'SSP for:'">
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="concat('SSP for:',$_dsSub1/coveredItem_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="$_dsSub1/quickShipMessages_l_c"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr><!--/xsl:when></xsl:choose--></xsl:for-each><xsl:variable name="cond47263014"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y' and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263014)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="($_dsSub1/lineType_l = 'Std' or $_dsSub1/lineType_l = 'STD' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y' and $_dsSub1/summaryPrintGrouping_l_c!='Trade-in'">
                        <xsl:choose>
                            <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                                <xsl:value-of select="'Additional Parts Sub Total :'"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="'Estimated Additional Parts Sub Total :'"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:when test="($_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/doNotPrintFlag_l_c!='Y' and $_dsSub1/summaryPrintGrouping_l_c!='Trade-in'">
                        <xsl:choose>
                            <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                                <xsl:value-of select="concat(coveredItem_l_c,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="concat('Estimated ',coveredItem_l_c,' Sub Total :')"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:when test="($_dsSub1/lineType_l = 'Std' or $_dsSub1/lineType_l = 'STD'or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/doNotPrintFlag_l_c!='Y' and $_dsSub1/summaryPrintGrouping_l_c = 'Trade-in'">
                        <xsl:choose>
                            <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                                <xsl:value-of select="'Credits Sub Total :'"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="'Estimated Credits Sub Total :'"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:otherwise>0</xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. List Price: '"/>
<xsl:with-param name="sum" select="extendedListPrice_l_c"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div>
<xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discounts"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263371"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263371)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div><!--</xsl:when>
    </xsl:choose>--></xsl:for-each></xsl:when></xsl:choose><!--</xsl:when></xsl:choose>-->
</xsl:for-each></xsl:when></xsl:choose><xsl:variable name="cond47263131"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><!--xsl:choose>
    <xsl:when test="//configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']='true'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose-->
<xsl:choose>
    <xsl:when test="//simplifiedPrinting_l_c='true'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263131)=1"><xsl:variable name="AddpartLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and _parent_doc_number=''])"/><xsl:for-each select="$AddpartLines"><xsl:variable name="_dsSub1" select="."/><xsl:if test="position()=1"><!-- this is a fake loop really, we only want it as a wrapper for these variables--><xsl:variable name="hasAddpartLines" select="boolean(count($AddpartLines) &gt; 0)"/><xsl:variable name="AddpartHardwareLines" select="exsl:node-set($AddpartLines[printGrouping_l_c = 'HARDWARE'])"/><xsl:variable name="hasAddpartHardwareLines" select="boolean(count($AddpartHardwareLines) &gt; 0)"/><xsl:variable name="AddpartSoftwareLines" select="exsl:node-set($AddpartLines[printGrouping_l_c = 'SOFTWARE'])"/><xsl:variable name="hasAddpartSoftwareLines" select="boolean(count($AddpartSoftwareLines) &gt; 0)"/><xsl:variable name="AddpartServicesLines" select="exsl:node-set($AddpartLines[printGrouping_l_c = 'SERVICES'])"/><xsl:variable name="hasAddpartServicesLines" select="boolean(count($AddpartServicesLines) &gt; 0)"/><xsl:variable name="AddpartStorageLines" select="exsl:node-set($AddpartLines[printGrouping_l_c = 'STORAGE'])"/><xsl:variable name="hasAddpartStorageLines" select="boolean(count($AddpartStorageLines) &gt; 0)"/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><xsl:variable name="cond47263420"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263420)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 11pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Additional Parts and Components</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263421"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263421)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.2pt; text-align: left"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 11pt"><span style="color: rgb(0, 0, 0); font-family: helvetica; font-size: 11pt"><span style="font-weight: bold"><span style="color: rgb(0, 0, 0); font-family: helvetica; font-size: 11pt">Hardware</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263422"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved'  or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasAddpartHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263422)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263423"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263423)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddpartHardwareLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263424"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartHardwareLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263424)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Hardware Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Hardware Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. List: '"/>
<xsl:with-param name="sum" select="sum($AddpartHardwareLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($AddpartHardwareLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartHardwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartHardwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartHardwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Hardware Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263450"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263450)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartHardwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartHardwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartHardwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263425"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263425)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 11pt; font-family: helvetica"><span style="font-weight: bold">Storage</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263426"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasAddpartStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263426)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263427"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263427)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddpartStorageLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263428"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartStorageLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263428)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Storage Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Storage Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Storage Ext. List: '"/>
<xsl:with-param name="sum" select="sum($AddpartStorageLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($AddpartStorageLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartStorageLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartStorageLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartStorageLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Storage Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263464"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263464)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartStorageLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartStorageLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartStorageLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Storage Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263429"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263429)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 11pt; font-family: helvetica"><span style="font-weight: bold">Software</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263430"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasAddpartSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263430)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263431"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263431)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddpartSoftwareLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!='' or $_dsSub1/quickShipMessages_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263432"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartSoftwareLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263432)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Software Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Software Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. List: '"/>
<xsl:with-param name="sum" select="sum($AddpartSoftwareLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($AddpartSoftwareLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartSoftwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartSoftwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartSoftwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Software Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263478"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263478)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartSoftwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartSoftwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartSoftwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Software Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263433"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartServicesLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263433)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 11pt; font-family: helvetica"><span style="font-weight: bold">Services</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263434"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasAddpartServicesLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263434)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263435"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartServicesLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263435)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddpartServicesLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263436"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartServicesLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263436)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Services Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Services Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Services Ext. List: '"/>
<xsl:with-param name="sum" select="sum($AddpartServicesLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($AddpartServicesLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartServicesLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartServicesLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartServicesLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Services Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263492"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263492)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartServicesLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartServicesLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartServicesLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Services Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:if></xsl:for-each></xsl:when></xsl:choose><xsl:variable name="cond47262802"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><!--xsl:choose>
    <xsl:when test="(//configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']='true') and $_dsMain1/keyStone_t_c != &#39;Yes&#39;">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose-->
<xsl:choose>
    <xsl:when test="//simplifiedPrinting_l_c='true' and $_dsMain1/keyStone_t_c != 'Yes' and $_dsMain1/serviceRenewal_t_c!='100% Renewals'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262802)=1"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'grandTotalOnlyListDiscountAndNetPricing'"><table-row><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">List Grand Total:</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$_dsMain1/quoteListPrice_t_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'12pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
</xsl:call-template></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'grandTotalOnlyListDiscountAndNetPricing'"><table-row><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Total Discount:</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="$_dsMain1/quoteCurrentDiscount_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="$_dsMain1/quoteCurrentDiscountSecondTier_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="$_dsMain1/quoteCurrentDiscountEndCustomer_t_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'12pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c!='noPricing'"><table-row><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold">Net Grand Total:</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="$_dsMain1/quoteNetPrice_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="$_dsMain1/quoteNetPriceSecondTier_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="$_dsMain1/quoteNetPriceEndCustomer_t_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'12pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
</xsl:call-template>
</div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:when></xsl:choose><xsl:variable name="cond47262801"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><!--xsl:choose>
    <xsl:when test="( //configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']='true') and $_dsMain1/keyStone_t_c != &#39;Yes&#39;">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose-->

<xsl:choose>
    <xsl:when test="(//simplifiedPrinting_l_c='true') and $_dsMain1/keyStone_t_c != 'Yes' and $_dsMain1/serviceRenewal_t_c!='100% Renewals'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262801)=1">
<div page-break-before="always"/></xsl:when></xsl:choose><div space-after="0.1in" space-after.precedence="force"/><div><div><span style="font-weight: bold">Detailed Section</span></div></div><div space-after="0.1in" space-after.precedence="force" keep-with-previous.within-page="1" keep-with-next.within-page="1"/><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='2' and downstreamFulfillment_l_c = 'SMP' and renewalIndicator_l_c!='Y' and $_dsMain1/keyStone_t_c!='Yes' and ((_parent_doc_number = '' and cPQVirtualPart_l_c != 'ROOT') or cPQVirtualPart_l_c = 'SUBROOT')]">
<xsl:sort select="./@_document_number" order="ascending"/>
<xsl:variable name="_dsSub1" select="."/>
<!--shansen unnecessary conditioning
<xsl:choose><xsl:when test="($_dsSub1/_parent_doc_number = &#39;&#39; and  $_dsSub1/cPQVirtualPart_l_c != &#39;ROOT&#39;) or ($_dsSub1/cPQVirtualPart_l_c = &#39;SUBROOT&#39;)">-->
<!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content -->
<xsl:variable name="proposalLoopDocNumber" select="./_document_number"/>
<xsl:variable name="proposalLoopGsNumber" select="./_group_sequence_number"/>
<xsl:variable name="parentLoopDocNumber" select="./_parent_doc_number"/>
<xsl:variable name="AutoRenew" select="./autoRenew_l_c"/>
<xsl:variable name="BillingFrequency" select="./billingFrequency_l_c"/>
<xsl:variable name="SelectedTech" select="./selectedTechnologies_l_c"/>
<xsl:variable name="parentConfigName" select="./virtualConfigName_l_c"/>
<xsl:variable name="smplines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and _parent_doc_number = $proposalLoopDocNumber and oRCL_ABO_ActionCode_l! = 'DELETE' and downstreamFulfillment_l_c = 'SMP' ])"/>
<xsl:variable name="serviceDuration"><xsl:value-of select="$smplines/serviceDuration_l_c"/></xsl:variable>
<!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content -->
<xsl:choose><xsl:when test="$_dsSub1/downstreamFulfillment_l_c = 'SMP'"><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 12pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="FunctionUtil:startswith($parentConfigName,'Config#')">
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <!--xsl:value-of select="concat('Config # ',$parentConfigName)" /-->
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Configuration Comments:<xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/downstreamFulfillment_l_c = 'SMP'"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="550.0px"/><table-column column-width="100.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" number-columns-spanned="4" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/model_l/_model_name/@display_value"><xsl:value-of select="$_dsSub1/model_l/_model_name/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/model_l/_model_name"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend' or $_dsSub1/assetType_l_c = 'Renew'"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 10pt"><span style="color: #000000; font-family: Helvetica">Amend</span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 10pt">Renew</span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263111"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263111)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend' or $_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Subscription Details</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="line-height: 12pt; text-align: center"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Add'l Qty</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></xsl:when></xsl:choose><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3']"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:choose><xsl:when test="$_dsSub1/_parent_doc_number = $proposalLoopDocNumber  and $_dsSub1/oRCL_ABO_ActionCode_l! = 'DELETE' and ($_dsSub1/downstreamFulfillment_l_c = 'SMP')"><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><xsl:variable name="modelLoopDocNumber12" select="./_document_number"/><xsl:variable name="modelLoopGSNumber12" select="./_group_sequence_number"/><xsl:variable name="AutoRenewal" select="./autoRenew_l_c"/><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="550.0px"/><table-column column-width="100.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend' or $_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Subscription ID:</span> <xsl:choose><xsl:when test="$_dsSub1/subscriptionNumber_l_c/@display_value"><xsl:value-of select="$_dsSub1/subscriptionNumber_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/subscriptionNumber_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="line-height: 8pt; text-align: left"><span style="font-size: 8pt"><span style="font-weight: bold">Amendment Start Date</span><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold">:</span> <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/addOnStartDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'addOnStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Start Date of Extension:</span><xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Existing Subscription End Date:</span> <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><!--fo:block font-family="Helvetica" font-size="8pt" text-align="left" line-height="12pt">
    <span style="font-weight: bold"><xsl:value-of select="'Amendment Duration: '"/></span>
    <xsl:value-of select="concat(format-number($_dsSub1/amendmentDuration_l_c, '#'),' ','Days')"/>    
</fo:block-->
	<div>
		<div style="line-height: 12pt; text-align: left">
			<span style="color: #000000; font-size: 12pt; font-family: Helvetica">
				<span style="font-size: 8pt; font-family: helvetica">
					<span style="font-weight: bold"><xsl:value-of select="'Amendment Duration: '"/></span>
    					<xsl:value-of select="concat(format-number($_dsSub1/amendmentDuration_l_c, '#'),' ','Days')"/>   				
				</span>
			</span>
		</div>
	</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Previous Total Quantity:</span><xsl:choose><xsl:when test="$_dsSub1/assetOriginalQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/assetOriginalQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/assetOriginalQuantity_l_c))='NaN' or not(contains($_dsSub1/assetOriginalQuantity_l_c, '.') or contains($_dsSub1/assetOriginalQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/assetOriginalQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/assetOriginalQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/assetOriginalQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/assetOriginalQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 11pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span>Extension Subscription End Date:</span></span><span> </span><xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/><span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left; line-height: 12pt">
    <span style="font-weight: bold"><xsl:value-of select="'New Total Quantity: '"/></span>
    <xsl:choose>
        <xsl:when test="$_dsSub1/assetType_l_c = 'Amend' and $_dsSub1/assetAmendedQty_l_c!=''"><xsl:value-of select="$_dsSub1/assetAmendedQty_l_c"/></xsl:when>
        <xsl:otherwise><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:otherwise>
    </xsl:choose>  
</div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: center; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$_dsSub1/assetType_l_c = 'Amend' and $_dsSub1/assetAmendedQty_l_c!=''"><xsl:value-of select="$_dsSub1/assetAmendedQty_l_c"/></xsl:when>
        <xsl:otherwise><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:otherwise>
    </xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><!--fo:block text-align = "center" font-size="8pt" font-family="Helvetica">
<xsl:value-of select="$_dsSub1/extendedQuantity_l_c - $_dsSub1/assetOriginalQuantity_l_c" />
</fo:block-->
<div style="text-align: center; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="($_dsSub1/assetOriginalQuantity_l_c != '' and $_dsSub1/assetAmendedQty_l_c !='')">
            <xsl:value-of select="$_dsSub1/assetAmendedQty_l_c - $_dsSub1/assetOriginalQuantity_l_c"/>
        </xsl:when>
        <xsl:otherwise><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="monthlyUnitListPriceFloat_c * serviceDuration_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="monthlyUnitNetPricefloat_l_c * serviceDuration_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'2'"/>
</xsl:call-template-->

<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" number-columns-spanned="8" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="'1' = '2'"><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="font-size: 8pt; font-family: helvetica">Product Description:</span></span></div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_desc/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_desc/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_desc"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<span style="font-weight: bold"><xsl:value-of select="'Product Description: '"/></span>
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td></tr></tbody></table></div></xsl:when></xsl:choose></xsl:for-each><!-- Added condition of Asset Type for new,renew,amend,none --><xsl:choose><xsl:when test="$_dsSub1/downstreamFulfillment_l_c = 'SMP'"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="450.0px"/><table-column column-width="300.0px"/><table-column column-width="300.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" number-columns-spanned="4" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/selectedTechnologies_l_c!=''"><div><!--xsl:variable name="SelectTechnology" select="translate($SelectedTech,'~',',  ')"/>
<div style="font-family: Helvetica; font-size: 8pt; text-align: left" >
    <span style="font-weight: bold"><xsl:value-of select="'Selected Technologies: '"/></span>
    <xsl:value-of select="$SelectTechnology"/>
</fo:block-->
<div style="font-family: Helvetica; font-size: 8pt; text-align: left">
<span style="font-weight: bold"><xsl:value-of select="'Selected Technologies: '"/></span>
<xsl:for-each xmlns:str="http://exslt.org/strings" select="str:split($SelectedTech, '~')">
    <xsl:choose>
		<xsl:when test="position() != last()">
			<xsl:value-of select="concat(., ', ')"/>
		</xsl:when>
		<xsl:otherwise>
			<xsl:value-of select="."/>
		</xsl:otherwise>
	</xsl:choose>
</xsl:for-each>
</div></div></xsl:when></xsl:choose><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">
<xsl:choose>
    <xsl:when test="$_dsSub1/overage_l_c = 'Yes'">
        <span style="font-weight: bold"><xsl:value-of select="'Burst Opt-In: '"/></span>
        <xsl:value-of select="'Yes'"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Burst Opt-In: '"/></span>
        <xsl:value-of select="'No'"/>
    </xsl:otherwise>
</xsl:choose>
</div></div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left">
    <span style="font-weight: bold"><xsl:value-of select="'Billing Frequency: '"/></span>
    <xsl:value-of select="$BillingFrequency"/>
</div></div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left">
    <span style="font-weight: bold"><xsl:value-of select="'Auto Renewal: '"/></span>
    <xsl:value-of select="$AutoRenew"/>
</div></div><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="align" select="'left'"/>
<xsl:with-param name="label" select="'Total Contract Value: '"/>
<xsl:with-param name="sum" select="extendedNetPrice_l_c"/>
</xsl:call-template></div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left">
    <span style="font-weight: bold"><xsl:value-of select="'Duration: '"/></span>
    <xsl:value-of select="$serviceDuration"/>
   <xsl:choose>
        <xsl:when test="$serviceDuration = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="' Months'"/>   
        </xsl:otherwise>
    </xsl:choose>
</div></div></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/overage_l_c = 'Yes'"><table-row><table-cell cpq-cell="1" number-columns-spanned="4" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span background-style="color: #ffffff; font-family: helvetica" text-align="left"><span style="font-family: helvetica">Subscription Terms</span></span></span></span></span></span></div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">This subscription is configured to allow consumption bursting. The Cloud Insights customer environment will allow customer administrators to consume unlimited Managed Units. Any</span><span background-style="color: #ffffff; font-family: Helvetica" text-align="left"></span><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">amount consumed above the quantity in this configuration will be invoiced monthly in arrears at the same unit net price on this quote</span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263207"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263207)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Subscription Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Subscription Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. List Price: '"/>
<xsl:with-param name="sum" select="extendedListPrice_l_c"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discounts"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263130"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263130)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price:'"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:when></xsl:choose><!--</xsl:when></xsl:choose>-->
</xsl:for-each><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='2'  and downstreamFulfillment_l_c!='SMP' and renewalIndicator_l_c!='Y' and $_dsMain1/keyStone_t_c!='Yes' and (_parent_doc_number = '' or cPQVirtualPart_l_c = 'ROOT' or cPQVirtualPart_l_c = 'SUBROOT')]">
<xsl:sort select="./@_document_number" order="ascending"/>
<xsl:variable name="_dsSub1" select="."/>
<!--shansen unnecessary conditioning
<xsl:choose><xsl:when test="($_dsSub1/_parent_doc_number = &#39;&#39; and  $_dsSub1/cPQVirtualPart_l_c != &#39;ROOT&#39;) or ($_dsSub1/cPQVirtualPart_l_c = &#39;SUBROOT&#39;)">-->
<!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content -->
<xsl:variable name="proposalLoopDocNumber" select="./_document_number"/>
<xsl:variable name="proposalLoopGsNumber" select="./_group_sequence_number"/>
<xsl:variable name="parentLoopDocNumber" select="./_parent_doc_number"/>
<xsl:variable name="parentConfigName" select="./virtualConfigName_l_c"/>
<xsl:variable name="installedat" select="concat(./installedAtAddress_l_c,' ',./installedAtStateProvince_l_c,' ',./installedAtCountry_l_c,' ', ./installedAtPostalCode_l_c)"/>
<xsl:variable name="svcAddres" select="concat(/transaction/data_xml/document[_document_number = $parentLoopDocNumber]/installedAtAddress_l_c,' ',/transaction/data_xml/document[_document_number = $parentLoopDocNumber]/installedAtStateProvince_l_c,' ',/transaction/data_xml/document[_document_number = $parentLoopDocNumber]/installedAtCountry_l_c,' ',/transaction/data_xml/document[_document_number = $parentLoopDocNumber]/installedAtPostalCode_l_c)"/>

<!--xsl:variable name="SimplifiedFlag">
			<xsl:choose>
				<xsl:when test="./configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']/@display_value">
					<xsl:value-of select="./configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']/@display_value"/>
				</xsl:when>
				<xsl:otherwise>
					<xsl:value-of select="./configuration_l/_config_attr_info/attribute[@var_name='simplifiedPrinting']"/>
				</xsl:otherwise>
			</xsl:choose>
</xsl:variable-->
<!--xsl:variable name="SimplifiedFlag" select="./simplifiedPrinting_l_c"/-->
<xsl:variable name="SimplifiedFlag">
			<xsl:choose>
				<xsl:when test="cPQVirtualPart_l_c='SUBROOT'">
					<xsl:value-of select="/transaction/data_xml/document[_document_number = $parentLoopDocNumber]/simplifiedPrinting_l_c"/>
				</xsl:when>
				<xsl:otherwise>
					<xsl:value-of select="./simplifiedPrinting_l_c"/>
				</xsl:otherwise>
			</xsl:choose>
</xsl:variable>
<!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content -->
<xsl:choose><xsl:when test="$_dsSub1/virtualConfigName_l_c!=''"><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 12pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="FunctionUtil:startswith($parentConfigName,'Config#')">
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <!--xsl:value-of select="concat('Config # ',$parentConfigName)" /-->
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Configuration Comments:<xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><div space-after="0.1in" space-after.precedence="force"/><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3' and _parent_doc_number = $proposalLoopDocNumber and downstreamFulfillment_l_c != 'SMP']"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!--<xsl:choose> shansen - no need to check this after looping
        <xsl:when test="($_dsSub1/_parent_doc_number = $proposalLoopDocNumber or $_dsSub1/_parent_doc_number = $parentLoopDocNumber)">-><!-  CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><xsl:variable name="modelLoopDocNumber" select="./_document_number"/><xsl:variable name="modelLoopGSNumber" select="./_group_sequence_number"/><xsl:variable name="lineNumber" select="./lineItemNumber_l_c"/><xsl:variable name="bom_level" select="./_line_bom_level"/><xsl:variable name="top_model_name" select="./topModel_l_c"/><xsl:variable name="part_name" select="./item_l/_part_number"/><xsl:variable name="passbundlechild"><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/bundleParent_l_c='true'">
                    1
                </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="allSubLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber  or ((modelReferenceLineID_l_c = $lineNumber  or serviceReferenceLineID_l_c = $lineNumber) and  _line_bom_level &gt; $bom_level )) and lineType_l != 'MODEL'])"/><xsl:variable name="hardwareLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware')]"/><xsl:variable name="hasHardwareLines" select="boolean(count($hardwareLines) &gt; 0)"/><xsl:variable name="SoftwareLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SOFTWARE' )]"/><xsl:variable name="hasSoftwareLines" select="boolean(count($SoftwareLines) &gt; 0)"/><xsl:variable name="subscriptionLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SUBSCRIPTION')]"/><xsl:variable name="hassubscriptionLines" select="boolean(count($subscriptionLines) &gt; 0)"/><xsl:variable name="serviceLines" select="$allSubLines[bundleChild_l_c = 'false' and cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and (printGrouping_l_c = 'SERVICE' or printGrouping_l_c = 'SERVICES' or printGrouping_l_c = 'Additional Service')]"/><xsl:variable name="hasserviceLines" select="boolean(count($serviceLines) &gt; 0)"/><xsl:variable name="platformLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Platform' or summaryPrintGrouping_l_c = 'PLATFORM')]"/><xsl:variable name="hasplatformLines" select="boolean(count($platformLines) &gt; 0)"/><xsl:variable name="capacityLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM' or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Capacity')]"/><xsl:variable name="hascapacityLines" select="boolean(count($capacityLines) &gt; 0)"/><xsl:variable name="networkingLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM' or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Networking' or summaryPrintGrouping_l_c = 'Network Adapters')]"/><xsl:variable name="hasnetworkingLines" select="boolean(count($networkingLines) &gt; 0)"/><xsl:variable name="switchesLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Switches')]"/><xsl:variable name="hasswitchesLines" select="boolean(count($switchesLines) &gt; 0)"/><xsl:variable name="BridgesLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM' or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Bridges')]"/><xsl:variable name="hasBridgessLines" select="boolean(count($BridgesLines) &gt; 0)"/><xsl:variable name="dataNodesLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = 'Data Compute Node')]"/><xsl:variable name="hasdataNodesLines" select="boolean(count($dataNodesLines) &gt; 0)"/><xsl:variable name="otherhardwareLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and (bundleChild_l_c = 'false' or  $passbundlechild = '1' ) and (printGrouping_l_c = 'HARDWARE' or printGrouping_l_c = 'PLATFORM'  or printGrouping_l_c = 'Hardware') and (summaryPrintGrouping_l_c = '' or summaryPrintGrouping_l_c = 'None')]"/><xsl:variable name="hasotherHardwareLines" select="boolean(count($otherhardwareLines) &gt; 0)"/><xsl:variable name="AddserviceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SERVICE' or printGrouping_l_c = 'SERVICES' or printGrouping_l_c = 'Additional Service') and (summaryPrintGrouping_l_c = 'Additional Service')]"/><xsl:variable name="hasaddserviceLines" select="boolean(count($AddserviceLines) &gt; 0)"/><xsl:variable name="ProfserviceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c= 'SERVICE' or printGrouping_l_c = 'SERVICES' or printGrouping_l_c = 'Additional Service') and (summaryPrintGrouping_l_c = 'Professional Services')]"/><xsl:variable name="hasprofserviceLines" select="boolean(count($ProfserviceLines) &gt; 0)"/><xsl:variable name="otherserviceLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'SERVICE' or printGrouping_l_c = 'SERVICES' or printGrouping_l_c = 'Additional Service') and (summaryPrintGrouping_l_c = 'SERVICES' or summaryPrintGrouping_l_c = 'Services' or summaryPrintGrouping_l_c = '' or summaryPrintGrouping_l_c = 'None')]"/><xsl:variable name="hasothserviceLines" select="boolean(count($otherserviceLines) &gt; 0)"/><xsl:variable name="DonotPrint" select="$allSubLines[doNotPrintFlag_l_c != 'Y']"/><xsl:variable name="hasDonotPrint" select="boolean(count($DonotPrint) &gt; 0)"/><xsl:variable name="StorageLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and (printGrouping_l_c = 'STORAGE')]"/><xsl:variable name="hasStorageLines" select="boolean(count($StorageLines) &gt; 0)"/><xsl:variable name="StorageplatformLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and ( printGrouping_l_c = 'STORAGE' ) and (summaryPrintGrouping_l_c = 'Platform' or summaryPrintGrouping_l_c = 'PLATFORM')]"/><xsl:variable name="hasStorageplatformLines" select="boolean(count($StorageplatformLines) &gt; 0)"/><xsl:variable name="StoragecapacityLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and ( printGrouping_l_c = 'STORAGE' ) and (summaryPrintGrouping_l_c = 'Capacity')]"/><xsl:variable name="hasStoragecapacityLines" select="boolean(count($StoragecapacityLines) &gt; 0)"/><xsl:variable name="otherStorageLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and (bundleChild_l_c = 'false' or  $passbundlechild = '1' ) and ( printGrouping_l_c = 'STORAGE') and not(summaryPrintGrouping_l_c = 'Platform' or summaryPrintGrouping_l_c = 'PLATFORM' or summaryPrintGrouping_l_c = 'Capacity')]"/><xsl:variable name="hasotherStorageLines" select="boolean(count($otherStorageLines) &gt; 0)"/><xsl:variable name="OSLines" select="$allSubLines[cPQVirtualPart_l_c != 'CSITEMCHILD' and doNotPrintFlag_l_c != 'Y' and bundleChild_l_c = 'false' and ( printGrouping_l_c = 'OS')]"/><xsl:variable name="hasOSLines" select="boolean(count($OSLines) &gt; 0)"/><xsl:variable name="serialNumberList"><xsl:variable name="tmpSerialNumberList"><xsl:for-each select="./_commerce_array_set_attr_info[@setName='serialNumber_Array_l_c']/_array_set_row"><xsl:sort select="./@_row_number" data-type="number" order="ascending"/><xsl:if test="./attribute[@var_name='serialNumber_serialNumber_Array_l_c']!=''"><xsl:choose><xsl:when test="./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!='' or ./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!=null"><xsl:value-of select="concat(./attribute[@var_name='serialNumber_serialNumber_Array_l_c'],', ',./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c'], ', ')"/></xsl:when><xsl:otherwise><xsl:value-of select="concat(./attribute[@var_name='serialNumber_serialNumber_Array_l_c'],', ')"/></xsl:otherwise></xsl:choose></xsl:if></xsl:for-each></xsl:variable><xsl:value-of select="substring($tmpSerialNumberList, 1,string-length($tmpSerialNumberList)-2)"/></xsl:variable><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'MODEL') and $_dsSub1/extendedListPrice_l_c!='0.0'"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 12pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE') or (($_dsSub1/lineType_l = 'MODEL' or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/topModel_l_c = '')">
                        <xsl:value-of select="$_dsSub1/item_l/_part_number"/>
                    </xsl:when>
                    <xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/topModel_l_c!=''">
                        <xsl:value-of select="$_dsSub1/topModel_l_c"/>
                    </xsl:when>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262718"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasHardwareLines or $hasotherHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262718)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 11pt"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Hardware</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262699"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and ($hasHardwareLines or $hasotherHardwareLines)">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262699)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262706"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hardwareLines or $hasotherHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262706)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$otherhardwareLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262728"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasplatformLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262728)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="font-size: 8pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Platform</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$platformLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262729"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hascapacityLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262729)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Capacity</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$capacityLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262730"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasnetworkingLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262730)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Networking</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$networkingLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond118785889"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasdataNodesLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond118785889)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Data Compute Node</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$dataNodesLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262731"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasswitchesLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262731)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="font-size: 8pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Switches</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$switchesLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262732"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasBridgessLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262732)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Bridges</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$BridgesLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262714"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasHardwareLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262714)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Hardware Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Hardware Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. List: '"/>
<xsl:with-param name="sum" select="sum($hardwareLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($hardwareLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($hardwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($hardwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($hardwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Hardware Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263341"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263341)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($hardwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($hardwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($hardwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656013"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656013)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">Storage</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656014"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656014)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656015"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656015)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$otherStorageLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond58656016"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStorageplatformLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656016)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="font-size: 8pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Platform</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$StorageplatformLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond58656017"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStoragecapacityLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656017)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Capacity</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$StoragecapacityLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond58656018"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasStorageLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656018)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Storage Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Storage Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Storage Ext. List: '"/>
<xsl:with-param name="sum" select="sum($StorageLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($StorageLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($StorageLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($StorageLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($StorageLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Storage Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond58656046"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656046)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($StorageLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($StorageLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($StorageLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Storage Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262719"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262719)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">Software</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262720"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262720)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262721"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262721)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263254"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263254)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Software</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$SoftwareLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
    </xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <!--xsl:value-of select="$installedat" /-->
    <xsl:choose>
    <xsl:when test="$installedat='   ' or $installedat=null">
        <xsl:value-of select="$svcAddres"/>
    </xsl:when>
    <xsl:otherwise>        
        <xsl:value-of select="$installedat"/>   
    </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262715"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasSoftwareLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262715)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Software Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Software Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Software Ext. List: '"/>
<xsl:with-param name="sum" select="sum($SoftwareLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($SoftwareLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($SoftwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($SoftwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($SoftwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Software Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263344"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263344)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($SoftwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($SoftwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($SoftwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Software Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656047"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOSLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656047)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">OS</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656048"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasOSLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656048)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656049"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOSLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656049)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond58656050"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOSLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656050)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">OS</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$OSLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
    </xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <!--xsl:value-of select="$installedat" /-->
    <xsl:choose>
    <xsl:when test="$installedat='   ' or $installedat=null">
        <xsl:value-of select="$svcAddres"/>
    </xsl:when>
    <xsl:otherwise>        
        <xsl:value-of select="$installedat"/>   
    </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond58656051"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOSLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656051)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'OS Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated OS Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'OS Ext. List: '"/>
<xsl:with-param name="sum" select="sum($OSLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($OSLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($OSLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($OSLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($OSLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'OS Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond58656069"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond58656069)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($OSLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($OSLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($OSLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'OS Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262722"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262722)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">Subscription</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262723"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hassubscriptionLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262723)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262724"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262724)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263255"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263255)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="'1' = '2'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Subscription</span></span></span></span></div></div></xsl:when></xsl:choose><div><div style="text-align: left; font-size: 8pt" font-weight="bold" style="font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$subscriptionLines/summaryPrintGrouping_l_c = 'SOFTWARE'">
            <xsl:value-of select="'Software'"/>
        </xsl:when>
        <xsl:when test="$subscriptionLines/summaryPrintGrouping_l_c = 'SUBSCRIPTION'">
            <xsl:value-of select="'Subscription'"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$subscriptionLines/summaryPrintGrouping_l_c"/>
        </xsl:otherwise>
    </xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$subscriptionLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
    </xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <!--xsl:value-of select="$installedat" /-->
    <xsl:choose>
    <xsl:when test="$installedat='   ' or $installedat=null">
        <xsl:value-of select="$svcAddres"/>
    </xsl:when>
    <xsl:otherwise>        
        <xsl:value-of select="$installedat"/>   
    </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262716"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hassubscriptionLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262716)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved'  or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Subscription Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Subscription Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Subscription Ext. List: '"/>
<xsl:with-param name="sum" select="sum($subscriptionLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($subscriptionLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($subscriptionLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($subscriptionLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($subscriptionLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Subscription Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263347"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263347)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($subscriptionLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($subscriptionLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($subscriptionLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Subscription Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262725"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasserviceLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262725)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 11pt; font-family: helvetica">Services</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262726"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasserviceLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262726)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262727"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasserviceLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262727)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262743"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasothserviceLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262743)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Services</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$otherserviceLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:variable name="parentdocnum" select="./_document_number"/><xsl:variable name="ChildServiceLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and cPQVirtualPart_l_c = 'CSITEMCHILD' and _parent_doc_number = $parentdocnum])"/><xsl:variable name="dynamicCatCode"><xsl:value-of select="$ChildServiceLines/dynamicCatCode_l_c"/></xsl:variable><xsl:variable name="legacyCatCode"><xsl:value-of select="$ChildServiceLines/item_l/_part_custom_field463"/></xsl:variable><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/catCodes_t_c = 'dynamic'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$dynamicCatCode!= ''">
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$dynamicCatCode"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
            <!--xsl:value-of select="concat($_dsSub1/item_l/_part_desc,' [',' Disocunt Cat: ',$dynamicCatCode,']')" /-->
        </xsl:when>
        <xsl:otherwise>
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
            <!--xsl:value-of select="concat($_dsSub1/item_l/_part_desc,' [',' Disocunt Cat: ',$_dsSub1/dynamicCatCode_l_c,']')" /-->
        </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$legacyCatCode!= ''">
           
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$legacyCatCode"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
        </xsl:when>
        <xsl:otherwise>
            
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
        </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
    </xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <!--xsl:value-of select="$installedat" /-->
    <xsl:choose>
    <xsl:when test="$installedat='   ' or $installedat=null">
        <xsl:value-of select="$svcAddres"/>
    </xsl:when>
    <xsl:otherwise>        
        <xsl:value-of select="$installedat"/>   
    </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsSub1/quickShipMessages_l_c = 'SSP for:'">
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="concat('SSP for:',$_dsSub1/coveredItem_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="$_dsSub1/quickShipMessages_l_c"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262744"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasaddserviceLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262744)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Additional Services</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddserviceLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:variable name="parentdocnum" select="./_document_number"/><xsl:variable name="ChildServiceLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and cPQVirtualPart_l_c = 'CSITEMCHILD' and _parent_doc_number = $parentdocnum])"/><xsl:variable name="dynamicCatCode"><xsl:value-of select="$ChildServiceLines/dynamicCatCode_l_c"/></xsl:variable><xsl:variable name="legacyCatCode"><xsl:value-of select="$ChildServiceLines/item_l/_part_custom_field463"/></xsl:variable><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><!--fo:block text-align = "left" font-size="8pt" font-family="Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc" />
</div>
<div text-align = "left" style="font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = &#39;legacy&#39;">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')" /></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463" />
        <span style="font-weight: bold"><xsl:value-of select="']'" /></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')" /></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c" />
        <span style="font-weight: bold"><xsl:value-of select="']'" /></span>
    </xsl:otherwise>
</xsl:choose>
</fo:block-->

<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:choose>
            <xsl:when test="$legacyCatCode!= ''">
                <xsl:value-of select="$legacyCatCode"/>
            </xsl:when>
            <xsl:otherwise>    
                <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
            </xsl:otherwise>
        </xsl:choose>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:choose>
            <xsl:when test="$dynamicCatCode!= ''">
                <xsl:value-of select="$dynamicCatCode"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
            </xsl:otherwise>
        </xsl:choose>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
    </xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <!--xsl:value-of select="$installedat" /-->
    <xsl:choose>
    <xsl:when test="$installedat='   ' or $installedat=null">
        <xsl:value-of select="$svcAddres"/>
    </xsl:when>
    <xsl:otherwise>        
        <xsl:value-of select="$installedat"/>   
    </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsSub1/quickShipMessages_l_c = 'SSP for:'">
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="concat('SSP for:',$_dsSub1/coveredItem_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="$_dsSub1/quickShipMessages_l_c"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262745"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasprofserviceLines and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262745)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Professional Services</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$ProfserviceLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$serialNumberList"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
    </xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <!--xsl:value-of select="$installedat" /-->
    <xsl:choose>
    <xsl:when test="$installedat='   ' or $installedat=null">
        <xsl:value-of select="$svcAddres"/>
    </xsl:when>
    <xsl:otherwise>        
        <xsl:value-of select="$installedat"/>   
    </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47262717"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasserviceLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262717)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Services Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Services Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Service Ext. List: '"/>
<xsl:with-param name="sum" select="sum($serviceLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($serviceLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($serviceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($serviceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($serviceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Service Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263350"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263350)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($serviceLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($serviceLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($serviceLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Service Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262749"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/lineType_l = 'MODEL' and ($_dsSub1/extendedListPrice_l_c!='0.0' or $hasDonotPrint ) and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing') ">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262749)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:choose>
                            <xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/topModel_l_c!='' and not ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE') ">
                                <xsl:value-of select="concat($top_model_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:when test="(($_dsSub1/lineType_l = 'MODEL' or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/topModel_l_c = '') or ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE')">
                                <xsl:value-of select="concat($part_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:otherwise>0</xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:choose>
                            <xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/topModel_l_c!='' and not ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE') ">
                                <xsl:value-of select="concat('Estimated ',$top_model_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:when test="(($_dsSub1/lineType_l = 'MODEL' or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/topModel_l_c = '') or ($_dsSub1/configType_l_c = 'ADD ON' and $_dsSub1/hasAddOnStorage_l_c = 'STORAGE')">
                                <xsl:value-of select="concat('Estimated ',$part_name,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:otherwise>0</xsl:otherwise>
                        </xsl:choose>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. List Price: '"/>
<xsl:with-param name="sum" select="extendedListPrice_l_c"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discounts"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263353"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263353)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262710"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262710)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262752"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/summaryPrintGrouping_l_c!='Trade-in' and ($_dsSub1/lineType_l = 'STD' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL'))">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262752)=1"><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica">Additional Parts</span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/summaryPrintGrouping_l_c = 'Trade-in'"><div><div><span style="font-weight: bold">Credits</span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/summaryPrintGrouping_l_c!='Trade-in' and $_dsSub1/lineType_l = 'SERVICE'"><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/coveredItem_l_c/@display_value"><xsl:value-of select="$_dsSub1/coveredItem_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/coveredItem_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262751"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262751)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 11pt" font-weight="bold" style="font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'SERVICES' or $_dsSub1/printGrouping_l_c = 'SERVICE'">
            <xsl:value-of select="'Services'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'HARDWARE'">
            <xsl:value-of select="'Hardware'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'SOFTWARE'">
            <xsl:value-of select="'Software'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'STORAGE'">
            <xsl:value-of select="'Storage'"/>
        </xsl:when>
        <xsl:when test="$_dsSub1/printGrouping_l_c = 'SUBSCRIPTION'">
            <xsl:value-of select="'Subscription'"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$_dsSub1/printGrouping_l_c"/>
        </xsl:otherwise>
    </xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262712"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="( $_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL') ) and $_dsSub1/doNotPrintFlag_l_c!='Y' and ( not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'))">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262712)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262711"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262711)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263251"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y' and $SimplifiedFlag != 'false'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263251)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/summaryPrintGrouping_l_c/@display_value"><xsl:value-of select="$_dsSub1/summaryPrintGrouping_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/summaryPrintGrouping_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3'and (FunctionUtil:startswith(./_group_sequence_number,$modelLoopGSNumber)) and (./lineType_l = 'STD' or ./lineType_l = 'SERVICE'  or (./topModelLineID_l_c = '' and ./modelReferenceLineID_l_c = '' and ./cPQVirtualPart_l_c = 'CSITEMMODEL')) and ./cPQVirtualPart_l_c != 'CSITEMCHILD' and ./doNotPrintFlag_l_c != 'Y' and ./_line_bom_level &lt;= $bom_level]"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!--xsl:choose><xsl:when test="((FunctionUtil:startswith($_dsSub1/_group_sequence_number,$modelLoopGSNumber)) and ($_dsSub1/lineType_l = &#39;STD&#39; or $_dsSub1/lineType_l = &#39;SERVICE&#39;) and $_dsSub1/cPQVirtualPart_l_c != &#39;CSITEMCHILD&#39; and $_dsSub1/doNotPrintFlag_l_c != 'Y' and $_dsSub1/_line_bom_level &#60;= $bom_level)"--><xsl:variable name="serviceReferenceLineID" select="./serviceReferenceLineID_l_c"/><xsl:variable name="lineItemNumber" select="./lineItemNumber_l_c"/><xsl:variable name="coveredItem" select="./coveredItem_l_c"/><xsl:variable name="virtualLineID" select="./virtualLineID_l_c"/><xsl:variable name="ChildLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and  (lineItemNumber_l_c = $serviceReferenceLineID or item_l/_part_number = $coveredItem) and virtualLineID_l_c = $virtualLineID])"/><xsl:variable name="SerialNumber"><xsl:value-of select="$ChildLines/serialNumber_l_c"/></xsl:variable><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond47263415"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/serialNumber_l_c!='' or $SerialNumber!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263415)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
    <xsl:when test="$_dsSub1/serialNumber_l_c!='' and $_dsSub1/addOnOriginalLineNumberSearch_l_c = ''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$_dsSub1/serialNumber_l_c"/>
    </xsl:when>
    <xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''">
        <span style="font-weight: bold"><xsl:value-of select="'Linked Quote:'"/></span>
        <xsl:value-of select="concat($_dsSub1/addOnOriginalQuoteNumberSearch_l_c,'-',$_dsSub1/addOnOriginalLineNumberSearch_l_c)"/>
    </xsl:when>
    <xsl:when test="$SerialNumber!='' and $_dsSub1/serialNumber_l_c =''">
        <span style="font-weight: bold"><xsl:value-of select="'Serial Number:'"/></span>
        <xsl:value-of select="$SerialNumber"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, $printDateFormat, $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, $printDateFormat , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
    </xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <!--xsl:value-of select="$installedat" /-->
    <xsl:choose>
    <xsl:when test="$installedat='   ' or $installedat=null">
        <xsl:value-of select="$svcAddres"/>
    </xsl:when>
    <xsl:otherwise>        
        <xsl:value-of select="$installedat"/>   
    </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsSub1/quickShipMessages_l_c = 'SSP for:'">
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="concat('SSP for:',$_dsSub1/coveredItem_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="$_dsSub1/quickShipMessages_l_c"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr><!--/xsl:when></xsl:choose--></xsl:for-each><xsl:variable name="cond47262750"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y' and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262750)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="($_dsSub1/lineType_l = 'Std' or $_dsSub1/lineType_l = 'STD' or ($_dsSub1/topModelLineID_l_c = '' and $_dsSub1/modelReferenceLineID_l_c = '' and $_dsSub1/cPQVirtualPart_l_c = 'CSITEMMODEL')) and $_dsSub1/doNotPrintFlag_l_c!='Y' and $_dsSub1/summaryPrintGrouping_l_c!='Trade-in'">
                        <xsl:choose>
                            <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                                <xsl:value-of select="'Additional Parts Sub Total :'"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="'Estimated Additional Parts Sub Total :'"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:when test="($_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/doNotPrintFlag_l_c!='Y' and $_dsSub1/summaryPrintGrouping_l_c!='Trade-in'">
                        <xsl:choose>
                            <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                                <xsl:value-of select="concat(coveredItem_l_c,' Sub Total :')"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="concat('Estimated ',coveredItem_l_c,' Sub Total :')"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:when test="($_dsSub1/lineType_l = 'Std' or $_dsSub1/lineType_l = 'STD' or $_dsSub1/lineType_l = 'SERVICE') and $_dsSub1/doNotPrintFlag_l_c!='Y' and $_dsSub1/summaryPrintGrouping_l_c = 'Trade-in'">
                        <xsl:choose>
                            <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                                <xsl:value-of select="'Credits Sub Total :'"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="'Estimated Credits Sub Total :'"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:otherwise>0</xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. List Price: '"/>
<xsl:with-param name="sum" select="extendedListPrice_l_c"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div>
<xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discounts"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263356"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263356)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div><!--</xsl:when>
    </xsl:choose>--></xsl:for-each><!--</xsl:when></xsl:choose>-->
</xsl:for-each><xsl:variable name="AddpartLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and _parent_doc_number=''])"/><xsl:for-each select="$AddpartLines"><xsl:variable name="_dsSub1" select="."/><xsl:if test="position()=1"><!-- this is a fake loop really, we only want it as a wrapper for these variables--><xsl:variable name="hasAddpartLines" select="boolean(count($AddpartLines) &gt; 0)"/><xsl:variable name="AddpartHardwareLines" select="exsl:node-set($AddpartLines[printGrouping_l_c = 'HARDWARE'])"/><xsl:variable name="hasAddpartHardwareLines" select="boolean(count($AddpartHardwareLines) &gt; 0)"/><xsl:variable name="AddpartSoftwareLines" select="exsl:node-set($AddpartLines[printGrouping_l_c= 'SOFTWARE'])"/><xsl:variable name="hasAddpartSoftwareLines" select="boolean(count($AddpartSoftwareLines) &gt; 0)"/><xsl:variable name="AddpartServicesLines" select="exsl:node-set($AddpartLines[printGrouping_l_c = 'SERVICES'])"/><xsl:variable name="hasAddpartServicesLines" select="boolean(count($AddpartServicesLines) &gt; 0)"/><xsl:variable name="AddpartStorageLines" select="exsl:node-set($AddpartLines[printGrouping_l_c = 'STORAGE'])"/><xsl:variable name="hasAddpartStorageLines" select="boolean(count($AddpartStorageLines) &gt; 0)"/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><xsl:variable name="cond47263141"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263141)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 11pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Additional Parts and Components</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263142"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263142)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.2pt; text-align: left"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 11pt"><span style="color: rgb(0, 0, 0); font-family: helvetica; font-size: 11pt"><span style="font-weight: bold"><span style="color: rgb(0, 0, 0); font-family: helvetica; font-size: 11pt">Hardware</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263143"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved'  or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasAddpartHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263143)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263144"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263144)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddpartHardwareLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263145"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartHardwareLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263145)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Hardware Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Hardware Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. List: '"/>
<xsl:with-param name="sum" select="sum($AddpartHardwareLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($AddpartHardwareLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartHardwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartHardwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartHardwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Hardware Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263359"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263359)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartHardwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartHardwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartHardwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263146"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263146)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 11pt; font-family: helvetica"><span style="font-weight: bold">Storage</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263147"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasAddpartStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263147)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263148"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263148)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddpartStorageLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263149"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartStorageLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263149)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Storage Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Storage Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Storage Ext. List: '"/>
<xsl:with-param name="sum" select="sum($AddpartStorageLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($AddpartStorageLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartStorageLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartStorageLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartStorageLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Storage Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263362"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263362)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartStorageLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartStorageLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartStorageLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Storage Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263150"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263150)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 11pt; font-family: helvetica"><span style="font-weight: bold">Software</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263151"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasAddpartSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263151)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263152"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartSoftwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263152)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddpartSoftwareLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!='' or $_dsSub1/quickShipMessages_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263153"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartSoftwareLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263153)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Software Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Software Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Hardware Ext. List: '"/>
<xsl:with-param name="sum" select="sum($AddpartSoftwareLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($AddpartSoftwareLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartSoftwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartSoftwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartSoftwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Software Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263365"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263365)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartSoftwareLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartSoftwareLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartSoftwareLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Software Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263154"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartServicesLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263154)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 11pt; font-family: helvetica"><span style="font-weight: bold">Services</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263155"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasAddpartServicesLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263155)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263156"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartServicesLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263156)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddpartServicesLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond47263157"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddpartServicesLines and ($_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263157)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Services Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Services Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Services Ext. List: '"/>
<xsl:with-param name="sum" select="sum($AddpartServicesLines/extendedListPrice_l_c)"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="quoteListPrice" select="sum($AddpartServicesLines/extendedListPrice_l_c)"/>
<xsl:variable name="quoteNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartServicesLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartServicesLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartServicesLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$quoteListPrice &gt; 0">  
			<xsl:value-of select="(($quoteListPrice - $quoteNetPrice) div $quoteListPrice) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Services Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263368"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263368)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($AddpartServicesLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($AddpartServicesLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($AddpartServicesLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Services Ext. Net: '"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:if></xsl:for-each><xsl:choose><xsl:when test="$_dsMain1/serviceRenewal_t_c!=''"><!-- extra memory but saves a lot of unnecessary loops-->
<xsl:variable name="allCSItemChildren" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and cPQVirtualPart_l_c = 'CSITEMCHILD'])"/>
<xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='2' and ((_parent_doc_number = '' and cPQVirtualPart_l_c != 'ROOT') or cPQVirtualPart_l_c = 'SUBROOT') and renewalIndicator_l_c = 'Y']">
<xsl:sort select="./@_document_number" order="ascending"/>
<xsl:variable name="_dsSub1" select="."/>
<!--shansen unnecessary conditioning
<xsl:choose><xsl:when test="($_dsSub1/_parent_doc_number = &#39;&#39; and  $_dsSub1/cPQVirtualPart_l_c != &#39;ROOT&#39;) or ($_dsSub1/cPQVirtualPart_l_c = &#39;SUBROOT&#39;)">-->
<!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content -->
<xsl:variable name="proposalLoopDocNumber" select="./_document_number"/>
<xsl:variable name="proposalLoopGsNumber" select="./_group_sequence_number"/>
<xsl:variable name="parentLoopDocNumber" select="./_parent_doc_number"/>
<xsl:variable name="parentConfigName" select="./virtualConfigName_l_c"/>
<xsl:variable name="renewalSvcName" select="concat(substring-before(./model_l/_model_bom, 'Renewal'),' Renewal&#10;Services')"/>
<xsl:variable name="renewalName">
            <xsl:choose>
                <xsl:when test="./model_l/_model_name = 'Renewal Products'">
                    <xsl:value-of select="concat(substring-before(./model_l/_model_bom, 'Renewal'),' Renewal&#10;Services')"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="concat(./model_l/_model_bom,' Renewal&#10;Services')"/>
                </xsl:otherwise>
            </xsl:choose>
</xsl:variable>
<xsl:variable name="installedat" select="concat(./installedAtAddress_l_c,' ',./installedAtStateProvince_l_c,' ',./installedAtCountry_l_c,' ', ./installedAtPostalCode_l_c)"/>

<xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber or _parent_doc_number = $parentLoopDocNumber) and downstreamFulfillment_l_c != 'SMP' and renewalIndicator_l_c = 'Y' and lineType_l != 'STD']">
    <xsl:sort select="./@_document_number" order="ascending"/>
        <xsl:variable name="_dsSub1" select="."/>
        <xsl:variable name="modelLoopDocNumber" select="./_document_number"/>
			<xsl:variable name="modelLoopGSNumber" select="./_group_sequence_number"/>
			<xsl:variable name="lineNumber" select="./lineItemNumber_l_c"/>
			<xsl:variable name="bom_level" select="./_line_bom_level"/>
			<xsl:variable name="serviceReferenceLineID" select="./serviceReferenceLineID_l_c"/>
           <xsl:variable name="coveredItem" select="./coveredItem_l_c"/>
           <xsl:variable name="virtualLineID" select="./virtualLineID_l_c"/>
			<xsl:variable name="passcschild">
            <xsl:choose>
                <xsl:when test="$_dsSub1/lineType_l = 'MODEL' and $_dsSub1/cPQVirtualPart_l_c='CSITEMMODEL'">
                    <xsl:value-of select="'Yes'"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="'No'"/>
                </xsl:otherwise>
            </xsl:choose>
            </xsl:variable>
			<xsl:variable name="hardwareLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (topModelLineID_l_c = $lineNumber or (modelReferenceLineID_l_c = $lineNumber and  _line_bom_level &gt; $bom_level ) or (lineType_l = 'SERVICE' and topModelLineID_l_c ='' and modelReferenceLineID_l_c ='' and lineItemNumber_l_c = $lineNumber) ) and lineType_l != 'MODEL' and (cPQVirtualPart_l_c != 'CSITEMCHILD' or $passcschild = 'Yes') and doNotPrintFlag_l_c != 'Y' and not ((FunctionUtil:startswith(./item_l/_part_number,'OC'))) ])"/>
			<xsl:variable name="hasHardwareLines" select="boolean(count($hardwareLines) &gt; 0)"/>
			
            <xsl:variable name="hasSvcConfigRows" select="boolean(count(./_commerce_array_set_attr_info[@setName='renewalSrvCfgDtl_Array_l_c']/_array_set_row) &gt; 0)"/>
            <xsl:variable name="serialNumberList">
                <xsl:variable name="tmpSerialNumberList">
                    <xsl:for-each select="./_commerce_array_set_attr_info[@setName='serialNumber_Array_l_c']/_array_set_row">
                        <xsl:sort select="./@_row_number" data-type="number" order="ascending"/>
                        <xsl:if test="./attribute[@var_name='serialNumber_serialNumber_Array_l_c']!=''">
                            <xsl:choose>
                                <xsl:when test="./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!='' or ./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c']!=null">
                                    <xsl:value-of select="concat(./attribute[@var_name='serialNumber_serialNumber_Array_l_c'],', ',./attribute[@var_name='partnerSerialNumber_serialNumber_Array_l_c'], ', ')"/>
                                </xsl:when>
                                <xsl:otherwise>
                                    <xsl:value-of select="concat(./attribute[@var_name='serialNumber_serialNumber_Array_l_c'],', ')"/>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:if>
                    </xsl:for-each>
                </xsl:variable>
                <xsl:value-of select="substring($tmpSerialNumberList, 1,string-length($tmpSerialNumberList)-2)"/>
            </xsl:variable>
<!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content -->
        <div space-after="0.1in" space-after.precedence="force"/><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">NetApp Services</span></span></span></div></div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 12pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="FunctionUtil:startswith($parentConfigName,'Config#')">
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <!--xsl:value-of select="concat('Config # ',$parentConfigName)" /-->
                        <xsl:value-of select="$parentConfigName"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Configuration Comments:<xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" number-columns-spanned="9" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 10pt; text-align: left">
    <span style="color: #000000; font-weight: bold; font-size: 10pt; font-family: helvetica">
        <!--xsl:value-of select="$renewalSvcName"/-->
        <xsl:value-of select="$renewalName"/>
    </span>
</div></div><xsl:choose><xsl:when test="'1' = '2'"><div><div style="line-height: 10pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/topModel_l_c/@display_value"><xsl:value-of select="$_dsSub1/topModel_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/topModel_l_c"/></xsl:otherwise></xsl:choose>Renewal</span></span></div><div style="line-height: 10pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: helvetica">Services</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div><xsl:for-each select="$hardwareLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:variable name="parentdocnum" select="./_document_number"/><xsl:variable name="ServiceLines" select="$allCSItemChildren[_parent_doc_number = $parentdocnum]"/><xsl:variable name="hasServiceLines" select="boolean(count($ServiceLines) &gt; 0)"/><xsl:variable name="dynamicCatCode"><xsl:value-of select="$ServiceLines/dynamicCatCode_l_c"/></xsl:variable><xsl:variable name="legacyCatCode"><xsl:value-of select="$ServiceLines/item_l/_part_custom_field463"/></xsl:variable><xsl:variable name="hasAssetRows" select="boolean(count(./_commerce_array_set_attr_info[@setName='renewalAssets_Array_l_c']/_array_set_row) &gt; 0)"/><xsl:variable name="ChildLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and  (lineItemNumber_l_c = $serviceReferenceLineID or item_l/_part_number = $coveredItem) and virtualLineID_l_c = $virtualLineID])"/><xsl:variable name="NonSESSerialNumber"><xsl:value-of select="$ChildLines/serialNumber_l_c"/></xsl:variable><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><xsl:variable name="cond47262967"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="(not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')) and $hasHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262967)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262785"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262785)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Part Number</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Product Description</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Ext. Qty</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262786"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasHardwareLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262786)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="'1' = '2'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_desc/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_desc/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_desc"/></xsl:otherwise></xsl:choose></span></div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="color: #000000; font-size: 10pt; font-family: helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">[ Discount Cat:</span><xsl:choose><xsl:when test="$_dsSub1/dynamicCatCode_l_c/@display_value"><xsl:value-of select="$_dsSub1/dynamicCatCode_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/dynamicCatCode_l_c"/></xsl:otherwise></xsl:choose><span style="font-weight: bold">]</span></span></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/catCodes_t_c = 'dynamic'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$dynamicCatCode!= ''">
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$dynamicCatCode"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
            <!--xsl:value-of select="concat($_dsSub1/item_l/_part_desc,' [',' Disocunt Cat: ',$dynamicCatCode,']')" /-->
        </xsl:when>
        <xsl:otherwise>
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
            <!--xsl:value-of select="concat($_dsSub1/item_l/_part_desc,' [',' Disocunt Cat: ',$_dsSub1/dynamicCatCode_l_c,']')" /-->
        </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$legacyCatCode!= ''">
            
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$legacyCatCode"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
        </xsl:when>
        <xsl:otherwise>
            
            <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
            <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
            <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
        </xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="listPrice_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="netPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerUnitNetPricefloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerUnitNetPricefloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond53507194"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$serialNumberList != '' or $NonSESSerialNumber!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond53507194)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond122716736"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$serialNumberList!=''">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond122716736)=1"><div><div>
	<div style="line-height: 12pt; text-align: left">
		<span style="font-weight: normal">
			<span style="color: #000000; font-size: 8pt; font-family: Helvetica">
				<span style="font-weight: bold">Serial Number: </span><xsl:value-of select="$serialNumberList"/>
			</span>
		</span>
	</div>
</div>	</div></xsl:when></xsl:choose><xsl:variable name="cond122716737"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$NonSESSerialNumber!=''">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond122716737)=1"><div><div>
	<div style="line-height: 12pt; text-align: left">
		<span style="font-weight: normal">
			<span style="color: #000000; font-size: 8pt; font-family: Helvetica">
				<span style="font-weight: bold">Serial Number: </span><xsl:value-of select="$NonSESSerialNumber"/>
			</span>
		</span>
	</div>
</div>	</div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Linked Quote :<xsl:choose><xsl:when test="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c/@display_value"><xsl:value-of select="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/addOnOriginalQuoteNumberSearch_l_c"/></xsl:otherwise></xsl:choose></span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test=" not (FunctionUtil:contains($_dsSub1/item_l/_part_number,'REINST'))"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Includes :<xsl:choose><xsl:when test="$_dsSub1/includes_l_c/@display_value"><xsl:value-of select="$_dsSub1/includes_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/includes_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="5" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c&gt;'0'"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Service Period Start Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>

    <span style="font-weight: bold"><xsl:value-of select="'     Service Period End Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsSub1/warrantyEndDate_l_c!=''">
    <span style="font-weight: bold"><xsl:value-of select="'   Warranty Expiration Date:'"/></span>
    <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/warrantyEndDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'warrantyEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/>
    </xsl:when>
</xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'     Service Period Duration:'"/></span>
    <xsl:value-of select="serviceDuration_l_c"/>
    <xsl:choose>
        <xsl:when test="serviceDuration_l_c = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <!--xsl:value-of select="$extNetPrice" /-->
    <span style="font-weight: bold"><xsl:value-of select="'Service Address:'"/></span>
    <xsl:value-of select="$installedat"/>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsSub1/quickShipMessages_l_c = 'SSP for:'">
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="concat('SSP for:',$_dsSub1/coveredItem_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Message:'"/></span>
        <xsl:value-of select="$_dsSub1/quickShipMessages_l_c"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr><xsl:variable name="cond47262815"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasServiceLines and  not (FunctionUtil:contains($_dsSub1/item_l/_part_number,'REINST'))">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262815)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" keep-together.within-page="1"><table-column column-width="250.0px"/><table-column column-width="100.0px"/><table-column column-width="100.0px"/><table-column column-width="100.0px"/><table-column column-width="50.0px"/><table-body><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Service Details</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Service Start Date</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Service End Date</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Duration</span></span></span></div></div></div></fo:block-container></td></tr><xsl:for-each select="$ServiceLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_desc/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_desc/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_desc"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c/@display_value"><xsl:value-of select="$_dsSub1/serviceDuration_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/serviceDuration_l_c))='NaN' or not(contains($_dsSub1/serviceDuration_l_c, '.') or contains($_dsSub1/serviceDuration_l_c, ','))"><xsl:value-of select="$_dsSub1/serviceDuration_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/serviceDuration_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c/@display_precision"><xsl:value-of select="$_dsSub1/serviceDuration_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr></xsl:for-each></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262787"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAssetRows and not (FunctionUtil:contains($_dsSub1/item_l/_part_number,'REINST'))">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262787)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262788"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAssetRows and not (FunctionUtil:contains($_dsSub1/item_l/_part_number,'REINST'))">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262788)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" keep-together.within-page="1"><table-column column-width="300.0px"/><table-column column-width="100.0px"/><table-column column-width="100.0px"/><table-body><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">System Details: Product</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">EOSL Date</span></span></span></div></div></div></fo:block-container></td></tr><xsl:variable name="uniqueList"><xsl:for-each select="./_commerce_array_set_attr_info[@setName='renewalAssets_Array_l_c']/_array_set_row"><row><ourKey><xsl:value-of select="concat(./attribute[@var_name='partNumber_renewalAssets_Array_l_c'],'+',./attribute[@var_name='quantity_renewalAssets_Array_l_c'],'+',./attribute[@var_name='eOSLDate_renewalAssets_Array_l_c'])"/></ourKey><xsl:copy-of select="./attribute[@var_name='partDescription_renewalAssets_Array_l_c']"/><xsl:copy-of select="./attribute[@var_name='quantity_renewalAssets_Array_l_c']"/><xsl:copy-of select="./attribute[@var_name='eOSLDate_renewalAssets_Array_l_c']"/></row></xsl:for-each></xsl:variable><xsl:for-each select="exsl:node-set($uniqueList)/*[not(./ourKey = preceding-sibling::*/ourKey)]"><xsl:variable name="_dsTxnArray" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsTxnArray/attribute[@var_name='partDescription_renewalAssets_Array_l_c']/@display_value"><xsl:value-of select="$_dsTxnArray/attribute[@var_name='partDescription_renewalAssets_Array_l_c']/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsTxnArray/attribute[@var_name='partDescription_renewalAssets_Array_l_c']"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsTxnArray/attribute[@var_name='quantity_renewalAssets_Array_l_c']/@display_value"><xsl:value-of select="$_dsTxnArray/attribute[@var_name='quantity_renewalAssets_Array_l_c']/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsTxnArray/attribute[@var_name='quantity_renewalAssets_Array_l_c']"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsTxnArray/attribute[@var_name='eOSLDate_renewalAssets_Array_l_c']/@display_value"><xsl:value-of select="$_dsTxnArray/attribute[@var_name='eOSLDate_renewalAssets_Array_l_c']/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsTxnArray/attribute[@var_name='eOSLDate_renewalAssets_Array_l_c']"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr></xsl:for-each></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262789"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAssetRows and not (FunctionUtil:contains($_dsSub1/item_l/_part_number,'REINST'))">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262789)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test=" not (FunctionUtil:contains($_dsSub1/item_l/_part_number,'REINST'))"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Please see the quote footer for additional information on EOS limitations.</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:for-each><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="300.0px"/><table-column column-width="300.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><xsl:variable name="cond47263208"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263208)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'NetApp Services Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated NetApp Services Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. List Price: '"/>
<xsl:with-param name="sum" select="extendedListPrice_l_c"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discounts"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262848"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262848)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price:'"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div>
</xsl:for-each>
</xsl:for-each></xsl:when></xsl:choose><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='2' and $_dsMain1/keyStone_t_c='Yes' and _parent_doc_number = '' and not(assetType_l_c = 'Amend' or assetType_l_c = 'Renew') ]">
<xsl:sort select="./@_document_number" order="ascending"/>
<xsl:variable name="_dsSub1" select="."/>
<xsl:variable name="proposalLoopDocNumber" select="./_document_number"/>
<xsl:variable name="proposalLoopGsNumber" select="./_group_sequence_number"/>
<xsl:variable name="parentLoopDocNumber" select="./_parent_doc_number"/>

<xsl:variable name="CloudServicesLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Cloud Services')])"/>
<xsl:variable name="hasCloudServicesLines" select="boolean(count($CloudServicesLines) &gt; 0)"/>
<xsl:variable name="DataProtectionLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'File&amp;Block Data Protection Advanced')])"/>
<xsl:variable name="hasDataProtectionLines" select="boolean(count($DataProtectionLines) &gt; 0)"/>
<xsl:variable name="DataTieringLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'File&amp;Block Data Tiering' or summaryPrintGrouping_l_c = 'SAM-Support Account Management')])"/>
<xsl:variable name="hasDataTieringLines" select="boolean(count($DataTieringLines) &gt; 0)"/>
<xsl:variable name="SAMLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'SAM-Support Account Management')])"/>
<xsl:variable name="hasSAMLines" select="boolean(count($SAMLines) &gt; 0)"/>
<xsl:variable name="PrimaryStorageLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'File&amp;Block Primary Storage')])"/>
<xsl:variable name="hasPrimaryStorageLines" select="boolean(count($PrimaryStorageLines) &gt; 0)"/>
<xsl:variable name="UnifiedBlockLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Unified &amp; Block Storage' or summaryPrintGrouping_l_c = 'Unified Storage')])"/>
<xsl:variable name="hasUnifiedBlockLines" select="boolean(count($UnifiedBlockLines) &gt; 0)"/>
<xsl:variable name="AddOnLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Add-on Services' or summaryPrintGrouping_l_c = 'Add-on Services-Support')])"/>
<xsl:variable name="hasAddOnLines" select="boolean(count($AddOnLines) &gt; 0)"/>
<xsl:variable name="NotAddOnSupportLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Add-on Services')])"/>
<xsl:variable name="hasNotAddOnSupportLines" select="boolean(count($NotAddOnSupportLines) &gt; 0)"/>
<xsl:variable name="AddOnManagementLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Add-on Services-Data Management')])"/>
<xsl:variable name="hasAddOnManagementLines" select="boolean(count($AddOnManagementLines) &gt; 0)"/>
<xsl:variable name="ObjectStorageLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Object Storage')])"/>
<xsl:variable name="hasObjectStorageLines" select="boolean(count($ObjectStorageLines) &gt; 0)"/>
<xsl:variable name="AddonServiceOtherLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Data Management'  or summaryPrintGrouping_l_c = 'Add-on Services-Other')])"/>
<xsl:variable name="hasAddonServiceOtherLines" select="boolean(count($AddonServiceOtherLines) &gt; 0)"/>
<xsl:variable name="DataManagementLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Data Management')])"/>
<xsl:variable name="hasDataManagementLines" select="boolean(count($DataManagementLines) &gt; 0)"/>
<xsl:variable name="ProfessionalLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Professional Service - Monthly')])"/>
<xsl:variable name="hasProfessionalLines" select="boolean(count($ProfessionalLines) &gt; 0)"/>
<xsl:variable name="OneTimeFeeLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'One Time Fee' or summaryPrintGrouping_l_c = 'Add-on Service-One Time Fee' or summaryPrintGrouping_l_c = 'One-Time Charge')])"/>
<xsl:variable name="hasOneTimeFeeLines" select="boolean(count($OneTimeFeeLines) &gt; 0)"/>
<xsl:variable name="ServiceSupportLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and (summaryPrintGrouping_l_c = 'Add-on Services-Support')])"/>
<xsl:variable name="hasServiceSupportLines" select="boolean(count($ServiceSupportLines) &gt; 0)"/>
<xsl:variable name="ExcludingOneTimeFeeLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and not(summaryPrintGrouping_l_c = 'One Time Fee' or summaryPrintGrouping_l_c = 'Add-on Service-One Time Fee' or summaryPrintGrouping_l_c = 'One-Time Charge')])"/>
<xsl:variable name="hasExcludingOneTimeFeeLines" select="boolean(count($ExcludingOneTimeFeeLines) &gt; 0)"/>
		<div><div style="line-height: 13.0909pt; text-align: left"><span style="font-size: 12pt"><span style="font-weight: bold"><span style="color: #000000; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/virtualConfigName_l_c/@display_value"><xsl:value-of select="$_dsSub1/virtualConfigName_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/virtualConfigName_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Configuration Comments:<xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica">Keystone STaaS Subscription</span></span></div></div><div space-after="0.1in" space-after.precedence="force"/><div><table table-layout="fixed" float="left" border-collapse="collapse"><table-column column-width="180.0px"/><table-column column-width="400.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 8pt"><span style="font-weight: bold">Terms</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">:<xsl:choose><xsl:when test="$_dsSub1/sTaaSTermsKFS_l_c/@display_value"><xsl:value-of select="$_dsSub1/sTaaSTermsKFS_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/sTaaSTermsKFS_l_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="font-weight: bold"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 8pt">Service Description</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">:<xsl:choose><xsl:when test="$_dsSub1/serviceDescriptionKFS_l_c/@display_value"><xsl:value-of select="$_dsSub1/serviceDescriptionKFS_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/serviceDescriptionKFS_l_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Service Description</span> Supplement</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">:<xsl:choose><xsl:when test="$_dsSub1/serviceDescriptionSupplementKFS_l_c/@display_value"><xsl:value-of select="$_dsSub1/serviceDescriptionSupplementKFS_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/serviceDescriptionSupplementKFS_l_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="font-weight: bold"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 8pt">Order Type</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">:<xsl:choose><xsl:when test="$_dsSub1/orderTypeKFS_l_c/@display_value"><xsl:value-of select="$_dsSub1/orderTypeKFS_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/orderTypeKFS_l_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="font-weight: bold"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 8pt">Sales Motion</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">:<xsl:choose><xsl:when test="$_dsMain1/salesChannel_t/@display_value"><xsl:value-of select="$_dsMain1/salesChannel_t/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/salesChannel_t"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="font-weight: bold"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 8pt">Partner Supported</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">:<xsl:choose><xsl:when test="$_dsSub1/partnerSupport_l_c/@display_value"><xsl:value-of select="$_dsSub1/partnerSupport_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/partnerSupport_l_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/privateMode_l_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Secure Site</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">:<xsl:choose><xsl:when test="$_dsSub1/privateMode_l_c/@display_value"><xsl:value-of select="$_dsSub1/privateMode_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/privateMode_l_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond82065670"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/targetSiteReadinessDate_KFS_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond82065670)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Target Readiness Date</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">:<xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/targetReadinessDateKS_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'targetReadinessDateKS_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Target Start Date</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 9.6pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">:<xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/targetSiteReadinessDate_KFS_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'targetSiteReadinessDate_KFS_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></div></fo:block-container></td></tr></tbody></table></div><div space-after="0.2in" space-after.precedence="force"/><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><xsl:variable name="cond47262974"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262974)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price TiB Per Month</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price <span style="font-family: helvetica"><span style="color: #000000; font-family: helvetica">TiB Per Month</span></span></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price <span style="font-family: helvetica"><span style="color: #000000; font-family: helvetica">TiB Per Month</span></span></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186600"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasUnifiedBlockLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186600)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: black; font-family: Helvetica">Unified &amp; Block Storage</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$UnifiedBlockLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186547"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186547)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186599"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasPrimaryStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186599)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: black; font-family: Helvetica">File&amp;Block Primary Storage</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$PrimaryStorageLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186540"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186540)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186603"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasObjectStorageLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186603)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Object Storage</span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$ObjectStorageLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186568"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186568)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186596"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasCloudServicesLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186596)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"><span style="font-weight: bold"><span style="color: #000000; font-family: Helvetica">Cloud Services</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$CloudServicesLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186519"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186519)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186602"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddOnManagementLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186602)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Add-on Services-Data Management</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddOnManagementLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186561"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186561)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186597"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasDataProtectionLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186597)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"><span style="font-weight: bold"><span style="color: #000000; font-family: Helvetica"><span style="color: black; font-family: Helvetica">File&amp;Block Data Protection Advanced</span></span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$DataProtectionLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186526"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186526)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186601"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddOnLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186601)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left" font-weight="bold">
    <xsl:choose>
    <xsl:when test="$hasNotAddOnSupportLines">
        <xsl:value-of select="'Add-on Services'"/>
    </xsl:when>
    <xsl:otherwise>
        <xsl:value-of select="'Add-on Services-Support'"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddOnLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186554"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186554)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186604"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasAddonServiceOtherLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186604)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left" font-weight="bold">
    <xsl:choose>
    <xsl:when test="$hasDataManagementLines">
        <xsl:value-of select="'Data Management'"/>
    </xsl:when>
    <xsl:otherwise>
        <xsl:value-of select="'Add-on Services-Other'"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$AddonServiceOtherLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186575"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186575)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186605"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasProfessionalLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186605)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"><span style="font-weight: bold"><span style="color: #000000; font-family: Helvetica">Professional Service - Monthly</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$ProfessionalLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186582"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186582)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186598"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasDataTieringLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186598)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left" font-weight="bold">
    <xsl:choose>
    <xsl:when test="$hasSAMLines">
        <xsl:value-of select="'SAM-Support Account Management'"/>
    </xsl:when>
    <xsl:otherwise>
        <xsl:value-of select="'File&amp;Block Data Tiering'"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$DataTieringLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186533"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186533)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><xsl:variable name="cond69186606"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOneTimeFeeLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186606)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"><span style="font-weight: bold"><span style="color: #000000; font-family: Helvetica">One Time Charge</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond69186607"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasOneTimeFeeLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186607)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Product Description</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$OneTimeFeeLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="400.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ListPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div (serviceDuration_l_c div 12))" />
		</xsl:when-->
		<xsl:when test="monthlyUnitListPriceFloat_c &gt; 0">
			<xsl:value-of select="((monthlyUnitListPriceFloat_c * serviceDuration_l_c) div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$ListPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="UnitNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="(monthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="(resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="(endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($UnitNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$UnitNetPrice &gt; 0">
			<xsl:value-of select="($UnitNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<!--xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template-->
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<!--xsl:when test= "billingFrequency_l_c = &#39;Annual&#39;">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))" />
		</xsl:when>
		<xsl:when test= "billingFrequency_l_c = &#39;Monthly&#39;"-->
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>		
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:variable name="cond69186589"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!='' or $_dsSub1/comment_l_c!=''">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond69186589)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="6" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></div></fo:block-container></td></tr></xsl:for-each><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse"><table-column column-width="140.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Subscription Term</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">:<xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c/@display_value"><xsl:value-of select="$_dsSub1/serviceDuration_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/serviceDuration_l_c))='NaN' or not(contains($_dsSub1/serviceDuration_l_c, '.') or contains($_dsSub1/serviceDuration_l_c, ','))"><xsl:value-of select="$_dsSub1/serviceDuration_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/serviceDuration_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c/@display_precision"><xsl:value-of select="$_dsSub1/serviceDuration_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose> Months</span></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Billing Frequency</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">:<xsl:choose><xsl:when test="$_dsSub1/billingFrequency_l_c/@display_value"><xsl:value-of select="$_dsSub1/billingFrequency_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/billingFrequency_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">SnapLock <span background-style="color: #ffffff; font-family: helvetica">Compliance</span></span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">:<xsl:choose><xsl:when test="$_dsSub1/snapLockComplianceKFS_l_c/@display_value"><xsl:value-of select="$_dsSub1/snapLockComplianceKFS_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/snapLockComplianceKFS_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr><xsl:variable name="cond47263209"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263209)=1"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Subscription Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Subscription Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="ExtList">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extendedListPrice_l_c)"/>
</xsl:variable>

<xsl:variable name="ListPrice">
<xsl:choose>	
		<xsl:when test="$ExtList &gt; 0">
			<xsl:value-of select="($ExtList div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:variable name="extListPriceOneTime">
        <xsl:value-of select="sum($OneTimeFeeLines/extendedListPrice_l_c)"/>
</xsl:variable>

<xsl:variable name="ListPriceFinal">
<xsl:choose>	
		<xsl:when test="$ListPrice &gt; 0">
			<xsl:value-of select="($ListPrice + $extListPriceOneTime)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. List Price: '"/>
<xsl:with-param name="sum" select="$ListPriceFinal"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><!--xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;1&#39; or $_dsMain1/pricingTierForPrint_t_c = &#39;&#39;">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;2&#39;">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;3&#39;">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable-->
<xsl:variable name="ExtList">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extendedListPrice_l_c)"/>
</xsl:variable>

<xsl:variable name="ListPrice">
<xsl:choose>	
		<xsl:when test="$ExtList &gt; 0">
			<xsl:value-of select="($ExtList div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:variable name="extListPriceOneTime">
        <xsl:value-of select="sum($OneTimeFeeLines/extendedListPrice_l_c)"/>
</xsl:variable>

<xsl:variable name="ListPriceFinal">
<xsl:choose>	
		<xsl:when test="$ListPrice &gt; 0">
			<xsl:value-of select="($ListPrice + $extListPriceOneTime)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:variable name="extNetPriceOneTime">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($OneTimeFeeLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($OneTimeFeeLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($OneTimeFeeLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:variable name="NetPriceFinal">
<xsl:choose>	
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($NetPrice + $extNetPriceOneTime)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:variable name="discountPctSubtotal">
	<xsl:choose>
		<xsl:when test="$ListPriceFinal &gt; 0">  
			<xsl:value-of select="(($ListPriceFinal - $NetPriceFinal) div $ListPriceFinal) * 100"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</xsl:variable>

<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discountPctSubtotal"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template>
</div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47263331"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263331)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>	
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:variable name="extNetPriceOneTime">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($OneTimeFeeLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($OneTimeFeeLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($OneTimeFeeLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:variable name="NetPriceFinal">
<xsl:choose>	
		<xsl:when test="$extNetPrice &gt; 0">
			<xsl:value-of select="($NetPrice + $extNetPriceOneTime)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
</xsl:choose>
</xsl:variable>


<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price: '"/>
<xsl:with-param name="sum" select="$NetPriceFinal"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" number-columns-spanned="7" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr><xsl:choose><xsl:when test="(FunctionUtil:contains($_dsSub1/serviceLevelAgreementsKFS_l_c,'Availability')) or (FunctionUtil:contains($_dsSub1/serviceLevelAgreementsKFS_l_c,'Performance')) or (FunctionUtil:contains($_dsSub1/serviceLevelAgreementsKFS_l_c,'Sustainability'))"><table-row><table-cell cpq-cell="1" number-columns-spanned="7" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="(FunctionUtil:contains($_dsSub1/serviceLevelAgreementsKFS_l_c,'Availability')) or (FunctionUtil:contains($_dsSub1/serviceLevelAgreementsKFS_l_c,'Performance')) or (FunctionUtil:contains($_dsSub1/serviceLevelAgreementsKFS_l_c,'Sustainability'))"><div><div style="line-height: 8pt; text-align: center"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span text-decoration="underline">Service Level Agreements</span> :</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: center; font-size: 8pt; font-family: Helvetica">
<xsl:choose>
    <xsl:when test="(FunctionUtil:contains($_dsSub1/serviceLevelAgreementsKFS_l_c,'Availability'))">
        <span style="font-weight: bold"><xsl:value-of select="'Availability: '"/></span>
        <xsl:value-of select="'Yes'"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Availability: '"/></span>
        <xsl:value-of select="'No'"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: center; font-size: 8pt; font-family: Helvetica">
<xsl:choose>
    <xsl:when test="(FunctionUtil:contains($_dsSub1/serviceLevelAgreementsKFS_l_c,'Performance'))">
        <span style="font-weight: bold"><xsl:value-of select="'Performance: '"/></span>
        <xsl:value-of select="'Yes'"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Performance: '"/></span>
        <xsl:value-of select="'No'"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: center; font-size: 8pt; font-family: Helvetica">
<xsl:choose>
     <xsl:when test="(FunctionUtil:contains($_dsSub1/serviceLevelAgreementsKFS_l_c,'Sustainability'))">
        <span style="font-weight: bold"><xsl:value-of select="'Sustainability: '"/></span>
        <xsl:value-of select="'Yes'"/>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="'Sustainability: '"/></span>
        <xsl:value-of select="'No'"/>
    </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td></tr></tbody></table></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div><div space-after="0.5in" space-after.precedence="force"/>
</xsl:for-each><xsl:choose><xsl:when test="$_dsMain1/keyStone_t_c = 'Yes' and $_dsMain1/sMPType_t_c!='Renew' and $_dsMain1/sMPType_t_c!='Amend'"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true" keep-together.within-page="1"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="250.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" number-columns-spanned="4" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica">Cost Summary</span></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c!='noPricing'"><div><div style="line-height: 10pt; text-align: right"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: Helvetica">Net Price </span></span></div><div style="line-height: 10pt; text-align: right"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: Helvetica">(Excl. One Time Charge)</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 10pt; text-align: center"><span style="font-weight: bold"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 10pt">Billing Frequency</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 10pt; text-align: center"><span style="font-weight: bold"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 10pt">Duration</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c!='noPricing'"><div><div style="line-height: 10pt; text-align: right"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: Helvetica">Total</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='2' and $_dsMain1/keyStone_t_c='Yes' and _parent_doc_number = '' ]"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:variable name="proposalLoopDocNumber" select="./_document_number"/><xsl:variable name="ExcludingOneTimeFeeLines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and (_parent_doc_number = $proposalLoopDocNumber) and not(summaryPrintGrouping_l_c = 'One Time Fee' or summaryPrintGrouping_l_c = 'Add-on Service-One Time Fee' or summaryPrintGrouping_l_c = 'One-Time Charge')])"/><xsl:variable name="hasExcludingOneTimeFeeLines" select="boolean(count($ExcludingOneTimeFeeLines) &gt; 0)"/><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c!='noPricing'"><div><!--xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;1&#39; or $_dsMain1/pricingTierForPrint_t_c = &#39;&#39;">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;2&#39;">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;3&#39;">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable-->
<xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:variable name="NetPrice">
<xsl:choose>
    	
		<xsl:when test="billingFrequency_l_c = 'Annual' and $extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 12))"/>
		</xsl:when>
		<xsl:when test="billingFrequency_l_c = 'Monthly' and $extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div serviceDuration_l_c)"/>
		</xsl:when>
		<xsl:when test="billingFrequency_l_c = 'Quarterly' and $extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 3))"/>
		</xsl:when>
		<xsl:when test="billingFrequency_l_c = 'Semi-Annual' and $extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice div (serviceDuration_l_c div 6))"/>
		</xsl:when>
		<xsl:when test="billingFrequency_l_c = 'Full Term' and $extNetPrice &gt; 0">
			<xsl:value-of select="($extNetPrice)"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'10pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 10pt; text-align: center"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 10pt"><xsl:choose><xsl:when test="$_dsSub1/billingFrequency_l_c/@display_value"><xsl:value-of select="$_dsSub1/billingFrequency_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/billingFrequency_l_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 10pt; text-align: center"><span style="font-size: 10pt"><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c/@display_value"><xsl:value-of select="$_dsSub1/serviceDuration_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/serviceDuration_l_c))='NaN' or not(contains($_dsSub1/serviceDuration_l_c, '.') or contains($_dsSub1/serviceDuration_l_c, ','))"><xsl:value-of select="$_dsSub1/serviceDuration_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/serviceDuration_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/serviceDuration_l_c/@display_precision"><xsl:value-of select="$_dsSub1/serviceDuration_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose>Months</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c!='noPricing'"><div><!--xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;1&#39; or $_dsMain1/pricingTierForPrint_t_c = &#39;&#39;">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;2&#39;">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;3&#39;">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable-->
<xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extendedNetPrice_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extNetPriceResellerfloat_l_c)"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="sum($ExcludingOneTimeFeeLines/extnetPriceEndCustomerfloat_l_c)"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'10pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:for-each><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c!='noPricing'"><table-row><table-cell cpq-cell="1" number-columns-spanned="3" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 10pt; text-align: right"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: Helvetica">Total Transaction Value:</span></span></div><div style="line-height: 10pt; text-align: right"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: Helvetica">(Including One Time Charge)</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="$_dsMain1/quoteNetPrice_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="$_dsMain1/quoteNetPriceSecondTier_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="$_dsMain1/quoteNetPriceEndCustomer_t_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'10pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
</xsl:call-template>
</div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:when></xsl:choose><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='2' and $_dsMain1/keyStone_t_c='Yes' and _parent_doc_number = '' and (assetType_l_c = 'Amend' or assetType_l_c = 'Renew') ]">
<xsl:sort select="./@_document_number" order="ascending"/>
<xsl:variable name="_dsSub1" select="."/>
<xsl:variable name="proposalLoopDocNumber" select="./_document_number"/>
<xsl:variable name="proposalLoopGsNumber" select="./_group_sequence_number"/>
<xsl:variable name="parentLoopDocNumber" select="./_parent_doc_number"/>
<xsl:variable name="AutoRenew" select="./autoRenew_l_c"/>
<xsl:variable name="BillingFrequency" select="./billingFrequency_l_c"/>
<xsl:variable name="smplines" select="exsl:node-set(/transaction/data_xml/document[normalize-space(./@data_type)='3' and _parent_doc_number = $proposalLoopDocNumber and oRCL_ABO_ActionCode_l! = 'DELETE' and downstreamFulfillment_l_c = 'SMP' ])"/>
<xsl:variable name="serviceDuration"><xsl:value-of select="$smplines/serviceDuration_l_c"/></xsl:variable>
<div><div style="line-height: 13.0909pt; text-align: left"><span style="font-size: 12pt"><span style="font-weight: bold"><span style="color: #000000; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/virtualConfigName_l_c/@display_value"><xsl:value-of select="$_dsSub1/virtualConfigName_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/virtualConfigName_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Configuration Comments:<xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/downstreamFulfillment_l_c = 'SMP'"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="550.0px"/><table-column column-width="100.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="250.0px"/><table-body><table-row><table-cell cpq-cell="1" number-columns-spanned="4" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica">Keystone STaaS Subscription</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend' or $_dsSub1/assetType_l_c = 'Renew'"><table-row><table-cell cpq-cell="1" number-columns-spanned="2" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 10pt"><span style="color: #000000; font-family: Helvetica">Amend</span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 10pt">Renew</span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263241"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="not ( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and ($_dsMain1/lineLevelPricing_t_c = 'onlyNetPricing' or $_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263241)=1"><table-row><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="4" background-color="#E1E1E1" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Estimated</span></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Part Number</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend' or $_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Subscription Details</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Qty</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="line-height: 12pt; text-align: center"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Add'l Qty</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Unit List Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><div style="line-height: 12pt; text-align: center"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Disc%</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Unit Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ext. Net Price</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></xsl:when></xsl:choose><xsl:for-each select="/transaction/data_xml/document[normalize-space(./@data_type)='3']"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:choose><xsl:when test="$_dsSub1/_parent_doc_number = $proposalLoopDocNumber  and $_dsSub1/oRCL_ABO_ActionCode_l! = 'DELETE' and ($_dsSub1/downstreamFulfillment_l_c = 'SMP')"><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><xsl:variable name="modelLoopDocNumber12" select="./_document_number"/><xsl:variable name="modelLoopGSNumber12" select="./_group_sequence_number"/><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="550.0px"/><table-column column-width="100.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="150.0px"/><table-column column-width="200.0px"/><table-column column-width="250.0px"/><table-body><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_number/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_number/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_number"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend' or $_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Subscription ID: <xsl:choose><xsl:when test="$_dsSub1/subscriptionNumber_l_c/@display_value"><xsl:value-of select="$_dsSub1/subscriptionNumber_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/subscriptionNumber_l_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="line-height: 8pt; text-align: left"><span style="font-size: 8pt">Amendment Start Date<span style="color: #000000; font-family: helvetica">: <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/addOnStartDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'addOnStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Start Date of Extension:<xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceStartDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceStartDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div><span style="color: #000000; font-size: 8pt; font-family: helvetica">Existing Subscription End Date:<xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left; line-height: 12pt">
    <span style="font-weight: bold"><xsl:value-of select="'Amendment Duration: '"/></span>
    <xsl:value-of select="concat(format-number($_dsSub1/amendmentDuration_l_c, '#'),' ','Days')"/>    
</div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div><span style="color: #000000; font-size: 8pt; font-family: helvetica">Previous Total Quantity:<xsl:choose><xsl:when test="$_dsSub1/assetOriginalQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/assetOriginalQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/assetOriginalQuantity_l_c))='NaN' or not(contains($_dsSub1/assetOriginalQuantity_l_c, '.') or contains($_dsSub1/assetOriginalQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/assetOriginalQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/assetOriginalQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/assetOriginalQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/assetOriginalQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><div><span style="color: #000000; font-size: 8pt; font-family: helvetica">New Total Quantity: <xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_value"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_value"/></xsl:when><xsl:when test="string(number($_dsSub1/extendedQuantity_l_c))='NaN' or not(contains($_dsSub1/extendedQuantity_l_c, '.') or contains($_dsSub1/extendedQuantity_l_c, ','))"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:when><xsl:otherwise><xsl:call-template name="BMI_formatFloat"><xsl:with-param name="val" select="$_dsSub1/extendedQuantity_l_c"/><xsl:with-param name="numFormat" select="$EMAIL_RECIPIENT_NUMFORMAT_PREF"/><xsl:with-param name="precision"><xsl:choose><xsl:when test="$_dsSub1/extendedQuantity_l_c/@display_precision"><xsl:value-of select="$_dsSub1/extendedQuantity_l_c/@display_precision"/></xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Renew'"><div><div style="line-height: 11pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Extension Subscription End Date<span style="font-weight: bold"><span>:</span></span><span> </span><xsl:value-of select="PrintUtil:convertDBToPattern( $_dsSub1/serviceEndDate_l_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'serviceEndDate_l_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/><span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: center; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="$_dsSub1/assetType_l_c = 'Amend' and $_dsSub1/assetAmendedQty_l_c!=''"><xsl:value-of select="$_dsSub1/assetAmendedQty_l_c"/></xsl:when>
        <xsl:otherwise><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:otherwise>
    </xsl:choose>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsSub1/assetType_l_c = 'Amend'"><div><!--fo:block text-align = "center" font-size="8pt" font-family="Helvetica">
<xsl:value-of select="$_dsSub1/extendedQuantity_l_c - $_dsSub1/assetOriginalQuantity_l_c" />
</fo:block-->
<div style="text-align: center; font-size: 8pt; font-family: Helvetica">  
    <xsl:choose>
        <xsl:when test="($_dsSub1/assetOriginalQuantity_l_c != '' and $_dsSub1/assetAmendedQty_l_c !='')">
            <xsl:value-of select="$_dsSub1/assetAmendedQty_l_c - $_dsSub1/assetOriginalQuantity_l_c"/>
        </xsl:when>
        <xsl:otherwise><xsl:value-of select="$_dsSub1/extendedQuantity_l_c"/></xsl:otherwise>
    </xsl:choose>
</div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="monthlyUnitListPriceFloat_c * serviceDuration_l_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'center'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="NetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="monthlyUnitNetPricefloat_l_c * serviceDuration_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="resellerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="endCustomerMonthlyUnitNetPricefloat_l_c * serviceDuration_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="NewcurrencyFormattedPrice">
	<xsl:with-param name="price" select="$NetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="precision" select="'4'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/lineLevelPricing_t_c!='noPricing'"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" number-columns-spanned="8" border-top="1px solid #949494" padding="4px 0px" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="'1' = '2'"><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt; font-family: helvetica">Product Description:</span></div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/item_l/_part_desc/@display_value"><xsl:value-of select="$_dsSub1/item_l/_part_desc/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/item_l/_part_desc"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose><div><div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
    <span style="font-weight: bold"><xsl:value-of select="'Product Description: '"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_desc"/>
</div>
<div style="text-align: left; font-size: 8pt; font-family: Helvetica">  
<xsl:choose>
    <xsl:when test="$_dsMain1/catCodes_t_c = 'legacy'">
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/item_l/_part_custom_field463"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:when>
    <xsl:otherwise>
        <span style="font-weight: bold"><xsl:value-of select="concat(' [',' Discount Cat:')"/></span>
        <xsl:value-of select="$_dsSub1/dynamicCatCode_l_c"/>
        <span style="font-weight: bold"><xsl:value-of select="']'"/></span>
    </xsl:otherwise>
</xsl:choose>
</div></div><xsl:choose><xsl:when test="$_dsSub1/comment_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Comment :</span></span></span><span style="color: #000000; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/comment_l_c/@display_value"><xsl:value-of select="$_dsSub1/comment_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/comment_l_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span style="font-size: 8pt; font-family: helvetica"><span style="font-weight: bold">Message:</span></span><span style="font-size: 8pt; font-family: helvetica"><xsl:choose><xsl:when test="$_dsSub1/quickShipMessages_l_c/@display_value"><xsl:value-of select="$_dsSub1/quickShipMessages_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/quickShipMessages_l_c"/></xsl:otherwise></xsl:choose></span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></tbody></table></div></xsl:when></xsl:choose></xsl:for-each><!-- Added condition of Asset Type for new,renew,amend,none --><xsl:choose><xsl:when test="$_dsSub1/downstreamFulfillment_l_c = 'SMP'"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="450.0px"/><table-column column-width="300.0px"/><table-column column-width="300.0px"/><table-column column-width="300.0px"/><table-body><table-row><table-cell cpq-cell="1" number-columns-spanned="4" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left; line-height: 12pt">
    <span style="font-weight: bold"><xsl:value-of select="'Billing Frequency:'"/></span>
    <xsl:value-of select="$BillingFrequency"/>
</div></div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left; line-height: 12pt">
    <span style="font-weight: bold"><xsl:value-of select="'Auto Renewal:'"/></span>
    <xsl:value-of select="$AutoRenew"/>
</div></div><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="align" select="'left'"/>
<xsl:with-param name="label" select="'Total Contract Value:'"/>
<xsl:with-param name="sum" select="extendedNetPrice_l_c"/>
</xsl:call-template></div><div><div style="font-family: Helvetica; font-size: 8pt; text-align: left; line-height: 12pt">
    <span style="font-weight: bold"><xsl:value-of select="'Duration:'"/></span>
    <xsl:value-of select="$serviceDuration"/>
    <xsl:choose>
        <xsl:when test="$serviceDuration = '1'">
            <xsl:value-of select="' Month'"/>
        </xsl:when>
        <xsl:otherwise>        
            <xsl:value-of select="'Months'"/>   
        </xsl:otherwise>
</xsl:choose>
</div></div></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsSub1/overage_l_c = 'Yes'"><table-row><table-cell cpq-cell="1" number-columns-spanned="4" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">This subscription is configured to allow consumption bursting. The Cloud Insights customer environment will allow customer administrators to consume unlimited Managed Units. Any</span><span background-style="color: #ffffff; font-family: Helvetica" text-align="left"></span><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">amount consumed above the quantity in this configuration will be invoiced monthly in arrears at the same unit net price on this quote</span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263210"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263210)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.0909pt; text-align: left">
    <span style="font-size: 8pt">
        <span style="font-weight: bold">
            <span style="color: #000000; font-family: Helvetica">
                <xsl:choose>
                    <xsl:when test="( $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
                        <xsl:value-of select="'Subscription Sub Total:'"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="'Estimated Subscription Sub Total:'"/>
                    </xsl:otherwise>
                </xsl:choose>
            </span>
        </span>
    </span>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. List Price: '"/>
<xsl:with-param name="sum" select="extendedListPrice_l_c"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'"><div><xsl:variable name="discounts">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="currentDiscount_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="currentDiscountReseller_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="currentDiscountEndCustomer_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
    <xsl:with-param name="label" select="'Discount: '"/>
	<xsl:with-param name="discPct" select="$discounts"/>
	<xsl:with-param name="fontSize" select="'8pt'"/>
	<xsl:with-param name="fontWeight" select="'normal'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #000000" padding="4px 0px" border-bottom="1px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262938"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose>
    <xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'onlyNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing'">
        1
    </xsl:when>
    <xsl:otherwise>0</xsl:otherwise>
</xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262938)=1"><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="addendumTotalPrint">
<xsl:with-param name="label" select="'Ext. Net Price:'"/>
<xsl:with-param name="sum" select="$extNetPrice"/>
</xsl:call-template></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:when></xsl:choose>
</xsl:for-each><xsl:choose><xsl:when test="($_dsMain1/keyStone_t_c!='Yes') or ($_dsMain1/keyStone_t_c = 'Yes' and ($_dsMain1/sMPType_t_c = 'Amend' or $_dsMain1/sMPType_t_c = 'Renew'))"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'grandTotalOnlyListDiscountAndNetPricing'"><table-row><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">List Grand Total:</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$_dsMain1/quoteListPrice_t_c"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'12pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
</xsl:call-template></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c = 'listDiscountAndNetPricing' or $_dsMain1/subtotalGrandTotal_t_c = 'grandTotalOnlyListDiscountAndNetPricing'"><table-row><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-family: helvetica"><span style="font-weight: bold"><span style="color: #000000; font-family: helvetica">Total Discount:</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:variable name="discount">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="$_dsMain1/quoteCurrentDiscount_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="$_dsMain1/quoteCurrentDiscountSecondTier_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="$_dsMain1/quoteCurrentDiscountEndCustomer_t_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="discountFormattedPrint">
	<xsl:with-param name="discPct" select="$discount"/>
	<xsl:with-param name="fontSize" select="'12pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
	<xsl:with-param name="align" select="'right'"/>
</xsl:call-template></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/subtotalGrandTotal_t_c!='noPricing'"><table-row><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica"><span style="font-weight: bold">Net Grand Total:</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="2px solid #000000" padding="4px 0px" border-bottom="2px solid #000000"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="$_dsMain1/quoteNetPrice_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="$_dsMain1/quoteNetPriceSecondTier_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="$_dsMain1/quoteNetPriceEndCustomer_t_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<xsl:call-template name="currencyFormattedPrice">
	<xsl:with-param name="price" select="$extNetPrice"/>
	<xsl:with-param name="align" select="'right'"/>
	<xsl:with-param name="fontSize" select="'12pt'"/>
	<xsl:with-param name="fontWeight" select="'bold'"/>
</xsl:call-template>
</div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:when></xsl:choose>
<div page-break-before="always"/><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #236fa1; font-size: 14pt; font-family: helvetica"><span style="font-weight: bold"><span style="font-size: 14pt; font-family: helvetica">        <span style="color: #000000">Quote Information</span></span></span></span></span></div></div><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true" keep-together.within-page="1"><table-column column-width="200.0px"/><table-column column-width="250.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="color: black; font-size: 8pt; font-family: helvetica" line-height="107%">Quote Name:</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"> <xsl:choose><xsl:when test="$_dsMain1/quoteNameTextArea_t_c/@display_value"><xsl:value-of select="$_dsMain1/quoteNameTextArea_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/quoteNameTextArea_t_c"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Quote Date:</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsMain1/quoteExportDate_t_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'quoteExportDate_t_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Quote Valid Until:</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:value-of select="PrintUtil:convertDBToPattern( $_dsMain1/expiresOnDate_t_c, 'dd-MMM-yyyy' , $TIME_ZONE, 'expiresOnDate_t_c', 'ucpqStandardCommerceProcess', $PRINT_CODE )"/></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Contact Name:</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/salesRep_t_c/@display_value"><xsl:value-of select="$_dsMain1/salesRep_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/salesRep_t_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Phone:</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div/></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Email:</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/opportunityOwnerEmail_t_c/@display_value"><xsl:value-of select="$_dsMain1/opportunityOwnerEmail_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/opportunityOwnerEmail_t_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Quote To:</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="($_dsMain1/sellingMotion_t_c = 'NetApp to Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to Master Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to End Customer' or $_dsMain1/sellingMotion_t_c = '' or $_dsMain1/sellingMotion_t_c = 'NetApp to Reseller') and $_dsMain1/orderType_t_c = 'Standard'"><div>
<xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Sold To'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Reseller'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/sellingMotion_t_c = 'Reseller to End Customer' and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
					<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
						<xsl:if test="./object[@name='type'] = 'End Customer'">
							<xsl:value-of select="./object[@name='name']"/>
							<xsl:value-of select="', '"/>
							<xsl:value-of select="./object[@name='address1']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='city']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='state']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='country']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='zipCode']"/>
						</xsl:if>
					</div>			
		</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor') and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
					<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
						<xsl:if test="./object[@name='type'] = 'Distributor'">
							<xsl:value-of select="./object[@name='name']"/>
							<xsl:value-of select="', '"/>
							<xsl:value-of select="./object[@name='address1']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='city']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='state']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='country']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='zipCode']"/>
						</xsl:if>
					</div>			
		</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/orderType_t_c!='Standard'"><div>
<xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Sold To'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Quote From:</span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/sellingMotion_t_c = 'NetApp to End Customer' or $_dsMain1/sellingMotion_t_c = 'NetApp to Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to Master Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to Reseller' or $_dsMain1/sellingMotion_t_c = '' or $_dsMain1/orderType_t_c!='Standard'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"> <xsl:choose><xsl:when test="$_dsMain1/legalEntities_t_c/@display_value"><xsl:value-of select="$_dsMain1/legalEntities_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/legalEntities_t_c"/></xsl:otherwise></xsl:choose>, <xsl:choose><xsl:when test="$_dsMain1/legalEntityAddress_t_c/@display_value"><xsl:value-of select="$_dsMain1/legalEntityAddress_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/legalEntityAddress_t_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor' or ($_dsMain1/sellingMotion_t_c = 'Reseller to End Customer' and $_dsMain1/opportunityPathway_t_c = 'Reseller through NetApp')) and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Sold To'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="($_dsMain1/sellingMotion_t_c = 'Reseller to End Customer' and $_dsMain1/opportunityPathway_t_c = 'Reseller through Distributor') and $_dsMain1/orderType_t_c = 'Standard'"><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Reseller'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="', '"/>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/keyStone_t_c!='Yes'"><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">End Customer:</span></div></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/keyStone_t_c = 'Yes'"><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">End User:</span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
					<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
						<xsl:if test="./object[@name='type'] = 'End Customer'">
							<xsl:value-of select="./object[@name='name']"/>
							<xsl:value-of select="', '"/>
							<xsl:value-of select="./object[@name='address1']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='city']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='state']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='country']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='zipCode']"/>
						</xsl:if>
					</div>			
		</xsl:for-each></div></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsMain1/downstreamFulfillment_t_c = 'ERP' or $_dsMain1/downstreamFulfillment_t_c = 'Hybrid'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Ship To:</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
		<xsl:if test="./object[@name='type'] = 'Ship To Customer'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:if test="./object[@name='address1'] != ''">
			<xsl:value-of select="', '"/>
			</xsl:if>
			<xsl:value-of select="./object[@name='address1']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='city']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='state']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='country']"/>
			<xsl:value-of select="' '"/>
			<xsl:value-of select="./object[@name='zipCode']"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/downstreamFulfillment_t_c = 'SMP' or $_dsMain1/downstreamFulfillment_t_c = 'Hybrid'"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Service Customer:</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
					<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
						<xsl:if test="./object[@name='type'] = 'Service Customer'">
							<xsl:value-of select="./object[@name='name']"/>
							<xsl:value-of select="', '"/>
							<xsl:value-of select="./object[@name='address1']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='city']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='state']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='country']"/>
							<xsl:value-of select="' '"/>
							<xsl:value-of select="./object[@name='zipCode']"/>
						</xsl:if>
					</div>			
		</xsl:for-each></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span background-style="color: #ffffff; font-family: helvetica">Software Delivery Contact:</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
					<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
						<xsl:if test="./object[@name='type'] = 'Software Delivery'">
							<xsl:value-of select="./object[@name='contactName']"/>
						</xsl:if>
					</div>			
		</xsl:for-each></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="text-align: right"><span style="color: #000000"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Software Delivery Email:</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
					<div style="font-family: Helvetica; font-size: 8pt; line-height: 11pt">
						<xsl:if test="./object[@name='type'] = 'Software Delivery'">
							<xsl:value-of select="./object[@name='contactEmail']"/>
						</xsl:if>
					</div>			
		</xsl:for-each></div></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond49980761"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond49980761)=1"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Incoterm:</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond49980762"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond49980762)=1"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/incoterm_t_c/@display_value"><xsl:value-of select="$_dsMain1/incoterm_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/incoterm_t_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt"><span style="color: #000000; font-size: 12pt; font-family: helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Quote Status:</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/quoteStatus_t_c/@display_value"><xsl:value-of select="$_dsMain1/quoteStatus_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/quoteStatus_t_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsMain1/brandedService_c!='' or $_dsMain1/fulfillmentMethod_t_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/brandedService_c!=''"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Service Delivered By:</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/brandedService_c!=''"><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/brandedService_c/@display_value"><xsl:value-of select="$_dsMain1/brandedService_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/brandedService_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/fulfillmentMethod_t_c!=''"><div><div style="line-height: 12pt; text-align: right"><span style="font-size: 8pt; font-family: Helvetica"><span style="color: rgb(0, 0, 0); font-size: 12pt; font-family: Helvetica"><span style="color: rgb(0, 0, 0); font-size: 8pt; font-family: Helvetica">Fulfilment Method:</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/fulfillmentMethod_t_c!=''"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="font-size: 8pt"> <xsl:choose><xsl:when test="$_dsMain1/fulfillmentMethod_t_c/@display_value"><xsl:value-of select="$_dsMain1/fulfillmentMethod_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/fulfillmentMethod_t_c"/></xsl:otherwise></xsl:choose></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/contingencySoldTo_t_c!='' or $_dsMain1/apttusAgreementNumber_t_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262689"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/contingencySoldTo_t_c!='' and not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262689)=1"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Contingency:</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262690"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/contingencySoldTo_t_c!='' and not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262690)=1"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/contingencySoldTo_t_c/@display_value"><xsl:value-of select="$_dsMain1/contingencySoldTo_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/contingencySoldTo_t_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262695"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/apttusAgreementNumber_t_c!='' and not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262695)=1"><div><div style="line-height: 8pt; text-align: right"><span style="font-family: Helvetica; font-size: 8pt"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 8pt"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 8pt">Contract Number:</span></span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262696"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/apttusAgreementNumber_t_c!='' and not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262696)=1"><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/apttusAgreementNumber_t_c/@display_value"><xsl:value-of select="$_dsMain1/apttusAgreementNumber_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/apttusAgreementNumber_t_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond49980763"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond49980763)=1"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Order Type:</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond49980764"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond49980764)=1"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/orderType_t_c/@display_value"><xsl:value-of select="$_dsMain1/orderType_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/orderType_t_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262697"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/apttusAgreementNumber_t_c!='' and not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262697)=1"><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Contract Name:</span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond47262698"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/apttusAgreementNumber_t_c!='' and not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262698)=1"><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsMain1/agreementName_t_c/@display_value"><xsl:value-of select="$_dsMain1/agreementName_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/agreementName_t_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/doNotShipBeforeThisDate_t_c='true'"><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Do Not Ship Before:</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding-left="0.15in"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/doNotShipBeforeThisDate_t_c='true'"><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsMain1/doNotShipBeforeThisDate_t_c/@display_value"><xsl:value-of select="$_dsMain1/doNotShipBeforeThisDate_t_c/@display_value"/> </xsl:when><xsl:otherwise><xsl:value-of select="$_dsMain1/doNotShipBeforeThisDate_t_c"/> </xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond49980765"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond49980765)=1"><div><div style="line-height: 8pt; text-align: right"><span style="font-size: 8pt">Payment Terms:</span></div></div></xsl:when></xsl:choose></div></fo:block-container></td><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:variable name="cond49980766"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond49980766)=1"><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/paymentTerms_t_c/@display_value"><xsl:value-of select="$_dsMain1/paymentTerms_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/paymentTerms_t_c"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr><xsl:choose><xsl:when test="$_dsMain1/commentHistoryString_t_c!=''"><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Comments:</span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsMain1/commentHistoryString_t_c/@display_value"><xsl:value-of select="$_dsMain1/commentHistoryString_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/commentHistoryString_t_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><table-row><table-cell cpq-cell="1" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:for-each select="/transaction/data_xml/document[@document_number='1']/_commerce_array_set_attr_info[@setName='discountSummary_Array_t_c']/_array_set_row"><xsl:sort select="./@_row_number" data-type="number" order="ascending"/><xsl:variable name="_dsTxnArray" select="."/><xsl:choose><xsl:when test="$_dsTxnArray/attribute[@var_name='discountType_discountSummary_Array_t_c'] = 'Promotional Discount' or $_dsMain1/storageEfficiencyGuarantee_t_c='true'"><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><div><div style="line-height: 12pt; text-align: right"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica">Promotion Message:</span></span></div></div></xsl:when></xsl:choose></xsl:for-each></div></fo:block-container></td><table-cell cpq-cell="1" number-columns-spanned="3" padding="4px 0px"><div-container clip="rect(-3pt,0,-3pt,0)"><div><xsl:choose><xsl:when test="$_dsMain1/storageEfficiencyGuarantee_t_c='true'"><div><div style="line-height: 9.2pt; text-align: justify"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span background-style="color: #ffffff; font-family: helvetica">To qualify for the Efficiency Guarantee, you need to nominate your opportunity in SFDC. Checking the Storage Efficiency Guarantee box does not nominate your opportunity for the efficiency guarantee, and the nomination for the Efficiency Guarantee must be approved by the program office. In addition, the Efficiency Guarantee terms and conditions must be sent to the customer prior to the corresponding purchase order being placed. If the terms and conditions are not sent to the customer prior to the order being booked, the nomination will be disqualified from the Efficiency Guarantee Program and this will be considered a booking violation.</span></span></span></div></div></xsl:when></xsl:choose><xsl:for-each select="/transaction/data_xml/document[@document_number='1']/_commerce_array_set_attr_info[@setName='promo_Array_t_c']/_array_set_row"><xsl:sort select="./@_row_number" data-type="number" order="ascending"/><xsl:variable name="_dsTxnArray" select="."/><xsl:choose><xsl:when test="$_dsTxnArray/attribute[@var_name='promoDescription_promo_Array_t_c']!=''"><div><div style="line-height: 8pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"> <xsl:choose><xsl:when test="$_dsTxnArray/attribute[@var_name='promoDescription_promo_Array_t_c']/@display_value"><xsl:value-of select="$_dsTxnArray/attribute[@var_name='promoDescription_promo_Array_t_c']/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsTxnArray/attribute[@var_name='promoDescription_promo_Array_t_c']"/></xsl:otherwise></xsl:choose></span></div></div></xsl:when></xsl:choose></xsl:for-each></div></fo:block-container></td></tr></tbody></table></div><xsl:choose><xsl:when test="$_dsMain1/sellingMotion_t_c = 'NetApp to Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to End Customer' or $_dsMain1/sellingMotion_t_c = 'NetApp to Master Distributor' or $_dsMain1/sellingMotion_t_c = 'NetApp to Reseller' or $_dsMain1/sellingMotion_t_c = ''"><div space-after="0.5in" space-after.precedence="force"/><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="500.0px"/><table-body><xsl:variable name="cond47262691"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ($_dsMain1/pvrStatus_t_c = 'PVR Approved' or $_dsMain1/pvrStatus_t_c = 'PVR PreApproved' or $_dsMain1/pvrStatus_t_c = 'PVR Not Required' or $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262691)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding-top="0.2in" border-right="1px solid #000000" border-left="1px solid #000000" padding-left="0.2in" padding-bottom="0.2in" border-bottom="1px solid #000000" padding-right="0.2in"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"><span style="font-weight: bold">Terms and Conditions</span></span></div><div style="line-height: 12pt; text-align: left"></div><div style="line-height: 8pt; text-align: justify"><span style="font-size: 8pt">This quote is presented for budgetary purposes only. All net prices and discounts are estimated values only and are subject to change. A budgetary quote cannot be used as the basis for valid purchase order.</span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47262953"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="($_dsMain1/pvrStatus_t_c = 'PVR Not Required' or $_dsMain1/pvrStatus_t_c = 'PVR Approved' or $_dsMain1/pvrStatus_t_c = 'PVR PreApproved' or $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved') and $_dsMain1/orderType_t_c!='Eval'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262953)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding-top="0.2in" border-right="1px solid #000000" border-left="1px solid #000000" padding-left="0.2in" padding-bottom="0.2in" border-bottom="1px solid #000000" padding-right="0.2in"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"><span style="font-weight: bold">Terms and Conditions</span></span></div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"></span></div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt">No variations to a quote shall be effective unless approved in writing by NetApp and any PVR requires prior written approval by NetApp. Amounts quoted arebefore all applicable local transaction taxes.</span></div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">For US sales: Applicable sales tax will be charged to shipments in the United States unless a valid certificate of tax is submitted to and accepted by NetApp.</span></span></div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt">For International sales: Applicable VAT, GST, consumption tax, or other transaction tax will be charged to international sales. Orders containing both tangible and intangible items, may be billed by way of one or more invoices, in accordance with applicable, local tax laws. This Solution Quotation is valid until the expiration date identified above. Orders submitted hereunder are subject to NetApp's Standard Terms and Conditions published at: www.netapp.com/us/how-to-buy/stc.html, unless a written agreement governing purchasing between the parties for the applicable products and/or services listed above is otherwise current and valid. Additional or conflicting terms or conditions included on or within any purchase order or similar purchase authorization submitted by purchaser shall have no force or effect and NetApp's acknowledgment of an order, commencement ofperformance, delivery of product or other conduct shall not be deemed or constitute acceptance of any additional or different terms and conditions in any manner whatsoever.</span></div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt">Software License information will be delivered via the email that has been provided during the Quoting process.</span></div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt">The service period start dates and durations above are those for the total service period for each asset and may not reflect the duration of individual support components contained within each asset.</span></div></div><xsl:choose><xsl:when test="$_dsMain1/fulfillmentMethod_t_c = 'Partial'"><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="color: #000000; font-family: helvetica">Prices quoted are based on products being shipped in one or more shipments. Each shipment will be invoiced at time of shipment and paid in accordance with agreed payment terms.</span></span></div></div></xsl:when></xsl:choose></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:variable name="cond47263137"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/orderType_t_c = 'Eval' and ($_dsMain1/pvrStatus_t_c = 'PVR Not Required' or $_dsMain1/pvrStatus_t_c = 'PVR PreApproved' or $_dsMain1/pvrStatus_t_c = 'PVR Approved' or $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263137)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding-top="0.2in" border-right="1px solid #000000" border-left="1px solid #000000" padding-left="0.2in" padding-bottom="0.2in" border-bottom="1px solid #000000" padding-right="0.2in"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Demo Eval Terms and Conditions</span></span></div><div style="line-height: 12pt; text-align: left"></div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">This price quotation is valid until the expiration date identified above. Orders submitted hereunder are subject to NetApp's Standard Terms and Conditions published at: www.netapp.com/us/how-to-buy/stc.html, unless a written agreement governing purchasing between the parties for the applicable products and/or services listed above is otherwise current and valid. Additional or conflicting terms or conditions included on or within any purchase order or similar purchase authorization submitted by purchaser shall have no force or effect and NetApp's acknowledgment of an order, commencement of performance, delivery of product or other conduct shall not be deemed or constitute acceptance of any additional or different terms and conditions in any manner whatsoever. Software License information will be delivered via the email that has been provided during the Quoting process. The service period start dates and durations above are those for the total service period for each asset and may not reflect the duration of individual support components contained within each asset.</span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div><div space-after="0.2in" space-after.precedence="force"/><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="500.0px"/><table-body><xsl:choose><xsl:when test="$_dsMain1/keystoneAdditionalTermsAndDetails_t_c!=''"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding-top="0.2in" border-right="1px solid #000000" border-left="1px solid #000000" padding-left="0.2in" padding-bottom="0.2in" border-bottom="1px solid #000000" padding-right="0.2in"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: justify"><span style="font-weight: bold"><span style="color: #000000; font-size: 8pt; font-family: Helvetica">Additional <span text-align="justify">Terms and Conditions</span></span></span></div><div style="line-height: 12pt; text-align: justify"></div><div style="line-height: 12pt; text-align: justify"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span text-align="justify"><xsl:choose><xsl:when test="$_dsMain1/keystoneAdditionalTermsAndDetails_t_c/@display_value"><xsl:value-of select="$_dsMain1/keystoneAdditionalTermsAndDetails_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/keystoneAdditionalTermsAndDetails_t_c"/></xsl:otherwise></xsl:choose></span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/sellingMotion_t_c = 'Reseller to End Customer' or $_dsMain1/sellingMotion_t_c = 'Distributor to End Customer' or $_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor'"><div space-after="0.5in" space-after.precedence="force"/><xsl:variable name="cond47263135"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test=" not ($_dsMain1/pvrStatus_t_c = 'PVR Not Required' or $_dsMain1/pvrStatus_t_c = 'PVR PreApproved' or $_dsMain1/pvrStatus_t_c = 'PVR Approved' or $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved')">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263135)=1"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="500.0px"/><table-body><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding-top="0.2in" border-right="1px solid #000000" border-left="1px solid #000000" padding-left="0.2in" padding-bottom="0.2in" border-bottom="1px solid #000000" padding-right="0.2in"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: justify"><span style="font-size: 8pt"><span style="font-weight: bold">Terms and Conditions</span></span></div><div style="line-height: 12pt; text-align: left"></div><div style="line-height: 8pt; text-align: justify"><span style="font-size: 8pt">This quote is presented for budgetary purposes only. All net prices and discounts are estimated values only and are subject to change. A budgetary quote cannot be used as the basis for valid purchase order.</span></div></div></div></fo:block-container></td></tr></tbody></table></div></xsl:when></xsl:choose><xsl:variable name="cond47263136"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$_dsMain1/pvrStatus_t_c = 'PVR Approved' or $_dsMain1/pvrStatus_t_c = 'PVR Not Required' or $_dsMain1/pvrStatus_t_c = 'PVR PreApproved' or $_dsMain1/pvrStatus_t_c = 'Approved' or $_dsMain1/pvrStatus_t_c = 'Approval Not Required' or $_dsMain1/pvrStatus_t_c = 'Pre Approved'">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47263136)=1"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="500.0px"/><table-body><xsl:choose><xsl:when test="$_dsMain1/partnerTermsAndConditionsText_t_c!=''"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding-top="0.2in" border-right="1px solid #000000" border-left="1px solid #000000" padding-left="0.2in" padding-bottom="0.2in" border-bottom="1px solid #000000" padding-right="0.2in"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Terms and Conditions</span></span></span></div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 8pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsMain1/partnerTermsAndConditionsText_t_c/@display_value"><xsl:value-of select="$_dsMain1/partnerTermsAndConditionsText_t_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/partnerTermsAndConditionsText_t_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/partnerTermsAndConditionsText_t_c = '' and ($_dsMain1/sellingMotion_t_c = 'Distributor to Reseller' or $_dsMain1/sellingMotion_t_c = 'Master Distributor to Distributor' or ($_dsMain1/sellingMotion_t_c = 'Reseller to End Customer' and $_dsMain1/opportunityPathway_t_c = 'Reseller through NetApp'))"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding-top="0.2in" border-right="1px solid #000000" border-left="1px solid #000000" padding-left="0.2in" padding-bottom="0.2in" border-bottom="1px solid #000000" padding-right="0.2in"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Terms and Conditions</span></span></span></span></div></div><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt">
		<xsl:if test="./object[@name='type'] = 'Sold To'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="'  Standard Terms and Conditions Apply to this quotation.'"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:choose><xsl:when test="$_dsMain1/partnerTermsAndConditionsText_t_c = '' and ($_dsMain1/sellingMotion_t_c = 'Reseller to End Customer' and $_dsMain1/opportunityPathway_t_c = 'Reseller through Distributor')"><table-row><table-cell cpq-cell="1" border-top="1px solid #000000" padding-top="0.2in" border-right="1px solid #000000" border-left="1px solid #000000" padding-left="0.2in" padding-bottom="0.2in" border-bottom="1px solid #000000" padding-right="0.2in"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span style="color: #000000; font-size: 8pt; font-family: helvetica"><span style="font-size: 8pt"><span style="font-weight: bold">Terms and Conditions</span></span></span></span></div></div><div><xsl:for-each select="exsl:node-set($AccountXml)/object/object">
	<div style="font-family: Helvetica; font-size: 8pt">
		<xsl:if test="./object[@name='type'] = 'Reseller'">
			<xsl:value-of select="./object[@name='name']"/>
			<xsl:value-of select="'  Standard Terms and Conditions Apply to this quotation.'"/>
		</xsl:if>
	</div>			
</xsl:for-each></div></div></fo:block-container></td></tr></xsl:when></xsl:choose></tbody></table></div></xsl:when></xsl:choose></xsl:when></xsl:choose><xsl:variable name="EffectiveCapacityLines" select="exsl:node-set(/transaction/data_xml/document[(normalize-space(./@data_type)='2') and ./model_l/_model_name = 'Cluster Manager' and ./fusionEstiUsableCapacity_l_c!=''])"/>
<xsl:for-each select="$EffectiveCapacityLines">
	<xsl:variable name="_dsSub1" select="."/>
	<xsl:if test="position()=1">
		
		<xsl:variable name="hasEffectiveCapacityLines" select="boolean(count($EffectiveCapacityLines) &gt; 0)"/>
	<div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica">Capacity Measurements</span></span></div></div><div space-after="0.1in" space-after.precedence="force"/><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true"><table-column column-width="250.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-column column-width="200.0px"/><table-body><xsl:variable name="cond47262969"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasEffectiveCapacityLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262969)=1"><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-size: 10pt"><span style="font-weight: bold"><span style="color: #000000; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">Configuration</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">Storage Efficiency Factor</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: center"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">RAW Capacity (TB)</span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 13.3333pt; text-align: center"><span style="font-size: 10pt"><span style="font-weight: bold"><span style="color: #000000; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left">Effective Capacity (TB)</span></span></span></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 15pt; text-align: center"><span style="font-weight: bold"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsMain1/currency_t/@display_value"><xsl:value-of select="$_dsMain1/currency_t/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsMain1/currency_t"/></xsl:otherwise></xsl:choose>/ TB (Effective Capacity)</span></span></div></div></div></fo:block-container></td></tr></xsl:when></xsl:choose><xsl:for-each select="$EffectiveCapacityLines"><xsl:sort select="./@_document_number" order="ascending"/><xsl:variable name="_dsSub1" select="."/><xsl:variable name="EffectiveCapacityXml"><xsl:call-template name="convertJsonToXml"><xsl:with-param name="jsonStr" select="$_dsSub1/fusionEstiUsableCapacity_l_c"/></xsl:call-template></xsl:variable><!-- CONTENT_REPLACE_TOKEN tag will be replaced by Component Content --><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="color: #000000; font-size: 10pt; font-family: Helvetica"><xsl:choose><xsl:when test="$_dsSub1/virtualConfigName_l_c/@display_value"><xsl:value-of select="$_dsSub1/virtualConfigName_l_c/@display_value"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$_dsSub1/virtualConfigName_l_c"/></xsl:otherwise></xsl:choose></span></div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="font-family: Helvetica; font-size: 10pt; text-align: center">
    <xsl:value-of select="exsl:node-set($EffectiveCapacityXml)/object/object[@name='Estimate Storage Efficiency (Data Reduction Ratio)']"/>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="font-family: Helvetica; font-size: 10pt; text-align: center">
    <xsl:value-of select="exsl:node-set($EffectiveCapacityXml)/object/object[@name='estimatedRawCapacity']"/>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div>
<div style="font-family: Helvetica; font-size: 10pt; text-align: center">
    <xsl:value-of select="exsl:node-set($EffectiveCapacityXml)/object/object[@name='Estimated Effective Capacity']"/>
</div></div></div></fo:block-container></td><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><xsl:variable name="Effective">
    <xsl:value-of select="exsl:node-set($EffectiveCapacityXml)/object/object[@name='Estimated Effective Capacity']"/>
</xsl:variable>

<!--xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;1&#39; or $_dsMain1/pricingTierForPrint_t_c = &#39;&#39;">
        <xsl:value-of select="$_dsMain1/quoteNetPrice_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;2&#39;">
        <xsl:value-of select="$_dsMain1/quoteNetPriceSecondTier_t_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = &#39;3&#39;">
        <xsl:value-of select="$_dsMain1/quoteNetPriceEndCustomer_t_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable-->
<xsl:variable name="extNetPrice">
<xsl:choose>
    <xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '1' or $_dsMain1/pricingTierForPrint_t_c = ''">
        <xsl:value-of select="extendedNetPrice_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '2'">
        <xsl:value-of select="extNetPriceResellerfloat_l_c"/>
    </xsl:when>
	<xsl:when test="$_dsMain1/pricingTierForPrint_t_c = '3'">
        <xsl:value-of select="extnetPriceEndCustomerfloat_l_c"/>
    </xsl:when>
    <xsl:otherwise>
		<xsl:value-of select="-1"/>
	</xsl:otherwise>
</xsl:choose>
</xsl:variable>
<div style="font-family: Helvetica; font-size: 10pt; text-align: center">
	<xsl:choose>
		<xsl:when test="$extNetPrice &gt; 0">  
			<xsl:value-of select="format-number(($extNetPrice div $Effective), '0.##')"/>
		</xsl:when>
		<xsl:otherwise>0</xsl:otherwise>
	</xsl:choose>
</div></div></div></fo:block-container></td></tr></xsl:for-each></tbody></table></div><div space-after="0.1in" space-after.precedence="force"/><xsl:variable name="cond47262970"><xsl:call-template name="getCustomXslTruth"><xsl:with-param name="var"><xsl:choose><xsl:when test="$hasEffectiveCapacityLines">
        1
    </xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:with-param></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="number($cond47262970)=1"><div><table table-layout="fixed" float="left" border-collapse="collapse" autoFit="true" keep-together.within-page="1"><table-column column-width="600.0px"/><table-body><table-row><table-cell cpq-cell="1" border-top="1px solid #949494" padding="4px 0px" border-right="1px solid #949494" border-left="1px solid #949494" border-bottom="1px solid #949494"><div-container clip="rect(-3pt,0,-3pt,0)"><div><div><div style="line-height: 12pt; text-align: left"><span style="font-weight: bold"><span style="color: #000000; font-size: 12pt; font-family: Helvetica"><span background-style="color: #ffffff; font-size: 11pt; font-family: Helvetica" text-align="left">Capacity Measurement Information</span></span></span></div><div style="line-height: 12pt; text-align: left"></div><div style="line-height: 12pt; text-align: left"><span style="font-size: 8pt"><span style="color: #000000; font-family: Helvetica"><span background-style="color: #ffffff; font-family: Helvetica" text-align="left"><span style="font-family: Helvetica">The table above contains estimates and is for informational purposes only. It does not constitute an offer. To apply for the NetApp Efficiency Guarantee, Customer must submit a request and provide a signed copy of the terms and conditions prior to placing a purchase order for an eligible flash solution. Contact your NetApp representative for further details.</span></span></span></span></div></div></div></fo:block-container></td></tr></tbody></table></div></xsl:when></xsl:choose>
    </xsl:if>
</xsl:for-each></fo:block-container></div></xsl:template></xsl:stylesheet>